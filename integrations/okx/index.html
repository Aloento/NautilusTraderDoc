<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-integrations/okx" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">OKX | NautilusTrader 文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nautilus.aloen.to/integrations/okx"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OKX | NautilusTrader 文档"><meta data-rh="true" name="description" content="Founded in 2017, OKX is a leading cryptocurrency exchange offering spot, perpetual swap,"><meta data-rh="true" property="og:description" content="Founded in 2017, OKX is a leading cryptocurrency exchange offering spot, perpetual swap,"><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://nautilus.aloen.to/integrations/okx"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/integrations/okx" hreflang="zh"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/integrations/okx" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Integrations","item":"https://nautilus.aloen.to/integrations/"},{"@type":"ListItem","position":2,"name":"OKX","item":"https://nautilus.aloen.to/integrations/okx"}]}</script><link rel="stylesheet" href="/assets/css/styles.33db920f.css">
<script src="/assets/js/runtime~main.eefcc7db.js" defer="defer"></script>
<script src="/assets/js/main.3352860b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent__uWo" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--light_cjoX"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--dark_jZId"></div><b class="navbar__title text--truncate">NautilusTrader</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/api_reference/">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Aloento/NautilusTraderDoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_RWFU colorModeToggle_sA1q"><button class="clean-btn toggleButton_qjfc toggleButtonDisabled_cpNp" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX lightToggleIcon_UYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX darkToggleIcon_i1s2"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX systemToggleIcon_yIQx"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_PsjF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_jk42"><div class="docsWrapper_KWBO"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_XpKL" type="button"></button><div class="docRoot_joIP"><aside class="theme-doc-sidebar-container docSidebarContainer_DOen"><div class="sidebarViewport_j7YP"><div class="sidebar_nPgc"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_MTDt"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/api_reference/"><span title="Python API" class="categoryLinkLabel_XKxb">Python API</span></a><button aria-label="展开侧边栏分类 &#x27;Python API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/concepts/"><span title="Concepts" class="categoryLinkLabel_XKxb">Concepts</span></a><button aria-label="展开侧边栏分类 &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/developer_guide/"><span title="Developer Guide" class="categoryLinkLabel_XKxb">Developer Guide</span></a><button aria-label="展开侧边栏分类 &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/getting_started/"><span title="入门" class="categoryLinkLabel_XKxb">入门</span></a><button aria-label="展开侧边栏分类 &#x27;入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist menu__link--active" href="/integrations/"><span title="Integrations" class="categoryLinkLabel_XKxb">Integrations</span></a><button aria-label="折叠侧边栏分类 &#x27;Integrations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/betfair"><span title="Betfair" class="linkLabel_CNtA">Betfair</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/binance"><span title="Binance" class="linkLabel_CNtA">Binance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/bitmex"><span title="BitMEX" class="linkLabel_CNtA">BitMEX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/blockchain"><span title="Blockchain" class="linkLabel_CNtA">Blockchain</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/bybit"><span title="Bybit" class="linkLabel_CNtA">Bybit</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/coinbase_intx"><span title="Coinbase International" class="linkLabel_CNtA">Coinbase International</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/databento"><span title="Databento" class="linkLabel_CNtA">Databento</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/dydx"><span title="dYdX" class="linkLabel_CNtA">dYdX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/hyperliquid"><span title="Hyperliquid" class="linkLabel_CNtA">Hyperliquid</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/ib"><span title="Interactive Brokers" class="linkLabel_CNtA">Interactive Brokers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/integrations/okx"><span title="OKX" class="linkLabel_CNtA">OKX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/polymarket"><span title="Polymarket" class="linkLabel_CNtA">Polymarket</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/tardis"><span title="Tardis" class="linkLabel_CNtA">Tardis</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/tutorials/"><span title="教程" class="categoryLinkLabel_XKxb">教程</span></a><button aria-label="展开侧边栏分类 &#x27;教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_bw1l"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PIhC"><div class="docItemContainer_pFw3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HRKZ" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sX5c"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/integrations/"><span>Integrations</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">OKX</span></li></ul></nav><div class="tocCollapsible_DhUt theme-doc-toc-mobile tocMobile_Izjv"><button type="button" class="clean-btn tocCollapsibleButton_eYR5">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>OKX</h1></header>
<p>Founded in 2017, OKX is a leading cryptocurrency exchange offering spot, perpetual swap,
futures, and options trading. This integration supports live market data ingest and order
execution on OKX.</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Overview的直接链接" title="Overview的直接链接" translate="no">​</a></h2>
<p>This adapter is implemented in Rust, with optional Python bindings for ease of use in Python-based workflows.
It does not require external OKX client libraries—the core components are compiled as a static library and linked automatically during the build.</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Examples的直接链接" title="Examples的直接链接" translate="no">​</a></h2>
<p>You can find live example scripts <a href="https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/okx/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="product-support">Product support<a href="#product-support" class="hash-link" aria-label="Product support的直接链接" title="Product support的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Product Type</th><th>Data Feed</th><th>Trading</th><th>Notes</th></tr></thead><tbody><tr><td>Spot</td><td>✓</td><td>✓</td><td>Use for index prices.</td></tr><tr><td>Perpetual Swaps</td><td>✓</td><td>✓</td><td>Linear and inverse contracts.</td></tr><tr><td>Futures</td><td>✓</td><td>✓</td><td>Specific expiration dates.</td></tr><tr><td>Margin</td><td>-</td><td>-</td><td><em>Not yet supported</em>.</td></tr><tr><td>Options</td><td>✓</td><td>-</td><td><em>Data feed supported, trading coming soon</em>.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p><strong>Options support</strong>: While you can subscribe to options market data and receive price updates, order execution for options is not yet implemented. You can use the symbology format shown above to subscribe to options data feeds.</p></div></div>
<p>The OKX adapter includes multiple components, which can be used separately or together depending on your use case.</p>
<ul>
<li><code>OKXHttpClient</code>: Low-level HTTP API connectivity.</li>
<li><code>OKXWebSocketClient</code>: Low-level WebSocket API connectivity.</li>
<li><code>OKXInstrumentProvider</code>: Instrument parsing and loading functionality.</li>
<li><code>OKXDataClient</code>: Market data feed manager.</li>
<li><code>OKXExecutionClient</code>: Account management and trade execution gateway.</li>
<li><code>OKXLiveDataClientFactory</code>: Factory for OKX data clients (used by the trading node builder).</li>
<li><code>OKXLiveExecClientFactory</code>: Factory for OKX execution clients (used by the trading node builder).</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>Most users will simply define a configuration for a live trading node (as shown below),
and won’t need to work directly with these lower-level components.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="symbology">Symbology<a href="#symbology" class="hash-link" aria-label="Symbology的直接链接" title="Symbology的直接链接" translate="no">​</a></h2>
<p>OKX uses specific symbol conventions for different instrument types. All instrument IDs should include the <code>.OKX</code> suffix when referencing them (e.g., <code>BTC-USDT.OKX</code> for spot Bitcoin).</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="symbol-format-by-instrument-type">Symbol format by instrument type<a href="#symbol-format-by-instrument-type" class="hash-link" aria-label="Symbol format by instrument type的直接链接" title="Symbol format by instrument type的直接链接" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="spot">SPOT<a href="#spot" class="hash-link" aria-label="SPOT的直接链接" title="SPOT的直接链接" translate="no">​</a></h4>
<p>Format: <code>{BaseCurrency}-{QuoteCurrency}</code></p>
<p>Examples:</p>
<ul>
<li><code>BTC-USDT</code> - Bitcoin against USDT (Tether)</li>
<li><code>BTC-USDC</code> - Bitcoin against USDC</li>
<li><code>ETH-USDT</code> - Ethereum against USDT</li>
<li><code>SOL-USDT</code> - Solana against USDT</li>
</ul>
<p>To subscribe to spot Bitcoin USD in your strategy:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BTC-USDT.OKX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># For USDT-quoted spot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BTC-USDC.OKX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># For USDC-quoted spot</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="swap-perpetual-futures">SWAP (Perpetual Futures)<a href="#swap-perpetual-futures" class="hash-link" aria-label="SWAP (Perpetual Futures)的直接链接" title="SWAP (Perpetual Futures)的直接链接" translate="no">​</a></h4>
<p>Format: <code>{BaseCurrency}-{QuoteCurrency}-SWAP</code></p>
<p>Examples:</p>
<ul>
<li><code>BTC-USDT-SWAP</code> - Bitcoin perpetual swap (linear, USDT-margined)</li>
<li><code>BTC-USD-SWAP</code> - Bitcoin perpetual swap (inverse, coin-margined)</li>
<li><code>ETH-USDT-SWAP</code> - Ethereum perpetual swap (linear)</li>
<li><code>ETH-USD-SWAP</code> - Ethereum perpetual swap (inverse)</li>
</ul>
<p>Linear vs Inverse contracts:</p>
<ul>
<li><strong>Linear</strong> (USDT-margined): Uses stablecoins like USDT as margin.</li>
<li><strong>Inverse</strong> (coin-margined): Uses the base cryptocurrency as margin.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="futures-dated-futures">FUTURES (Dated Futures)<a href="#futures-dated-futures" class="hash-link" aria-label="FUTURES (Dated Futures)的直接链接" title="FUTURES (Dated Futures)的直接链接" translate="no">​</a></h4>
<p>Format: <code>{BaseCurrency}-{QuoteCurrency}-{YYMMDD}</code></p>
<p>Examples:</p>
<ul>
<li><code>BTC-USD-251226</code> - Bitcoin futures expiring December 26, 2025</li>
<li><code>ETH-USD-251226</code> - Ethereum futures expiring December 26, 2025</li>
<li><code>BTC-USD-250328</code> - Bitcoin futures expiring March 28, 2025</li>
</ul>
<p>Note: Futures are typically inverse contracts (coin-margined).</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="options">OPTIONS<a href="#options" class="hash-link" aria-label="OPTIONS的直接链接" title="OPTIONS的直接链接" translate="no">​</a></h4>
<p>Format: <code>{BaseCurrency}-{QuoteCurrency}-{YYMMDD}-{Strike}-{Type}</code></p>
<p>Examples:</p>
<ul>
<li><code>BTC-USD-250328-100000-C</code> - Bitcoin call option, $100,000 strike, expiring March 28, 2025</li>
<li><code>BTC-USD-250328-100000-P</code> - Bitcoin put option, $100,000 strike, expiring March 28, 2025</li>
<li><code>ETH-USD-250328-4000-C</code> - Ethereum call option, $4,000 strike, expiring March 28, 2025</li>
</ul>
<p>Where:</p>
<ul>
<li><code>C</code> = Call option</li>
<li><code>P</code> = Put option</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="common-questions">Common questions<a href="#common-questions" class="hash-link" aria-label="Common questions的直接链接" title="Common questions的直接链接" translate="no">​</a></h3>
<p><strong>Q: How do I subscribe to spot Bitcoin USD?</strong>
A: Use <code>BTC-USDT.OKX</code> for USDT-margined spot or <code>BTC-USDC.OKX</code> for USDC-margined spot.</p>
<p><strong>Q: What&#x27;s the difference between BTC-USDT-SWAP and BTC-USD-SWAP?</strong>
A: <code>BTC-USDT-SWAP</code> is a linear perpetual (USDT-margined), while <code>BTC-USD-SWAP</code> is an inverse perpetual (BTC-margined).</p>
<p><strong>Q: How do I know which contract type to use?</strong>
A: Check the <code>contract_types</code> parameter in the configuration:</p>
<ul>
<li>For linear contracts: <code>OKXContractType.LINEAR</code>.</li>
<li>For inverse contracts: <code>OKXContractType.INVERSE</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="orders-capability">Orders capability<a href="#orders-capability" class="hash-link" aria-label="Orders capability的直接链接" title="Orders capability的直接链接" translate="no">​</a></h2>
<p>Below are the order types, execution instructions, and time-in-force options supported
for linear perpetual swap products on OKX.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="client-order-id-requirements">Client order ID requirements<a href="#client-order-id-requirements" class="hash-link" aria-label="Client order ID requirements的直接链接" title="Client order ID requirements的直接链接" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>OKX has specific requirements for client order IDs:</p><ul>
<li><strong>No hyphens allowed</strong>: OKX does not accept hyphens (<code>-</code>) in client order IDs.</li>
<li>Maximum length: 32 characters.</li>
<li>Allowed characters: alphanumeric characters and underscores only.</li>
</ul><p>When configuring your strategy, ensure you set:</p><div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">use_hyphens_in_client_order_ids</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><br></span></code></pre></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="order-types">Order types<a href="#order-types" class="hash-link" aria-label="Order types的直接链接" title="Order types的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Order Type</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td><code>MARKET</code></td><td>✓</td><td>Immediate execution at market price. Supports quote quantity.</td></tr><tr><td><code>LIMIT</code></td><td>✓</td><td>Execution at specified price or better.</td></tr><tr><td><code>STOP_MARKET</code></td><td>✓</td><td>Conditional market order (OKX algo order).</td></tr><tr><td><code>STOP_LIMIT</code></td><td>✓</td><td>Conditional limit order (OKX algo order).</td></tr><tr><td><code>MARKET_IF_TOUCHED</code></td><td>✓</td><td>Conditional market order (OKX algo order).</td></tr><tr><td><code>LIMIT_IF_TOUCHED</code></td><td>✓</td><td>Conditional limit order (OKX algo order).</td></tr><tr><td><code>TRAILING_STOP</code></td><td>-</td><td><em>Not yet supported</em>.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p><strong>Conditional orders</strong>: <code>STOP_MARKET</code>, <code>STOP_LIMIT</code>, <code>MARKET_IF_TOUCHED</code>, and <code>LIMIT_IF_TOUCHED</code> are implemented as OKX algo orders, providing advanced trigger capabilities with multiple price sources.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="execution-instructions">Execution instructions<a href="#execution-instructions" class="hash-link" aria-label="Execution instructions的直接链接" title="Execution instructions的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Instruction</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td><code>post_only</code></td><td>✓</td><td>Only for LIMIT orders.</td></tr><tr><td><code>reduce_only</code></td><td>✓</td><td>Only for derivatives.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="time-in-force">Time in force<a href="#time-in-force" class="hash-link" aria-label="Time in force的直接链接" title="Time in force的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Time in force</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td><code>GTC</code></td><td>✓</td><td>Good Till Canceled.</td></tr><tr><td><code>FOK</code></td><td>✓</td><td>Fill or Kill.</td></tr><tr><td><code>IOC</code></td><td>✓</td><td>Immediate or Cancel.</td></tr><tr><td><code>GTD</code></td><td>✗</td><td><em>Not supported by OKX API.</em></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p><strong>GTD (Good Till Date) time in force</strong>: OKX does not support native GTD functionality through their API.</p><p>If you need GTD functionality, you must use Nautilus&#x27;s strategy-managed GTD feature, which will handle the order expiration by canceling the order at the specified expiry time.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="batch-operations">Batch operations<a href="#batch-operations" class="hash-link" aria-label="Batch operations的直接链接" title="Batch operations的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Operation</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td>Batch Submit</td><td>✓</td><td>Submit multiple orders in single request.</td></tr><tr><td>Batch Modify</td><td>✓</td><td>Modify multiple orders in single request.</td></tr><tr><td>Batch Cancel</td><td>✓</td><td>Cancel multiple orders in single request.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="position-management">Position management<a href="#position-management" class="hash-link" aria-label="Position management的直接链接" title="Position management的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Feature</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td>Query positions</td><td>✓</td><td>Real-time position updates.</td></tr><tr><td>Position mode</td><td>✓</td><td>Net vs Long/Short mode.</td></tr><tr><td>Leverage control</td><td>✓</td><td>Dynamic leverage adjustment per instrument.</td></tr><tr><td>Margin mode</td><td>✓</td><td>Supports cash, isolated, cross, spot_isolated modes.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="margin-modes">Margin modes<a href="#margin-modes" class="hash-link" aria-label="Margin modes的直接链接" title="Margin modes的直接链接" translate="no">​</a></h3>
<p>OKX&#x27;s unified account system allows trading with different margin modes on a per-order basis. The adapter supports specifying the trade mode (<code>td_mode</code>) when submitting orders.</p>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p><strong>Important</strong>: Account modes must be initially configured via the OKX Web/App interface. The API cannot set the account mode for the first time.</p></div></div>
<p>For more details on OKX&#x27;s account modes and margin system, see the <a href="https://www.okx.com/docs-v5/en/#overview-account-mode" target="_blank" rel="noopener noreferrer">OKX Account Mode documentation</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="available-margin-modes">Available margin modes<a href="#available-margin-modes" class="hash-link" aria-label="Available margin modes的直接链接" title="Available margin modes的直接链接" translate="no">​</a></h4>
<ul>
<li><strong><code>cash</code></strong>: Spot trading without margin (default for spot trading).</li>
<li><strong><code>isolated</code></strong>: Isolated margin mode where risk is confined to specific positions.</li>
<li><strong><code>cross</code></strong>: Cross margin mode where all positions share the same margin pool.</li>
<li><strong><code>spot_isolated</code></strong>: Isolated margin for spot trading.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="setting-margin-mode-per-order">Setting margin mode per order<a href="#setting-margin-mode-per-order" class="hash-link" aria-label="Setting margin mode per order的直接链接" title="Setting margin mode per order的直接链接" translate="no">​</a></h4>
<p>You can specify the margin mode for individual orders using the <code>params</code> parameter:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Submit an order with isolated margin mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">submit_order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;td_mode&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;isolated&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Submit an order with cross margin mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">submit_order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;td_mode&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cross&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>If no <code>td_mode</code> is specified in params, the adapter will use the default mode configured for your account type:</p>
<ul>
<li>Cash accounts default to <code>cash</code> mode.</li>
<li>Margin accounts default to <code>isolated</code> mode.</li>
</ul>
<p>This flexibility allows you to:</p>
<ul>
<li>Run multiple strategies with different risk profiles simultaneously.</li>
<li>Isolate high-risk trades while using cross margin for capital-efficient positions.</li>
<li>Mix spot and margin trades within the same account.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="order-querying">Order querying<a href="#order-querying" class="hash-link" aria-label="Order querying的直接链接" title="Order querying的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Feature</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td>Query open orders</td><td>✓</td><td>List all active orders.</td></tr><tr><td>Query order history</td><td>✓</td><td>Historical order data.</td></tr><tr><td>Order status updates</td><td>✓</td><td>Real-time order state changes.</td></tr><tr><td>Trade history</td><td>✓</td><td>Execution and fill reports.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="contingent-orders">Contingent orders<a href="#contingent-orders" class="hash-link" aria-label="Contingent orders的直接链接" title="Contingent orders的直接链接" translate="no">​</a></h3>
<table><thead><tr><th>Feature</th><th>Linear Perpetual Swap</th><th>Notes</th></tr></thead><tbody><tr><td>Order lists</td><td>-</td><td><em>Not supported</em>.</td></tr><tr><td>OCO orders</td><td>✓</td><td>One-Cancels-Other orders.</td></tr><tr><td>Bracket orders</td><td>✓</td><td>Stop loss + take profit combinations.</td></tr><tr><td>Conditional orders</td><td>✓</td><td>Stop and limit-if-touched orders.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="conditional-order-architecture">Conditional order architecture<a href="#conditional-order-architecture" class="hash-link" aria-label="Conditional order architecture的直接链接" title="Conditional order architecture的直接链接" translate="no">​</a></h4>
<p>Conditional orders (OKX algo orders) use a hybrid architecture for optimal performance and reliability:</p>
<ul>
<li><strong>Submission</strong>: Via HTTP REST API (<code>/api/v5/trade/order-algo</code>)</li>
<li><strong>Status updates</strong>: Via WebSocket business endpoint (<code>/ws/v5/business</code>) on the <code>orders-algo</code> channel</li>
<li><strong>Cancellation</strong>: Via HTTP REST API using algo order ID tracking</li>
</ul>
<p>This design ensures:</p>
<ul>
<li>Immediate submission acknowledgment through HTTP.</li>
<li>Real-time status updates through WebSocket.</li>
<li>Proper order lifecycle management with algo order ID mapping.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="supported-conditional-order-types">Supported conditional order types<a href="#supported-conditional-order-types" class="hash-link" aria-label="Supported conditional order types的直接链接" title="Supported conditional order types的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Order Type</th><th>Trigger Types</th><th>Notes</th></tr></thead><tbody><tr><td><code>STOP_MARKET</code></td><td>Last, Mark, Index</td><td>Market execution when triggered.</td></tr><tr><td><code>STOP_LIMIT</code></td><td>Last, Mark, Index</td><td>Limit order placement when triggered.</td></tr><tr><td><code>MARKET_IF_TOUCHED</code></td><td>Last, Mark, Index</td><td>Market execution when price touched.</td></tr><tr><td><code>LIMIT_IF_TOUCHED</code></td><td>Last, Mark, Index</td><td>Limit order placement when price touched.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="trigger-price-types">Trigger price types<a href="#trigger-price-types" class="hash-link" aria-label="Trigger price types的直接链接" title="Trigger price types的直接链接" translate="no">​</a></h4>
<p>Conditional orders support different trigger price sources:</p>
<ul>
<li><strong>Last Price</strong> (<code>TriggerType.LAST_PRICE</code>): Uses the last traded price (default).</li>
<li><strong>Mark Price</strong> (<code>TriggerType.MARK_PRICE</code>): Uses the mark price (recommended for derivatives).</li>
<li><strong>Index Price</strong> (<code>TriggerType.INDEX_PRICE</code>): Uses the underlying index price.</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Example: Stop loss using mark price trigger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop_order </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop_market</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SELL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0.1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;45000.0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MARK_PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use mark price for trigger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">submit_order</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop_order</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Authentication的直接链接" title="Authentication的直接链接" translate="no">​</a></h2>
<p>To use the OKX adapter, you&#x27;ll need to create API credentials in your OKX account:</p>
<ol>
<li>Log into your OKX account and navigate to the API management page.</li>
<li>Create a new API key with the required permissions for trading and data access.</li>
<li>Note down your API key, secret key, and passphrase.</li>
</ol>
<p>You can provide these credentials through environment variables:</p>
<div class="language-bash codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-bash codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">export OKX_API_KEY=&quot;your_api_key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export OKX_API_SECRET=&quot;your_api_secret&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export OKX_API_PASSPHRASE=&quot;your_passphrase&quot;</span><br></span></code></pre></div></div>
<p>Or pass them directly in the configuration (not recommended for production).</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="demo-trading">Demo trading<a href="#demo-trading" class="hash-link" aria-label="Demo trading的直接链接" title="Demo trading的直接链接" translate="no">​</a></h2>
<p>OKX provides a demo trading environment for testing strategies without real funds. To use demo mode, set <code>is_demo=True</code> in your client configuration:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNodeConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OKX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OKXDataClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            is_demo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Enable demo mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># ... other config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OKX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OKXExecClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            is_demo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Enable demo mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># ... other config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>When demo mode is enabled:</p>
<ul>
<li>REST API requests include the <code>x-simulated-trading: 1</code> header.</li>
<li>WebSocket connections use demo endpoints (<code>wspap.okx.com</code>).</li>
<li>The same API credentials are used as production.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>You must use API keys created specifically for demo trading. Production API keys will not work in demo mode.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="rate-limiting">Rate limiting<a href="#rate-limiting" class="hash-link" aria-label="Rate limiting的直接链接" title="Rate limiting的直接链接" translate="no">​</a></h2>
<p>The adapter enforces OKX’s per-endpoint quotas while keeping sensible defaults for both REST and WebSocket calls.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="rest-limits">REST limits<a href="#rest-limits" class="hash-link" aria-label="REST limits的直接链接" title="REST limits的直接链接" translate="no">​</a></h3>
<ul>
<li>Global cap: 250 requests per second (matches 500 requests / 2 seconds IP allowance).</li>
<li>Endpoint-specific quotas appear in the table below and mirror OKX’s published limits where available.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="websocket-limits">WebSocket limits<a href="#websocket-limits" class="hash-link" aria-label="WebSocket limits的直接链接" title="WebSocket limits的直接链接" translate="no">​</a></h3>
<ul>
<li>Subscription operations: 3 requests per second.</li>
<li>Order actions (place/cancel/amend): 250 requests per second.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>OKX enforces per-endpoint and per-account quotas; exceeding them leads to HTTP 429 responses and temporary throttling on that key.</p></div></div>
<table><thead><tr><th>Key / Endpoint</th><th>Limit (req/sec)</th><th>Notes</th></tr></thead><tbody><tr><td><code>okx:global</code></td><td>250</td><td>Matches 500 req / 2 s IP allowance.</td></tr><tr><td><code>/api/v5/public/instruments</code></td><td>10</td><td>Matches OKX 20 req / 2 s docs.</td></tr><tr><td><code>/api/v5/market/candles</code></td><td>50</td><td>Higher allowance for streaming candles.</td></tr><tr><td><code>/api/v5/market/history-candles</code></td><td>20</td><td>Conservative quota for large historical pulls.</td></tr><tr><td><code>/api/v5/market/history-trades</code></td><td>30</td><td>Trade history pulls.</td></tr><tr><td><code>/api/v5/account/balance</code></td><td>5</td><td>OKX guidance: 10 req / 2 s.</td></tr><tr><td><code>/api/v5/trade/order</code></td><td>30</td><td>60 requests / 2 seconds per-instrument limit.</td></tr><tr><td><code>/api/v5/trade/orders-pending</code></td><td>20</td><td>Open order fetch.</td></tr><tr><td><code>/api/v5/trade/orders-history</code></td><td>20</td><td>Historical orders.</td></tr><tr><td><code>/api/v5/trade/fills</code></td><td>30</td><td>Execution reports.</td></tr><tr><td><code>/api/v5/trade/order-algo</code></td><td>10</td><td>Algo placements (conditional orders).</td></tr><tr><td><code>/api/v5/trade/cancel-algos</code></td><td>10</td><td>Algo cancellation.</td></tr></tbody></table>
<p>All keys automatically include the <code>okx:global</code> bucket. URLs are normalised (query strings removed) before rate limiting, so requests with different filters share the same quota.</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>For more details on rate limiting, see the official documentation: <a href="https://www.okx.com/docs-v5/en/#rest-api-rate-limit" target="_blank" rel="noopener noreferrer">https://www.okx.com/docs-v5/en/#rest-api-rate-limit</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Configuration的直接链接" title="Configuration的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="configuration-options">Configuration options<a href="#configuration-options" class="hash-link" aria-label="Configuration options的直接链接" title="Configuration options的直接链接" translate="no">​</a></h3>
<p>The OKX data client provides the following configuration options:</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="data-client">Data client<a href="#data-client" class="hash-link" aria-label="Data client的直接链接" title="Data client的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>instrument_types</code></td><td><code>(OKXInstrumentType.SPOT,)</code></td><td>Controls which OKX instrument families are loaded (spot, swap, futures, options).</td></tr><tr><td><code>contract_types</code></td><td><code>None</code></td><td>Restricts loading to specific contract styles when combined with <code>instrument_types</code>.</td></tr><tr><td><code>base_url_http</code></td><td><code>None</code></td><td>Override for the OKX REST endpoint; defaults to the production URL resolved at runtime.</td></tr><tr><td><code>base_url_ws</code></td><td><code>None</code></td><td>Override for the market data WebSocket endpoint.</td></tr><tr><td><code>api_key</code> / <code>api_secret</code> / <code>api_passphrase</code></td><td><code>None</code></td><td>When omitted, pulled from the <code>OKX_API_KEY</code>, <code>OKX_API_SECRET</code>, and <code>OKX_PASSPHRASE</code> environment variables.</td></tr><tr><td><code>is_demo</code></td><td><code>False</code></td><td>Connects to the OKX demo environment when <code>True</code>.</td></tr><tr><td><code>http_timeout_secs</code></td><td><code>60</code></td><td>Request timeout (seconds) for REST market data calls.</td></tr><tr><td><code>update_instruments_interval_mins</code></td><td><code>60</code></td><td>Interval, in minutes, between background instrument refreshes.</td></tr><tr><td><code>vip_level</code></td><td><code>None</code></td><td>Enables higher-depth order book channels when set to the matching OKX VIP tier.</td></tr></tbody></table>
<p>The OKX execution client provides the following configuration options:</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="execution-client">Execution client<a href="#execution-client" class="hash-link" aria-label="Execution client的直接链接" title="Execution client的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>instrument_types</code></td><td><code>(OKXInstrumentType.SPOT,)</code></td><td>Instrument families that should be tradable for this client.</td></tr><tr><td><code>contract_types</code></td><td><code>None</code></td><td>Restricts tradable contracts (linear, inverse, options) when paired with <code>instrument_types</code>.</td></tr><tr><td><code>base_url_http</code></td><td><code>None</code></td><td>Override for the OKX trading REST endpoint.</td></tr><tr><td><code>base_url_ws</code></td><td><code>None</code></td><td>Override for the private WebSocket endpoint.</td></tr><tr><td><code>api_key</code> / <code>api_secret</code> / <code>api_passphrase</code></td><td><code>None</code></td><td>Fall back to <code>OKX_API_KEY</code>, <code>OKX_API_SECRET</code>, and <code>OKX_PASSPHRASE</code> environment variables when unset.</td></tr><tr><td><code>margin_mode</code></td><td><code>None</code></td><td>Forces the OKX account margin mode (cross or isolated) when specified.</td></tr><tr><td><code>is_demo</code></td><td><code>False</code></td><td>Connects to the OKX demo trading environment.</td></tr><tr><td><code>http_timeout_secs</code></td><td><code>60</code></td><td>Request timeout (seconds) for REST trading calls.</td></tr><tr><td><code>use_fills_channel</code></td><td><code>False</code></td><td>Subscribes to the dedicated fills channel (VIP5+ required) for lower-latency fill reports.</td></tr><tr><td><code>use_mm_mass_cancel</code></td><td><code>False</code></td><td>Uses the market-maker bulk cancel endpoint when available; otherwise falls back to per-order cancels.</td></tr><tr><td><code>max_retries</code></td><td><code>3</code></td><td>Maximum retry attempts for recoverable REST errors.</td></tr><tr><td><code>retry_delay_initial_ms</code></td><td><code>1,000</code></td><td>Initial delay (milliseconds) applied before retrying a failed request.</td></tr><tr><td><code>retry_delay_max_ms</code></td><td><code>10,000</code></td><td>Upper bound for the exponential backoff delay between retries.</td></tr></tbody></table>
<p>Below is an example configuration for a live trading node using OKX data and execution clients:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">okx </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OKX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">okx </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OKXDataClientConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OKXExecClientConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">okx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">factories </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OKXLiveDataClientFactory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OKXLiveExecClientFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentProviderConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LiveExecEngineConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LoggingConfig</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TradingNodeConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nautilus_pyo3 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OKXContractType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nautilus_pyo3 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OKXInstrumentType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">live</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TradingNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNodeConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OKX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OKXDataClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_key</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Will use OKX_API_KEY env var</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_secret</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Will use OKX_API_SECRET env var</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_passphrase</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Will use OKX_API_PASSPHRASE env var</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            base_url_http</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instrument_provider</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentProviderConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">load_all</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instrument_types</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKXInstrumentType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SWAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            contract_types</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKXContractType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LINEAR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            is_demo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        OKX</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> OKXExecClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_key</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_secret</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            api_passphrase</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            base_url_http</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            base_url_ws</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instrument_provider</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentProviderConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">load_all</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instrument_types</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKXInstrumentType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SWAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            contract_types</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKXContractType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LINEAR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            is_demo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_data_client_factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OKXLiveDataClientFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_exec_client_factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">OKX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OKXLiveExecClientFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>For additional features or to contribute to the OKX adapter, please see our
<a href="https://github.com/nautechsystems/nautilus_trader/blob/develop/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">contributing guide</a>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/integrations/okx.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_F7ru" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_GNoA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/integrations/ib"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Interactive Brokers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/integrations/polymarket"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Polymarket</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pg_n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#product-support" class="table-of-contents__link toc-highlight">Product support</a></li></ul></li><li><a href="#symbology" class="table-of-contents__link toc-highlight">Symbology</a><ul><li><a href="#symbol-format-by-instrument-type" class="table-of-contents__link toc-highlight">Symbol format by instrument type</a></li><li><a href="#common-questions" class="table-of-contents__link toc-highlight">Common questions</a></li></ul></li><li><a href="#orders-capability" class="table-of-contents__link toc-highlight">Orders capability</a><ul><li><a href="#client-order-id-requirements" class="table-of-contents__link toc-highlight">Client order ID requirements</a></li><li><a href="#order-types" class="table-of-contents__link toc-highlight">Order types</a></li><li><a href="#execution-instructions" class="table-of-contents__link toc-highlight">Execution instructions</a></li><li><a href="#time-in-force" class="table-of-contents__link toc-highlight">Time in force</a></li><li><a href="#batch-operations" class="table-of-contents__link toc-highlight">Batch operations</a></li><li><a href="#position-management" class="table-of-contents__link toc-highlight">Position management</a></li><li><a href="#margin-modes" class="table-of-contents__link toc-highlight">Margin modes</a></li><li><a href="#order-querying" class="table-of-contents__link toc-highlight">Order querying</a></li><li><a href="#contingent-orders" class="table-of-contents__link toc-highlight">Contingent orders</a></li></ul></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#demo-trading" class="table-of-contents__link toc-highlight">Demo trading</a></li><li><a href="#rate-limiting" class="table-of-contents__link toc-highlight">Rate limiting</a><ul><li><a href="#rest-limits" class="table-of-contents__link toc-highlight">REST limits</a></li><li><a href="#websocket-limits" class="table-of-contents__link toc-highlight">WebSocket limits</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration options</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 NautilusTrader Documentation.</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-integrations/databento" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Databento | NautilusTrader 文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nautilus.aloen.to/integrations/databento"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Databento | NautilusTrader 文档"><meta data-rh="true" name="description" content="NautilusTrader provides an adapter for integrating with the Databento API and Databento Binary Encoding (DBN) format data."><meta data-rh="true" property="og:description" content="NautilusTrader provides an adapter for integrating with the Databento API and Databento Binary Encoding (DBN) format data."><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://nautilus.aloen.to/integrations/databento"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/integrations/databento" hreflang="zh"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/integrations/databento" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Integrations","item":"https://nautilus.aloen.to/integrations/"},{"@type":"ListItem","position":2,"name":"Databento","item":"https://nautilus.aloen.to/integrations/databento"}]}</script><link rel="stylesheet" href="/assets/css/styles.33db920f.css">
<script src="/assets/js/runtime~main.eefcc7db.js" defer="defer"></script>
<script src="/assets/js/main.3352860b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent__uWo" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--light_cjoX"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--dark_jZId"></div><b class="navbar__title text--truncate">NautilusTrader</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/api_reference/">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Aloento/NautilusTraderDoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_RWFU colorModeToggle_sA1q"><button class="clean-btn toggleButton_qjfc toggleButtonDisabled_cpNp" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX lightToggleIcon_UYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX darkToggleIcon_i1s2"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX systemToggleIcon_yIQx"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_PsjF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_jk42"><div class="docsWrapper_KWBO"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_XpKL" type="button"></button><div class="docRoot_joIP"><aside class="theme-doc-sidebar-container docSidebarContainer_DOen"><div class="sidebarViewport_j7YP"><div class="sidebar_nPgc"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_MTDt"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/api_reference/"><span title="Python API" class="categoryLinkLabel_XKxb">Python API</span></a><button aria-label="展开侧边栏分类 &#x27;Python API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/concepts/"><span title="Concepts" class="categoryLinkLabel_XKxb">Concepts</span></a><button aria-label="展开侧边栏分类 &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/developer_guide/"><span title="Developer Guide" class="categoryLinkLabel_XKxb">Developer Guide</span></a><button aria-label="展开侧边栏分类 &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/getting_started/"><span title="入门" class="categoryLinkLabel_XKxb">入门</span></a><button aria-label="展开侧边栏分类 &#x27;入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist menu__link--active" href="/integrations/"><span title="Integrations" class="categoryLinkLabel_XKxb">Integrations</span></a><button aria-label="折叠侧边栏分类 &#x27;Integrations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/betfair"><span title="Betfair" class="linkLabel_CNtA">Betfair</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/binance"><span title="Binance" class="linkLabel_CNtA">Binance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/bitmex"><span title="BitMEX" class="linkLabel_CNtA">BitMEX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/blockchain"><span title="Blockchain" class="linkLabel_CNtA">Blockchain</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/bybit"><span title="Bybit" class="linkLabel_CNtA">Bybit</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/coinbase_intx"><span title="Coinbase International" class="linkLabel_CNtA">Coinbase International</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/integrations/databento"><span title="Databento" class="linkLabel_CNtA">Databento</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/dydx"><span title="dYdX" class="linkLabel_CNtA">dYdX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/hyperliquid"><span title="Hyperliquid" class="linkLabel_CNtA">Hyperliquid</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/ib"><span title="Interactive Brokers" class="linkLabel_CNtA">Interactive Brokers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/okx"><span title="OKX" class="linkLabel_CNtA">OKX</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/polymarket"><span title="Polymarket" class="linkLabel_CNtA">Polymarket</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/integrations/tardis"><span title="Tardis" class="linkLabel_CNtA">Tardis</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/tutorials/"><span title="教程" class="categoryLinkLabel_XKxb">教程</span></a><button aria-label="展开侧边栏分类 &#x27;教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_bw1l"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PIhC"><div class="docItemContainer_pFw3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HRKZ" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sX5c"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/integrations/"><span>Integrations</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Databento</span></li></ul></nav><div class="tocCollapsible_DhUt theme-doc-toc-mobile tocMobile_Izjv"><button type="button" class="clean-btn tocCollapsibleButton_eYR5">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Databento</h1></header>
<p>NautilusTrader provides an adapter for integrating with the Databento API and <a href="https://databento.com/docs/standards-and-conventions/databento-binary-encoding" target="_blank" rel="noopener noreferrer">Databento Binary Encoding (DBN)</a> format data.
As Databento is purely a market data provider, there is no execution client provided - although a sandbox environment with simulated execution could still be set up.
It&#x27;s also possible to match Databento data with Interactive Brokers execution, or to calculate traditional asset class signals for crypto trading.</p>
<p>The capabilities of this adapter include:</p>
<ul>
<li>Loading historical data from DBN files and decoding into Nautilus objects for backtesting or writing to the data catalog.</li>
<li>Requesting historical data which is decoded to Nautilus objects to support live trading and backtesting.</li>
<li>Subscribing to real-time data feeds which are decoded to Nautilus objects to support live trading and sandbox environments.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p><a href="https://databento.com/signup" target="_blank" rel="noopener noreferrer">Databento</a> currently offers 125 USD in free data credits (historical data only) for new account sign-ups.</p><p>With careful requests, this is more than enough for testing and evaluation purposes.
We recommend you make use of the <a href="https://databento.com/docs/api-reference-historical/metadata/metadata-get-cost" target="_blank" rel="noopener noreferrer">/metadata.get_cost</a> endpoint.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Overview的直接链接" title="Overview的直接链接" translate="no">​</a></h2>
<p>The adapter implementation takes the <a href="https://crates.io/crates/databento" target="_blank" rel="noopener noreferrer">databento-rs</a> crate as a dependency,
which is the official Rust client library provided by Databento.</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>There is <strong>no</strong> need for an optional extra installation of <code>databento</code>, as the core components of the
adapter are compiled as static libraries and linked automatically during the build process.</p></div></div>
<p>The following adapter classes are available:</p>
<ul>
<li><code>DatabentoDataLoader</code>: Loads Databento Binary Encoding (DBN) data from files.</li>
<li><code>DatabentoInstrumentProvider</code>: Integrates with the Databento API (HTTP) to provide latest or historical instrument definitions.</li>
<li><code>DatabentoHistoricalClient</code>: Integrates with the Databento API (HTTP) for historical market data requests.</li>
<li><code>DatabentoLiveClient</code>: Integrates with the Databento API (raw TCP) for subscribing to real-time data feeds.</li>
<li><code>DatabentoDataClient</code>: Provides a <code>LiveMarketDataClient</code> implementation for running a trading node in real time.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>As with the other integration adapters, most users will simply define a configuration for a live trading node (covered below),
and won&#x27;t need to necessarily work with these lower level components directly.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Examples的直接链接" title="Examples的直接链接" translate="no">​</a></h2>
<p>You can find live example scripts <a href="https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/databento/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="databento-documentation">Databento documentation<a href="#databento-documentation" class="hash-link" aria-label="Databento documentation的直接链接" title="Databento documentation的直接链接" translate="no">​</a></h2>
<p>Databento provides extensive documentation for new users which can be found in the <a href="https://databento.com/docs/quickstart/new-user-guides" target="_blank" rel="noopener noreferrer">Databento new users guide</a>.
We recommend also referring to the Databento documentation in conjunction with this NautilusTrader integration guide.</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="databento-binary-encoding-dbn">Databento Binary Encoding (DBN)<a href="#databento-binary-encoding-dbn" class="hash-link" aria-label="Databento Binary Encoding (DBN)的直接链接" title="Databento Binary Encoding (DBN)的直接链接" translate="no">​</a></h2>
<p>Databento Binary Encoding (DBN) is an extremely fast message encoding and storage format for normalized market data.
The <a href="https://databento.com/docs/standards-and-conventions/databento-binary-encoding" target="_blank" rel="noopener noreferrer">DBN specification</a> includes a simple, self-describing metadata header and a fixed set of struct definitions,
which enforce a standardized way to normalize market data.</p>
<p>The integration provides a decoder which can convert DBN format data to Nautilus objects.</p>
<p>The same Rust implemented Nautilus decoder is used for:</p>
<ul>
<li>Loading and decoding DBN files from disk.</li>
<li>Decoding historical and live data in real time.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="supported-schemas">Supported schemas<a href="#supported-schemas" class="hash-link" aria-label="Supported schemas的直接链接" title="Supported schemas的直接链接" translate="no">​</a></h2>
<p>The following Databento schemas are supported by NautilusTrader:</p>
<table><thead><tr><th style="text-align:left">Databento schema</th><th style="text-align:left">Nautilus data type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/mbo" target="_blank" rel="noopener noreferrer">MBO</a></td><td style="text-align:left"><code>OrderBookDelta</code></td><td style="text-align:left">Market by order (L3).</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/mbp-1" target="_blank" rel="noopener noreferrer">MBP_1</a></td><td style="text-align:left"><code>(QuoteTick, TradeTick | None)</code></td><td style="text-align:left">Market by price (L1).</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/mbp-10" target="_blank" rel="noopener noreferrer">MBP_10</a></td><td style="text-align:left"><code>OrderBookDepth10</code></td><td style="text-align:left">Market depth (L2).</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/bbo-1s" target="_blank" rel="noopener noreferrer">BBO_1S</a></td><td style="text-align:left"><code>QuoteTick</code></td><td style="text-align:left">1-second best bid/offer.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/bbo-1m" target="_blank" rel="noopener noreferrer">BBO_1M</a></td><td style="text-align:left"><code>QuoteTick</code></td><td style="text-align:left">1-minute best bid/offer.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/cmbp-1" target="_blank" rel="noopener noreferrer">CMBP_1</a></td><td style="text-align:left"><code>(QuoteTick, TradeTick | None)</code></td><td style="text-align:left">Consolidated MBP across venues.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/cbbo-1s" target="_blank" rel="noopener noreferrer">CBBO_1S</a></td><td style="text-align:left"><code>QuoteTick</code></td><td style="text-align:left">Consolidated 1-second BBO.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/cbbo-1m" target="_blank" rel="noopener noreferrer">CBBO_1M</a></td><td style="text-align:left"><code>QuoteTick</code></td><td style="text-align:left">Consolidated 1-minute BBO.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/tcbbo" target="_blank" rel="noopener noreferrer">TCBBO</a></td><td style="text-align:left"><code>(QuoteTick, TradeTick)</code></td><td style="text-align:left">Trade-sampled consolidated BBO.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/tbbo" target="_blank" rel="noopener noreferrer">TBBO</a></td><td style="text-align:left"><code>(QuoteTick, TradeTick)</code></td><td style="text-align:left">Trade-sampled best bid/offer.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/trades" target="_blank" rel="noopener noreferrer">TRADES</a></td><td style="text-align:left"><code>TradeTick</code></td><td style="text-align:left">Trade ticks.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/ohlcv-1s" target="_blank" rel="noopener noreferrer">OHLCV_1S</a></td><td style="text-align:left"><code>Bar</code></td><td style="text-align:left">1-second bars.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/ohlcv-1m" target="_blank" rel="noopener noreferrer">OHLCV_1M</a></td><td style="text-align:left"><code>Bar</code></td><td style="text-align:left">1-minute bars.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/ohlcv-1h" target="_blank" rel="noopener noreferrer">OHLCV_1H</a></td><td style="text-align:left"><code>Bar</code></td><td style="text-align:left">1-hour bars.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/ohlcv-1d" target="_blank" rel="noopener noreferrer">OHLCV_1D</a></td><td style="text-align:left"><code>Bar</code></td><td style="text-align:left">Daily bars.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/ohlcv-eod" target="_blank" rel="noopener noreferrer">OHLCV_EOD</a></td><td style="text-align:left"><code>Bar</code></td><td style="text-align:left">End-of-day bars.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/definition" target="_blank" rel="noopener noreferrer">DEFINITION</a></td><td style="text-align:left"><code>Instrument</code> (various types)</td><td style="text-align:left">Instrument definitions.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/imbalance" target="_blank" rel="noopener noreferrer">IMBALANCE</a></td><td style="text-align:left"><code>DatabentoImbalance</code></td><td style="text-align:left">Auction imbalance data.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/statistics" target="_blank" rel="noopener noreferrer">STATISTICS</a></td><td style="text-align:left"><code>DatabentoStatistics</code></td><td style="text-align:left">Market statistics.</td></tr><tr><td style="text-align:left"><a href="https://databento.com/docs/schemas-and-data-formats/status" target="_blank" rel="noopener noreferrer">STATUS</a></td><td style="text-align:left"><code>InstrumentStatus</code></td><td style="text-align:left">Market status updates.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="schema-considerations">Schema considerations<a href="#schema-considerations" class="hash-link" aria-label="Schema considerations的直接链接" title="Schema considerations的直接链接" translate="no">​</a></h3>
<ul>
<li><strong>TBBO and TCBBO</strong>: Trade-sampled feeds that pair every trade with the BBO immediately <em>before</em> the trade&#x27;s effect (TBBO per-venue, TCBBO consolidated across venues). Use when you need trades aligned with contemporaneous quotes without managing two streams.</li>
<li><strong>MBP-1 and CMBP-1 (L1)</strong>: Event-level updates; emit trades only on trade events. Choose for a complete top-of-book event tape. For quote+trade alignment, prefer TBBO/TCBBO; otherwise, use TRADES.</li>
<li><strong>MBP-10 (L2)</strong>: Top 10 levels with trades. Good for depth-aware strategies that don&#x27;t need per-order detail; lighter than MBO with much of the structure you need including number of orders per level.</li>
<li><strong>MBO (L3)</strong>: Per-order events enable queue position modeling and exact book reconstruction. Highest volume/cost; start at node initialization to ensure proper replay context.</li>
<li><strong>BBO_1S/BBO_1M and CBBO_1S/CBBO_1M</strong>: Sampled top-of-book quotes at fixed intervals (1s/1m), no trades. Best for monitoring/spreads/low-cost signal generation; not suited for fine-grained microstructure.</li>
<li><strong>TRADES</strong>: Trades only. Pair with MBP-1 (<code>include_trades=True</code>) or use TBBO/TCBBO if you need quote context aligned with trades.</li>
<li><strong>OHLCV_ (incl. OHLCV_EOD)</strong>: Aggregated bars derived from trades. Prefer for higher-timeframe analytics/backtests; ensure bar timestamps represent close time (set <code>bars_timestamp_on_close=True</code>).</li>
<li><strong>Imbalance / Statistics / Status</strong>: Venue operational data; subscribe via <code>subscribe_data</code> with a <code>DataType</code> carrying <code>instrument_id</code> metadata.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p><strong>Consolidated schemas</strong> (CMBP_1, CBBO_1S, CBBO_1M, TCBBO) aggregate data across multiple venues,
providing a unified view of the market. These are particularly useful for cross-venue analysis and
when you need a comprehensive market picture.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>See also the Databento <a href="https://databento.com/docs/schemas-and-data-formats" target="_blank" rel="noopener noreferrer">Schemas and data formats</a> guide.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="schema-selection-for-live-subscriptions">Schema selection for live subscriptions<a href="#schema-selection-for-live-subscriptions" class="hash-link" aria-label="Schema selection for live subscriptions的直接链接" title="Schema selection for live subscriptions的直接链接" translate="no">​</a></h2>
<p>The following table shows how Nautilus subscription methods map to Databento schemas:</p>
<table><thead><tr><th style="text-align:left">Nautilus Subscription Method</th><th style="text-align:left">Default Schema</th><th style="text-align:left">Available Databento Schemas</th><th style="text-align:left">Nautilus Data Type</th></tr></thead><tbody><tr><td style="text-align:left"><code>subscribe_quote_ticks()</code></td><td style="text-align:left"><code>mbp-1</code></td><td style="text-align:left"><code>mbp-1</code>, <code>bbo-1s</code>, <code>bbo-1m</code>, <code>cmbp-1</code>, <code>cbbo-1s</code>, <code>cbbo-1m</code>, <code>tbbo</code>, <code>tcbbo</code></td><td style="text-align:left"><code>QuoteTick</code></td></tr><tr><td style="text-align:left"><code>subscribe_trade_ticks()</code></td><td style="text-align:left"><code>trades</code></td><td style="text-align:left"><code>trades</code>, <code>tbbo</code>, <code>tcbbo</code>, <code>mbp-1</code>, <code>cmbp-1</code></td><td style="text-align:left"><code>TradeTick</code></td></tr><tr><td style="text-align:left"><code>subscribe_order_book_depth()</code></td><td style="text-align:left"><code>mbp-10</code></td><td style="text-align:left"><code>mbp-10</code></td><td style="text-align:left"><code>OrderBookDepth10</code></td></tr><tr><td style="text-align:left"><code>subscribe_order_book_deltas()</code></td><td style="text-align:left"><code>mbo</code></td><td style="text-align:left"><code>mbo</code></td><td style="text-align:left"><code>OrderBookDeltas</code></td></tr><tr><td style="text-align:left"><code>subscribe_bars()</code></td><td style="text-align:left">varies</td><td style="text-align:left"><code>ohlcv-1s</code>, <code>ohlcv-1m</code>, <code>ohlcv-1h</code>, <code>ohlcv-1d</code></td><td style="text-align:left"><code>Bar</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>The examples below assume you&#x27;re within a <code>Strategy</code> or <code>Actor</code> class context where <code>self</code> has access to subscription methods.
Remember to import the necessary types:</p><div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DATABENTO_CLIENT_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BarType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BookType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">identifiers </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span></code></pre></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="quote-subscriptions-mbp--l1">Quote subscriptions (MBP / L1)<a href="#quote-subscriptions-mbp--l1" class="hash-link" aria-label="Quote subscriptions (MBP / L1)的直接链接" title="Quote subscriptions (MBP / L1)的直接链接" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Default MBP-1 quotes (may include trades)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_quote_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Explicit MBP-1 schema</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_quote_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mbp-1&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 1-second BBO snapshots (quotes only, no trades)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_quote_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bbo-1s&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Consolidated quotes across venues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_quote_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cbbo-1s&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># or &quot;cmbp-1&quot; for consolidated MBP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Trade-sampled BBO (includes both quotes AND trades)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_quote_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tbbo&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Will receive both QuoteTick and TradeTick onto the message bus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="trade-subscriptions">Trade subscriptions<a href="#trade-subscriptions" class="hash-link" aria-label="Trade subscriptions的直接链接" title="Trade subscriptions的直接链接" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Trade ticks only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_trade_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Trades from MBP-1 feed (only when trade events occur)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_trade_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mbp-1&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Trade-sampled data (includes quotes at trade time)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_trade_ticks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tbbo&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Also provides quotes at trade events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="order-book-depth-subscriptions-mbp--l2">Order book depth subscriptions (MBP / L2)<a href="#order-book-depth-subscriptions-mbp--l2" class="hash-link" aria-label="Order book depth subscriptions (MBP / L2)的直接链接" title="Order book depth subscriptions (MBP / L2)的直接链接" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to top 10 levels of market depth</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_order_book_depth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># MBP-10 schema is automatically selected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The depth parameter must be 10 for Databento</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This will receive OrderBookDepth10 updates</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="order-book-deltas-subscriptions-mbo--l3">Order book deltas subscriptions (MBO / L3)<a href="#order-book-deltas-subscriptions-mbo--l3" class="hash-link" aria-label="Order book deltas subscriptions (MBO / L3)的直接链接" title="Order book deltas subscriptions (MBO / L3)的直接链接" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to full order book updates (market by order)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_order_book_deltas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    book_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BookType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">L3_MBO  </span><span class="token comment" style="color:#999988;font-style:italic"># Uses MBO schema</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Note: MBO subscriptions must be made at node startup for Databento</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># to ensure proper replay from session start</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="bar-subscriptions">Bar subscriptions<a href="#bar-subscriptions" class="hash-link" aria-label="Bar subscriptions的直接链接" title="Bar subscriptions的直接链接" translate="no">​</a></h3>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to 1-minute bars (automatically uses ohlcv-1m schema)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_bars</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BarType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">instrument_id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-1-MINUTE-LAST-EXTERNAL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to 1-second bars (automatically uses ohlcv-1s schema)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_bars</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BarType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">instrument_id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-1-SECOND-LAST-EXTERNAL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to hourly bars (automatically uses ohlcv-1h schema)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_bars</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BarType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">instrument_id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-1-HOUR-LAST-EXTERNAL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to daily bars (automatically uses ohlcv-1d schema)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_bars</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BarType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">instrument_id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-1-DAY-LAST-EXTERNAL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to daily bars with end-of-day schema (only valid for DAY aggregation)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_bars</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BarType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">instrument_id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-1-DAY-LAST-EXTERNAL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;schema&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ohlcv-eod&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Override to use end-of-day bars</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="custom-data-type-subscriptions">Custom data type subscriptions<a href="#custom-data-type-subscriptions" class="hash-link" aria-label="Custom data type subscriptions的直接链接" title="Custom data type subscriptions的直接链接" translate="no">​</a></h3>
<p>For specialized Databento data types like imbalance and statistics, use the generic <code>subscribe_data</code> method:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DATABENTO_CLIENT_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabentoImbalance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabentoStatistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DataType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to imbalance data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DataType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DatabentoImbalance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instrument_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to statistics data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DataType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DatabentoStatistics</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instrument_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Subscribe to instrument status updates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentStatus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DataType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">InstrumentStatus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instrument_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="instrument-ids-and-symbology">Instrument IDs and symbology<a href="#instrument-ids-and-symbology" class="hash-link" aria-label="Instrument IDs and symbology的直接链接" title="Instrument IDs and symbology的直接链接" translate="no">​</a></h2>
<p>Databento market data includes an <code>instrument_id</code> field which is an integer assigned
by either the original source venue, or internally by Databento during normalization.</p>
<p>It&#x27;s important to realize that this is different to the Nautilus <code>InstrumentId</code>
which is a string made up of a symbol + venue with a period separator i.e. <code>&quot;{symbol}.{venue}&quot;</code>.</p>
<p>The Nautilus decoder will use the Databento <code>raw_symbol</code> for the Nautilus <code>symbol</code> and an <a href="https://www.iso20022.org/market-identifier-codes" target="_blank" rel="noopener noreferrer">ISO 10383 MIC</a> (Market Identifier Code)
from the Databento instrument definition message for the Nautilus <code>venue</code>.</p>
<p>Databento datasets are identified with a <em>dataset ID</em> which is not the same
as a venue identifier. You can read more about Databento dataset naming conventions <a href="https://databento.com/docs/api-reference-historical/basics/datasets" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Of particular note is for CME Globex MDP 3.0 data (<code>GLBX.MDP3</code> dataset ID), the following
exchanges are all grouped under the <code>GLBX</code> venue. These mappings can be determined from the
instruments <code>exchange</code> field:</p>
<ul>
<li><code>CBCM</code>: XCME-XCBT inter-exchange spread</li>
<li><code>NYUM</code>: XNYM-DUMX inter-exchange spread</li>
<li><code>XCBT</code>: Chicago Board of Trade (CBOT)</li>
<li><code>XCEC</code>: Commodities Exchange Center (COMEX)</li>
<li><code>XCME</code>: Chicago Mercantile Exchange (CME)</li>
<li><code>XFXS</code>: CME FX Link spread</li>
<li><code>XNYM</code>: New York Mercantile Exchange (NYMEX)</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>Other venue MICs can be found in the <code>venue</code> field of responses from the <a href="https://databento.com/docs/api-reference-historical/metadata/metadata-list-publishers" target="_blank" rel="noopener noreferrer">metadata.list_publishers</a> endpoint.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="timestamps">Timestamps<a href="#timestamps" class="hash-link" aria-label="Timestamps的直接链接" title="Timestamps的直接链接" translate="no">​</a></h2>
<p>Databento data includes various timestamp fields including (but not limited to):</p>
<ul>
<li><code>ts_event</code>: The matching-engine-received timestamp expressed as the number of nanoseconds since the UNIX epoch.</li>
<li><code>ts_in_delta</code>: The matching-engine-sending timestamp expressed as the number of nanoseconds before <code>ts_recv</code>.</li>
<li><code>ts_recv</code>: The capture-server-received timestamp expressed as the number of nanoseconds since the UNIX epoch.</li>
<li><code>ts_out</code>: The Databento sending timestamp.</li>
</ul>
<p>Nautilus data includes at <em>least</em> two timestamps (required by the <code>Data</code> contract):</p>
<ul>
<li><code>ts_event</code>: UNIX timestamp (nanoseconds) when the data event occurred.</li>
<li><code>ts_init</code>: UNIX timestamp (nanoseconds) when the data instance was created.</li>
</ul>
<p>When decoding and normalizing Databento to Nautilus we generally assign the Databento <code>ts_recv</code> value to the Nautilus
<code>ts_event</code> field, as this timestamp is much more reliable and consistent, and is guaranteed to be monotonically increasing per instrument.
The exception to this are the <code>DatabentoImbalance</code> and <code>DatabentoStatistics</code> data types, which have fields for all timestamps as these types are defined specifically for the adapter.</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>See the following Databento docs for further information:</p><ul>
<li><a href="https://databento.com/docs/standards-and-conventions/common-fields-enums-types#timestamps" target="_blank" rel="noopener noreferrer">Databento standards and conventions - timestamps</a></li>
<li><a href="https://databento.com/docs/architecture/timestamping-guide" target="_blank" rel="noopener noreferrer">Databento timestamping guide</a></li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="data-types">Data types<a href="#data-types" class="hash-link" aria-label="Data types的直接链接" title="Data types的直接链接" translate="no">​</a></h2>
<p>The following section discusses Databento schema -&gt; Nautilus data type equivalence
and considerations.</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>See Databento <a href="https://databento.com/docs/schemas-and-data-formats" target="_blank" rel="noopener noreferrer">schemas and data formats</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="instrument-definitions">Instrument definitions<a href="#instrument-definitions" class="hash-link" aria-label="Instrument definitions的直接链接" title="Instrument definitions的直接链接" translate="no">​</a></h3>
<p>Databento provides a single schema to cover all instrument classes, these are
decoded to the appropriate Nautilus <code>Instrument</code> types.</p>
<p>The following Databento instrument classes are supported by NautilusTrader:</p>
<table><thead><tr><th>Databento instrument class</th><th>Code</th><th>Nautilus instrument type</th></tr></thead><tbody><tr><td>Stock</td><td><code>K</code></td><td><code>Equity</code></td></tr><tr><td>Future</td><td><code>F</code></td><td><code>FuturesContract</code></td></tr><tr><td>Call</td><td><code>C</code></td><td><code>OptionContract</code></td></tr><tr><td>Put</td><td><code>P</code></td><td><code>OptionContract</code></td></tr><tr><td>Future spread</td><td><code>S</code></td><td><code>FuturesSpread</code></td></tr><tr><td>Option spread</td><td><code>T</code></td><td><code>OptionSpread</code></td></tr><tr><td>Mixed spread</td><td><code>M</code></td><td><code>OptionSpread</code></td></tr><tr><td>FX spot</td><td><code>X</code></td><td><code>CurrencyPair</code></td></tr><tr><td>Bond</td><td><code>B</code></td><td>Not yet available</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="mbo-market-by-order">MBO (market by order)<a href="#mbo-market-by-order" class="hash-link" aria-label="MBO (market by order)的直接链接" title="MBO (market by order)的直接链接" translate="no">​</a></h3>
<p>This schema is the highest granularity data offered by Databento, and represents
full order book depth. Some messages also provide trade information, and so when
decoding MBO messages Nautilus will produce an <code>OrderBookDelta</code> and optionally a
<code>TradeTick</code>.</p>
<p>The Nautilus live data client will buffer MBO messages until an <code>F_LAST</code> flag
is seen. A discrete <code>OrderBookDeltas</code> container object will then be passed to the
registered handler.</p>
<p>Order book snapshots are also buffered into a discrete <code>OrderBookDeltas</code> container
object, which occurs during the replay startup sequence.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="mbp-1-market-by-price-top-of-book">MBP-1 (market by price, top-of-book)<a href="#mbp-1-market-by-price-top-of-book" class="hash-link" aria-label="MBP-1 (market by price, top-of-book)的直接链接" title="MBP-1 (market by price, top-of-book)的直接链接" translate="no">​</a></h3>
<p>This schema represents the top-of-book only (quotes <em>and</em> trades). Like with MBO messages, some
messages carry trade information, and so when decoding MBP-1 messages Nautilus
will produce a <code>QuoteTick</code> and <em>also</em> a <code>TradeTick</code> if the message is a trade.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="tbbo-and-tcbbo-top-of-book-with-trades">TBBO and TCBBO (top-of-book with trades)<a href="#tbbo-and-tcbbo-top-of-book-with-trades" class="hash-link" aria-label="TBBO and TCBBO (top-of-book with trades)的直接链接" title="TBBO and TCBBO (top-of-book with trades)的直接链接" translate="no">​</a></h3>
<p>The TBBO (Top Book with Trades) and TCBBO (Top Consolidated Book with Trades) schemas provide
both quote and trade data in each message. When subscribing to quotes using these schemas,
you&#x27;ll automatically receive both <code>QuoteTick</code> and <code>TradeTick</code> data, making them more efficient
than subscribing to quotes and trades separately. TCBBO provides consolidated data across venues.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="ohlcv-bar-aggregates">OHLCV (bar aggregates)<a href="#ohlcv-bar-aggregates" class="hash-link" aria-label="OHLCV (bar aggregates)的直接链接" title="OHLCV (bar aggregates)的直接链接" translate="no">​</a></h3>
<p>The Databento bar aggregation messages are timestamped at the <strong>open</strong> of the bar interval.
The Nautilus decoder will normalize the <code>ts_event</code> timestamps to the <strong>close</strong> of the bar
(original <code>ts_event</code> + bar interval).</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="imbalance--statistics">Imbalance &amp; Statistics<a href="#imbalance--statistics" class="hash-link" aria-label="Imbalance &amp; Statistics的直接链接" title="Imbalance &amp; Statistics的直接链接" translate="no">​</a></h3>
<p>The Databento <code>imbalance</code> and <code>statistics</code> schemas cannot be represented as a built-in Nautilus data types,
and so they have specific types defined in Rust <code>DatabentoImbalance</code> and <code>DatabentoStatistics</code>.
Python bindings are provided via PyO3 (Rust) so the types behave a little differently to built-in Nautilus
data types, where all attributes are PyO3 provided objects and not directly compatible
with certain methods which may expect a Cython provided type. There are PyO3 -&gt; legacy Cython
object conversion methods available, which can be found in the API reference.</p>
<p>Here is a general pattern for converting a PyO3 <code>Price</code> to a Cython <code>Price</code>:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">price </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_raw</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pyo3_price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">raw</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pyo3_price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">precision</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Additionally requesting for and subscribing to these data types requires the use of the
lower level generic methods for custom data types. The following example subscribes to the <code>imbalance</code>
schema for the <code>AAPL.XNAS</code> instrument (Apple Inc trading on the Nasdaq exchange):</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DATABENTO_CLIENT_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabentoImbalance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DataType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instrument_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AAPL.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DataType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DatabentoImbalance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instrument_id</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Or requesting the previous days <code>statistics</code> schema for the <code>ES.FUT</code> parent symbol (all active E-mini S&amp;P 500 futures contracts on the CME Globex exchange):</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DATABENTO_CLIENT_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabentoStatistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DataType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instrument_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ES.FUT.GLBX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;start&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-03-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">request_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DataType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DatabentoStatistics</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DATABENTO_CLIENT_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="performance-considerations">Performance considerations<a href="#performance-considerations" class="hash-link" aria-label="Performance considerations的直接链接" title="Performance considerations的直接链接" translate="no">​</a></h2>
<p>When backtesting with Databento DBN data, there are two options:</p>
<ul>
<li>Store the data in DBN (<code>.dbn.zst</code>) format files and decode to Nautilus objects on every run.</li>
<li>Convert the DBN files to Nautilus objects and then write to the data catalog once (stored as Nautilus Parquet format on disk).</li>
</ul>
<p>Whilst the DBN -&gt; Nautilus decoder is implemented in Rust and has been optimized,
the best performance for backtesting will be achieved by writing the Nautilus
objects to the data catalog, which performs the decoding step once.</p>
<p><a href="https://arrow.apache.org/datafusion/" target="_blank" rel="noopener noreferrer">DataFusion</a> provides a query engine backend to efficiently load and stream
the Nautilus Parquet data from disk, which achieves extremely high throughput (at least an order of magnitude faster
than converting DBN -&gt; Nautilus on the fly for every backtest run).</p>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>Performance benchmarks are currently under development.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="loading-dbn-data">Loading DBN data<a href="#loading-dbn-data" class="hash-link" aria-label="Loading DBN data的直接链接" title="Loading DBN data的直接链接" translate="no">​</a></h2>
<p>You can load DBN files and convert the records to Nautilus objects using the
<code>DatabentoDataLoader</code> class. There are two main purposes for doing so:</p>
<ul>
<li>Pass the converted data to <code>BacktestEngine.add_data</code> directly for backtesting.</li>
<li>Pass the converted data to <code>ParquetDataCatalog.write_data</code> for later streaming use with a <code>BacktestNode</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="dbn-data-to-a-backtestengine">DBN data to a BacktestEngine<a href="#dbn-data-to-a-backtestengine" class="hash-link" aria-label="DBN data to a BacktestEngine的直接链接" title="DBN data to a BacktestEngine的直接链接" translate="no">​</a></h3>
<p>This code snippet demonstrates how to load DBN data and pass to a <code>BacktestEngine</code>.
Since the <code>BacktestEngine</code> needs an instrument added, we&#x27;ll use a test instrument
provided by the <code>TestInstrumentProvider</code> (you could also pass an instrument object
which was parsed from a DBN file too).
The data is a month of TSLA (Tesla Inc) trades on the Nasdaq exchange:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Add instrument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TSLA_NASDAQ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TestInstrumentProvider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">equity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">symbol</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;TSLA&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">engine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_instrument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TSLA_NASDAQ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Decode data to legacy Cython objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DatabentoDataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trades </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TEST_DATA_DIR </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;databento&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temp&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tsla-xnas-20240107-20240206.trades.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TSLA_NASDAQ</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">engine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">trades</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="dbn-data-to-a-parquetdatacatalog">DBN data to a ParquetDataCatalog<a href="#dbn-data-to-a-parquetdatacatalog" class="hash-link" aria-label="DBN data to a ParquetDataCatalog的直接链接" title="DBN data to a ParquetDataCatalog的直接链接" translate="no">​</a></h3>
<p>This code snippet demonstrates how to load DBN data and write to a <code>ParquetDataCatalog</code>.
We pass a value of false for the <code>as_legacy_cython</code> flag, which will ensure the
DBN records are decoded as PyO3 (Rust) objects. It&#x27;s worth noting that legacy Cython
objects can also be passed to <code>write_data</code>, but these need to be converted back to
pyo3 objects under the hood (so passing PyO3 objects is an optimization).</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Initialize the catalog interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># (will use the `NAUTILUS_PATH` env var as the path)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catalog </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ParquetDataCatalog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instrument_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TSLA.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Decode data to pyo3 objects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DatabentoDataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trades </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TEST_DATA_DIR </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;databento&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temp&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tsla-xnas-20240107-20240206.trades.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">instrument_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_legacy_cython</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># This is an optimization for writing to the catalog</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Write data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">catalog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">trades</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>See also the <a href="/concepts/data">Data concepts guide</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="historical-loader-options">Historical loader options<a href="#historical-loader-options" class="hash-link" aria-label="Historical loader options的直接链接" title="Historical loader options的直接链接" translate="no">​</a></h3>
<p>The <code>from_dbn_file</code> method supports several important parameters:</p>
<ul>
<li><code>instrument_id</code>: Passing this improves decode speed by skipping symbology lookup.</li>
<li><code>price_precision</code>: Override the default price precision for the instrument.</li>
<li><code>include_trades</code>: For MBP-1/CMBP-1 schemas, setting this to <code>True</code> will emit both <code>QuoteTick</code> and <code>TradeTick</code> objects when trade data is present.</li>
<li><code>as_legacy_cython</code>: Set to <code>False</code> when loading IMBALANCE or STATISTICS schemas (required) or for performance when writing to catalog.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>IMBALANCE and STATISTICS schemas require <code>as_legacy_cython=False</code> as these are PyO3-only types. Setting <code>as_legacy_cython=True</code> will raise a <code>ValueError</code>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="loading-consolidated-data">Loading consolidated data<a href="#loading-consolidated-data" class="hash-link" aria-label="Loading consolidated data的直接链接" title="Loading consolidated data的直接链接" translate="no">​</a></h3>
<p>Consolidated schemas aggregate data across multiple venues:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Load consolidated MBP-1 quotes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DatabentoDataLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmbp_quotes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;consolidated.cmbp-1.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AAPL.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include_trades</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Get both quotes and trades if available</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_legacy_cython</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load consolidated BBO quotes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cbbo_quotes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;consolidated.cbbo-1s.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AAPL.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_legacy_cython</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use PyO3 for better performance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Load TCBBO (trade-sampled consolidated BBO) - provides both quotes and trades</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Note: include_trades=True loads quotes, include_trades=False loads trades</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcbbo_quotes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;consolidated.tcbbo.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AAPL.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include_trades</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Loads quotes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_legacy_cython</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcbbo_trades </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> loader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_dbn_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;consolidated.tcbbo.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AAPL.XNAS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    include_trades</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Loads trades</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    as_legacy_cython</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p><strong>Cost optimization</strong>: Avoid subscribing to both TBBO/TCBBO and separate trade subscriptions for the same instrument, as these schemas already include trade data. This prevents duplicates and reduces costs.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="real-time-client-architecture">Real-time client architecture<a href="#real-time-client-architecture" class="hash-link" aria-label="Real-time client architecture的直接链接" title="Real-time client architecture的直接链接" translate="no">​</a></h2>
<p>The <code>DatabentoDataClient</code> is a Python class which contains other Databento adapter classes.
There are two <code>DatabentoLiveClient</code>s per Databento dataset:</p>
<ul>
<li>One for MBO (order book deltas) real-time feeds</li>
<li>One for all other real-time feeds</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>There is currently a limitation that all MBO (order book deltas) subscriptions for a dataset have to be made at
node startup, to then be able to replay data from the beginning of the session. If subsequent subscriptions
arrive after start, then an error will be logged (and the subscription ignored).</p><p>There is no such limitation for any of the other Databento schemas.</p></div></div>
<p>A single <code>DatabentoHistoricalClient</code> instance is reused between the <code>DatabentoInstrumentProvider</code> and <code>DatabentoDataClient</code>,
which makes historical instrument definitions and data requests.</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Configuration的直接链接" title="Configuration的直接链接" translate="no">​</a></h2>
<p>The most common use case is to configure a live <code>TradingNode</code> to include a
Databento data client. To achieve this, add a <code>DATABENTO</code> section to your client
configuration(s):</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DATABENTO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">live</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TradingNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNodeConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Omitted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DATABENTO</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;api_key&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &#x27;DATABENTO_API_KEY&#x27; env var</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;http_gateway&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Override for the default HTTP historical gateway</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;live_gateway&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Override for the default raw TCP real-time gateway</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;instrument_provider&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InstrumentProviderConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">load_all</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;instrument_ids&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Nautilus instrument IDs to load on start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;parent_symbols&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Databento parent symbols to load on start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Omitted</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Then, create a <code>TradingNode</code> and add the client factory:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">adapters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">databento</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">factories </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabentoLiveDataClientFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">live</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">node </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TradingNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Instantiate the live trading node with a configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Register the client factory with the node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_data_client_factory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DATABENTO</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DatabentoLiveDataClientFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Finally build the node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="configuration-parameters">Configuration parameters<a href="#configuration-parameters" class="hash-link" aria-label="Configuration parameters的直接链接" title="Configuration parameters的直接链接" translate="no">​</a></h3>
<p>The Databento data client provides the following configuration options:</p>
<table><thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>api_key</code></td><td><code>None</code></td><td>Databento API secret. When <code>None</code>, falls back to the <code>DATABENTO_API_KEY</code> environment variable.</td></tr><tr><td><code>http_gateway</code></td><td><code>None</code></td><td>Historical HTTP gateway override, useful for testing custom endpoints.</td></tr><tr><td><code>live_gateway</code></td><td><code>None</code></td><td>Raw TCP real-time gateway override, typically only used for testing.</td></tr><tr><td><code>use_exchange_as_venue</code></td><td><code>True</code></td><td>If <code>True</code>, uses the exchange MIC for Nautilus venues (e.g., <code>XCME</code>). When <code>False</code>, retains the default GLBX mapping.</td></tr><tr><td><code>timeout_initial_load</code></td><td><code>15.0</code></td><td>Seconds to wait for instrument definitions to load per dataset before proceeding.</td></tr><tr><td><code>mbo_subscriptions_delay</code></td><td><code>3.0</code></td><td>Seconds to buffer before enabling MBO/L3 streams so initial snapshots can replay in order.</td></tr><tr><td><code>bars_timestamp_on_close</code></td><td><code>True</code></td><td>Timestamp bars on the close (<code>ts_event</code>/<code>ts_init</code>). Set <code>False</code> to timestamp on the open.</td></tr><tr><td><code>venue_dataset_map</code></td><td><code>None</code></td><td>Optional mapping of Nautilus venues to Databento dataset codes.</td></tr><tr><td><code>parent_symbols</code></td><td><code>None</code></td><td>Optional mapping <code>{dataset: {parent symbols}}</code> to preload definition trees (e.g., <code>{&quot;GLBX.MDP3&quot;: {&quot;ES.FUT&quot;, &quot;ES.OPT&quot;}}</code>).</td></tr><tr><td><code>instrument_ids</code></td><td><code>None</code></td><td>Sequence of Nautilus <code>InstrumentId</code> values to preload definitions for at startup.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p>We recommend using environment variables to manage your credentials.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>For additional features or to contribute to the Databento adapter, please see our
<a href="https://github.com/nautechsystems/nautilus_trader/blob/develop/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">contributing guide</a>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/integrations/databento.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_F7ru" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_GNoA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/integrations/coinbase_intx"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Coinbase International</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/integrations/dydx"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">dYdX</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pg_n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#databento-documentation" class="table-of-contents__link toc-highlight">Databento documentation</a></li><li><a href="#databento-binary-encoding-dbn" class="table-of-contents__link toc-highlight">Databento Binary Encoding (DBN)</a></li><li><a href="#supported-schemas" class="table-of-contents__link toc-highlight">Supported schemas</a><ul><li><a href="#schema-considerations" class="table-of-contents__link toc-highlight">Schema considerations</a></li></ul></li><li><a href="#schema-selection-for-live-subscriptions" class="table-of-contents__link toc-highlight">Schema selection for live subscriptions</a><ul><li><a href="#quote-subscriptions-mbp--l1" class="table-of-contents__link toc-highlight">Quote subscriptions (MBP / L1)</a></li><li><a href="#trade-subscriptions" class="table-of-contents__link toc-highlight">Trade subscriptions</a></li><li><a href="#order-book-depth-subscriptions-mbp--l2" class="table-of-contents__link toc-highlight">Order book depth subscriptions (MBP / L2)</a></li><li><a href="#order-book-deltas-subscriptions-mbo--l3" class="table-of-contents__link toc-highlight">Order book deltas subscriptions (MBO / L3)</a></li><li><a href="#bar-subscriptions" class="table-of-contents__link toc-highlight">Bar subscriptions</a></li><li><a href="#custom-data-type-subscriptions" class="table-of-contents__link toc-highlight">Custom data type subscriptions</a></li></ul></li><li><a href="#instrument-ids-and-symbology" class="table-of-contents__link toc-highlight">Instrument IDs and symbology</a></li><li><a href="#timestamps" class="table-of-contents__link toc-highlight">Timestamps</a></li><li><a href="#data-types" class="table-of-contents__link toc-highlight">Data types</a><ul><li><a href="#instrument-definitions" class="table-of-contents__link toc-highlight">Instrument definitions</a></li><li><a href="#mbo-market-by-order" class="table-of-contents__link toc-highlight">MBO (market by order)</a></li><li><a href="#mbp-1-market-by-price-top-of-book" class="table-of-contents__link toc-highlight">MBP-1 (market by price, top-of-book)</a></li><li><a href="#tbbo-and-tcbbo-top-of-book-with-trades" class="table-of-contents__link toc-highlight">TBBO and TCBBO (top-of-book with trades)</a></li><li><a href="#ohlcv-bar-aggregates" class="table-of-contents__link toc-highlight">OHLCV (bar aggregates)</a></li><li><a href="#imbalance--statistics" class="table-of-contents__link toc-highlight">Imbalance &amp; Statistics</a></li></ul></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance considerations</a></li><li><a href="#loading-dbn-data" class="table-of-contents__link toc-highlight">Loading DBN data</a><ul><li><a href="#dbn-data-to-a-backtestengine" class="table-of-contents__link toc-highlight">DBN data to a BacktestEngine</a></li><li><a href="#dbn-data-to-a-parquetdatacatalog" class="table-of-contents__link toc-highlight">DBN data to a ParquetDataCatalog</a></li><li><a href="#historical-loader-options" class="table-of-contents__link toc-highlight">Historical loader options</a></li><li><a href="#loading-consolidated-data" class="table-of-contents__link toc-highlight">Loading consolidated data</a></li></ul></li><li><a href="#real-time-client-architecture" class="table-of-contents__link toc-highlight">Real-time client architecture</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#configuration-parameters" class="table-of-contents__link toc-highlight">Configuration parameters</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 NautilusTrader Documentation.</div></div></div></footer></div>
</body>
</html>
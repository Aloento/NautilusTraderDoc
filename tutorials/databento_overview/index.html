<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/databento_overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Databento 概览 | NautilusTrader 文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nautilus.aloen.to/tutorials/databento_overview"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Databento 概览 | NautilusTrader 文档"><meta data-rh="true" name="description" content="Databento 官方文档："><meta data-rh="true" property="og:description" content="Databento 官方文档："><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://nautilus.aloen.to/tutorials/databento_overview"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/tutorials/databento_overview" hreflang="zh"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/tutorials/databento_overview" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"教程","item":"https://nautilus.aloen.to/tutorials/"},{"@type":"ListItem","position":2,"name":"Databento 概览","item":"https://nautilus.aloen.to/tutorials/databento_overview"}]}</script><link rel="stylesheet" href="/assets/css/styles.33db920f.css">
<script src="/assets/js/runtime~main.eefcc7db.js" defer="defer"></script>
<script src="/assets/js/main.3352860b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent__uWo" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--light_cjoX"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--dark_jZId"></div><b class="navbar__title text--truncate">NautilusTrader</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/api_reference/">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Aloento/NautilusTraderDoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_RWFU colorModeToggle_sA1q"><button class="clean-btn toggleButton_qjfc toggleButtonDisabled_cpNp" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX lightToggleIcon_UYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX darkToggleIcon_i1s2"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX systemToggleIcon_yIQx"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_PsjF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_jk42"><div class="docsWrapper_KWBO"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_XpKL" type="button"></button><div class="docRoot_joIP"><aside class="theme-doc-sidebar-container docSidebarContainer_DOen"><div class="sidebarViewport_j7YP"><div class="sidebar_nPgc"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_MTDt"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/api_reference/"><span title="Python API" class="categoryLinkLabel_XKxb">Python API</span></a><button aria-label="展开侧边栏分类 &#x27;Python API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/concepts/"><span title="Concepts" class="categoryLinkLabel_XKxb">Concepts</span></a><button aria-label="展开侧边栏分类 &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/developer_guide/"><span title="Developer Guide" class="categoryLinkLabel_XKxb">Developer Guide</span></a><button aria-label="展开侧边栏分类 &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/getting_started/"><span title="入门" class="categoryLinkLabel_XKxb">入门</span></a><button aria-label="展开侧边栏分类 &#x27;入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/integrations/"><span title="Integrations" class="categoryLinkLabel_XKxb">Integrations</span></a><button aria-label="展开侧边栏分类 &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist menu__link--active" href="/tutorials/"><span title="教程" class="categoryLinkLabel_XKxb">教程</span></a><button aria-label="折叠侧边栏分类 &#x27;教程&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/backtest_binance_orderbook"><span title="回测：Binance OrderBook 数据" class="linkLabel_CNtA">回测：Binance OrderBook 数据</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/backtest_bybit_orderbook"><span title="回测：Bybit OrderBook 数据" class="linkLabel_CNtA">回测：Bybit OrderBook 数据</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/backtest_fx_bars"><span title="回测：FX bar 数据" class="linkLabel_CNtA">回测：FX bar 数据</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/databento_data_catalog"><span title="Databento 数据目录" class="linkLabel_CNtA">Databento 数据目录</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tutorials/databento_overview"><span title="Databento 概览" class="linkLabel_CNtA">Databento 概览</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/loading_external_data"><span title="加载外部数据" class="linkLabel_CNtA">加载外部数据</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/parquet_explorer"><span title="Parquet 探索（Explorer）" class="linkLabel_CNtA">Parquet 探索（Explorer）</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_bw1l"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PIhC"><div class="docItemContainer_pFw3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HRKZ" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sX5c"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/tutorials/"><span>教程</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Databento 概览</span></li></ul></nav><div class="tocCollapsible_DhUt theme-doc-toc-mobile tocMobile_Izjv"><button type="button" class="clean-btn tocCollapsibleButton_eYR5">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Databento 概览</h1></header>
<p>Databento 官方文档：</p>
<ul>
<li><a href="https://databento.com/docs" target="_blank" rel="noopener noreferrer">Databento 文档</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="三类服务">三类服务<a href="#三类服务" class="hash-link" aria-label="三类服务的直接链接" title="三类服务的直接链接" translate="no">​</a></h2>
<p>Databento 提供三种主要服务：</p>
<ol>
<li><code>Historical</code> — 用于获取 24 小时之前的历史市场数据</li>
<li><code>Live</code> — 用于获取最近 24 小时内的实时/近实时市场数据</li>
<li><code>Reference</code> — 用于获取证券主数据（security master）和公司行动（corporate actions）等参考数据</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="三种文件格式">三种文件格式<a href="#三种文件格式" class="hash-link" aria-label="三种文件格式的直接链接" title="三种文件格式的直接链接" translate="no">​</a></h2>
<p>Databento 支持三种常用数据格式：</p>
<ul>
<li><code>DBN</code> — Databento Binary Encoding（二进制格式）</li>
<li><code>csv</code> — 逗号分隔值（文本）</li>
<li><code>json</code> — JavaScript Object Notation（文本）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="python-库">Python 库<a href="#python-库" class="hash-link" aria-label="Python 库的直接链接" title="Python 库的直接链接" translate="no">​</a></h2>
<p>Databento 提供了一个简洁的 Python 客户端库（本教程用到）：</p>
<div class="language-bash codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-bash codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">pip install -U databento</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="schemas数据模式">Schemas（数据模式）<a href="#schemas数据模式" class="hash-link" aria-label="Schemas（数据模式）的直接链接" title="Schemas（数据模式）的直接链接" translate="no">​</a></h2>
<p>这里的“schema”可理解为你请求的数据“类型”。下面按从最详细到较聚合的顺序列出常用的 schema：</p>
<table><thead><tr><th>Schema</th><th>类型（Type）</th><th>说明</th></tr></thead><tbody><tr><td><code>mbo</code></td><td>L3 数据</td><td>提供每一次订单簿（order book）在每个价位的事件，按订单 ID 记录。可用于确定订单在队列中的具体位置，粒度最高。</td></tr><tr><td><code>mbp-10</code></td><td>L2 数据</td><td>提供前十个价位层的订单簿事件，按价格聚合（price keyed）。包含成交与市场深度变化信息，并给出前十价位的总量和订单计数。</td></tr><tr><td><code>mbp-1</code></td><td>L1 数据</td><td>提供更新顶级价位（BBO）的订单簿事件，包含成交和深度变化，在顶级价位上给出总量与订单计数。</td></tr><tr><td><code>bbo-1s</code></td><td>L1 采样数据</td><td>类似 L1，但以 1 秒为采样间隔提供数据，包括最近的 best bid、best offer 与成交（按 1 秒采样）。</td></tr><tr><td><code>tbbo</code></td><td>L1 交易数据</td><td>在每次成交发生前提供当时的 BBO（最佳买卖价）以及对应的成交事件，是 <code>mbp-1</code> 的一个子集。</td></tr><tr><td><code>trades</code></td><td>成交数据</td><td>提供每一笔成交事件，是 MBO 的一个子集。</td></tr><tr><td><code>ohlcv-1s</code></td><td>1 秒 K 线</td><td>由成交聚合而成的 1 秒 OHLCV（开/高/低/收/量）K 线。</td></tr><tr><td><code>ohlcv-1m</code></td><td>1 分钟 K 线</td><td>由成交聚合而成的 1 分钟 OHLCV K 线。</td></tr><tr><td><code>ohlcv-1h</code></td><td>1 小时 K 线</td><td>由成交聚合而成的 1 小时 OHLCV K 线。</td></tr><tr><td><code>ohlcv-1d</code></td><td>1 日 K 线</td><td>由成交聚合而成的 1 日 OHLCV K 线。</td></tr><tr><td><code>definition</code></td><td>Reference</td><td>提供有关合约/证券的参考信息，包括代码（symbol）、名称、到期日、上市日期、最小跳价（tick size）、行权价等。</td></tr><tr><td><code>status</code></td><td>交易所状态</td><td>提供交易时段内的状态更新，例如停牌、交易暂停、禁空（short-selling）限制、集合竞价开始等撮合引擎状态变更。</td></tr><tr><td><code>statistics</code></td><td>交易所统计</td><td>提供交易所发布的官方汇总统计数据，如日成交量、未平仓量（open interest）、结算价以及官方的开/高/低价等。</td></tr></tbody></table>
<p>Databento 如何生成低分辨率数据（例如从 tick-&gt;bar）？</p>
<ol>
<li>Databento 首先从每个数据源采集可用的最详细市场数据（若可用通常为 <code>mbo</code>）。</li>
<li>然后从该最高粒度的数据派生出其他所有格式，以保证不同 schema 之间的一致性（100% 一致）。</li>
</ol>
<p>参考资料：</p>
<ul>
<li>将 tick/trades 数据重采样为 K 线的示例教程：<!-- -->
<ul>
<li><a href="https://databento.com/docs/examples/basics-historical/tick-resampling/example" target="_blank" rel="noopener noreferrer">tick-resampling 示例</a></li>
</ul>
</li>
<li>所有 schema 的详细说明：<!-- -->
<ul>
<li><a href="https://databento.com/docs/schemas-and-data-formats?historical=python&amp;live=python&amp;reference=python" target="_blank" rel="noopener noreferrer">Schemas 与数据格式详解</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="symbology代码体系--命名规范">Symbology（代码体系 / 命名规范）<a href="#symbology代码体系--命名规范" class="hash-link" aria-label="Symbology（代码体系 / 命名规范）的直接链接" title="Symbology（代码体系 / 命名规范）的直接链接" translate="no">​</a></h2>
<p>Symbology 在这里指的是对不同合约/证券命名的约定。文档与 API 中常用缩写 <code>stypes</code>，即 &quot;symbology types&quot;（命名类型）。</p>
<p>Databento 支持四种主要的命名类型：</p>
<table><thead><tr><th style="text-align:left">Symbology Type</th><th style="text-align:left">说明</th><th style="text-align:left">示例/格式示例</th><th style="text-align:left">备注</th></tr></thead><tbody><tr><td style="text-align:left"><code>raw_symbol</code></td><td style="text-align:left">数据发布方原始的字符串代码</td><td style="text-align:left"><code>AAPL</code>, <code>ESH3</code></td><td style="text-align:left">适用于直接与交易所/市场连接的场景</td></tr><tr><td style="text-align:left"><code>instrument_id</code></td><td style="text-align:left">发布方分配的唯一数字 ID</td><td style="text-align:left"><code>12345</code>, <code>9876543</code></td><td style="text-align:left">更节省空间，但部分发布方可能会按日重映射（remap）</td></tr><tr><td style="text-align:left"><code>parent</code></td><td style="text-align:left">使用根符号将相关合约分组</td><td style="text-align:left"><code>ES.FUT</code>, <code>ES.OPT</code></td><td style="text-align:left">便于一次性查询某个根符号下的所有期货/期权合约</td></tr><tr><td style="text-align:left"><code>continuous</code></td><td style="text-align:left">引用随时间滚动变化的连续合约</td><td style="text-align:left"><code>ES.c.0</code>, <code>CL.n.1</code>, <code>ZN.v.0</code></td><td style="text-align:left">滚动规则示例：Calendar (c)、Open Interest (n)、Volume (v) 等</td></tr></tbody></table>
<p>此外，Databento 支持一个特殊的符号值：</p>
<table><thead><tr><th style="text-align:left">Special Value</th><th style="text-align:left">说明</th><th style="text-align:left">用法</th><th style="text-align:left">备注</th></tr></thead><tbody><tr><td style="text-align:left"><code>ALL_SYMBOLS</code></td><td style="text-align:left">请求数据集中所有可用的符号（通配符）</td><td style="text-align:left"><code>ALL_SYMBOLS</code></td><td style="text-align:left">用于一次性请求该数据集中所有符号（注意：这不是一种命名类型，而是通配符）</td></tr></tbody></table>
<p>请求数据时可以同时指定输入（input）和输出（output）的命名类型。下面列举了常见的四种组合（不同交易所/发布方支持的组合可能不同）：</p>
<table><thead><tr><th style="text-align:left">SType in</th><th style="text-align:left">SType out</th><th style="text-align:left">DBEQ.BASIC</th><th style="text-align:left">GLBX.MDP3</th><th style="text-align:left">IFEU.IMPACT</th><th style="text-align:left">NDEX.IMPACT</th><th style="text-align:left">OPRA.PILLAR</th><th style="text-align:left">XNAS.ITCH</th></tr></thead><tbody><tr><td style="text-align:left"><code>parent</code></td><td style="text-align:left"><code>instrument_id</code></td><td style="text-align:left"></td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>continuous</code></td><td style="text-align:left"><code>instrument_id</code></td><td style="text-align:left"></td><td style="text-align:left">✓</td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>raw_symbol</code></td><td style="text-align:left"><code>instrument_id</code></td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td></tr><tr><td style="text-align:left"><code>instrument_id</code></td><td style="text-align:left"><code>raw_symbol</code></td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td><td style="text-align:left">✓</td></tr></tbody></table>
<p>更多细节见：</p>
<ul>
<li><a href="https://databento.com/docs/standards-and-conventions/symbology?historical=python&amp;live=python&amp;reference=python" target="_blank" rel="noopener noreferrer">Symbology 规范</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="databento-文件格式dbn">Databento 文件格式（DBN）<a href="#databento-文件格式dbn" class="hash-link" aria-label="Databento 文件格式（DBN）的直接链接" title="Databento 文件格式（DBN）的直接链接" translate="no">​</a></h2>
<p>Databento 使用其自有的市场数据文件格式，称为 Databento Binary Encoding（简称 <code>DBN</code>）。
可以把它理解为更高效、且经过压缩的 CSV/JSON 的替代方案。你可以很容易地加载 DBN 文件并将其转换为 CSV 或 JSON。更多细节：</p>
<ul>
<li><a href="https://databento.com/docs/standards-and-conventions/databento-binary-encoding#getting-started-with-dbn?historical=python&amp;live=python&amp;reference=python" target="_blank" rel="noopener noreferrer">Databento Binary Encoding（DBN）说明</a></li>
</ul>
<h1>Historical API 示例</h1>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="认证并连接-databento">认证并连接 Databento<a href="#认证并连接-databento" class="hash-link" aria-label="认证并连接 Databento的直接链接" title="认证并连接 Databento的直接链接" translate="no">​</a></h2>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> databento </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 建立连接并进行认证</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">API_KEY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;db-8VWGBis54s4ewGVciMRakNxLCJKen&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 在此处填入你的 API key（示例 key 仅作说明）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Historical</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">API_KEY</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="元数据metadata">元数据（Metadata）<a href="#元数据metadata" class="hash-link" aria-label="元数据（Metadata）的直接链接" title="元数据（Metadata）的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="列出发布方list-publishers">列出发布方（List Publishers）<a href="#列出发布方list-publishers" class="hash-link" aria-label="列出发布方（List Publishers）的直接链接" title="列出发布方（List Publishers）的直接链接" translate="no">​</a></h3>
<p>列出所有数据发布方（publishers）。</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">publishers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_publishers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 若列表很长，这里只显示前五个示例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">publishers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;publisher_id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;dataset&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;GLBX.MDP3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;GLBX&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;CME Globex MDP 3.0&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;publisher_id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;dataset&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XNAS.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XNAS&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Nasdaq TotalView-ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;publisher_id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;dataset&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XBOS.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XBOS&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Nasdaq BX TotalView-ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;publisher_id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;dataset&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XPSX.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XPSX&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Nasdaq PSX TotalView-ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;publisher_id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;dataset&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;BATS.PITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;BATS&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;description&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Cboe BZX Depth Pitch&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="列出数据集list-datasets">列出数据集（List Datasets）<a href="#列出数据集list-datasets" class="hash-link" aria-label="列出数据集（List Datasets）的直接链接" title="列出数据集（List Datasets）的直接链接" translate="no">​</a></h3>
<p>每个 dataset 的命名格式为 <code>PUBLISHER.DATASET</code>。发布方/市场代码参考：</p>
<ul>
<li><a href="https://www.iso20022.org/market-identifier-codes" target="_blank" rel="noopener noreferrer">ISO20022 市场标识代码（Market Identifier Codes）</a></li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">datasets </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_datasets</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datasets</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ARCX.PILLAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;DBEQ.BASIC&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;EPRL.DOM&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;EQUS.SUMMARY&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;GLBX.MDP3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;IEXG.TOPS&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;IFEU.IMPACT&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NDEX.IMPACT&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OPRA.PILLAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XASE.PILLAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XBOS.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XCHI.PILLAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XCIS.TRADESBBO&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XNAS.BASIC&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XNAS.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XNYS.PILLAR&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;XPSX.ITCH&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="列出-schemalist-schemas">列出 Schema（List Schemas）<a href="#列出-schemalist-schemas" class="hash-link" aria-label="列出 Schema（List Schemas）的直接链接" title="列出 Schema（List Schemas）的直接链接" translate="no">​</a></h3>
<p>列出 Databento 支持的所有数据 schema：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">schemas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_schemas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schemas</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;mbo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mbp-1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mbp-10&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tbbo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;trades&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bbo-1s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bbo-1m&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ohlcv-1s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ohlcv-1m&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ohlcv-1h&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ohlcv-1d&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;definition&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;statistics&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;status&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="数据集情况dataset-condition">数据集情况（Dataset condition）<a href="#数据集情况dataset-condition" class="hash-link" aria-label="数据集情况（Dataset condition）的直接链接" title="数据集情况（Dataset condition）的直接链接" translate="no">​</a></h3>
<p>查询数据可用性与质量信息：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">conditions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_dataset_condition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end_date</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-10&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conditions</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-06&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;condition&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;available&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;last_modified_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-05-18&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-07&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;condition&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;available&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;last_modified_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-05-21&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-08&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;condition&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;available&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;last_modified_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-05-21&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-09&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;condition&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;available&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;last_modified_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-05-21&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-10&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;condition&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;available&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;last_modified_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-05-22&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="数据集时间范围dataset-range">数据集时间范围（Dataset range）<a href="#数据集时间范围dataset-range" class="hash-link" aria-label="数据集时间范围（Dataset range）的直接链接" title="数据集时间范围（Dataset range）的直接链接" translate="no">​</a></h3>
<p>显示某个 dataset 的可用时间范围：</p>
<ul>
<li>可用于发现数据的起止可用性。</li>
<li>响应中的 start/end 可以直接用于 <code>timeseries.get_range</code> 或 <code>batch.submit_job</code> 等接口。</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">available_range </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_dataset_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">available_range</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;start&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2010-06-06T00:00:00.000000000Z&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;end&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2025-01-18T00:00:00.000000000Z&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="记录计数record-count">记录计数（Record count）<a href="#记录计数record-count" class="hash-link" aria-label="记录计数（Record count）的直接链接" title="记录计数（Record count）的直接链接" translate="no">​</a></h3>
<p>返回某次查询将产生的记录数：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">record_count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_record_count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># ES（S&amp;P 合约），2022 年 6 月到期</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 1 小时 K 线；仅适用于以 10 分钟为倍数的时间段（不能用于 1 分钟）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-01-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 包含起始日</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-01-07&quot;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 不包含结束日</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 交易所在某个时段有一小时停盘，因此 23 条小时线是合理的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">record_count</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<p><code>23</code></p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="成本costs">成本（Costs）<a href="#成本costs" class="hash-link" aria-label="成本（Costs）的直接链接" title="成本（Costs）的直接链接" translate="no">​</a></h3>
<p>获取数据费用（以美元计）：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_cost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 1 小时 K 线</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-01-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 包含起始日</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-01-07&quot;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 不包含结束日</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cost</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<p><code>0.00022791326</code></p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="时间序列数据time-series-data">时间序列数据（Time series data）<a href="#时间序列数据time-series-data" class="hash-link" aria-label="时间序列数据（Time series data）的直接链接" title="时间序列数据（Time series data）的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="get_range"><code>get_range</code><a href="#get_range" class="hash-link" aria-label="get_range的直接链接" title="get_range的直接链接" translate="no">​</a></h3>
<ul>
<li>向 Databento 发起流式（streaming）的时间序列数据请求。</li>
<li>这是将历史市场数据、合约定义以及状态数据直接加载到应用的主要方法。</li>
<li>该方法会在所有数据下载完成后才返回，下载时间可能较长。</li>
</ul>
<p><strong>警告：</strong></p>
<ul>
<li>字段 <code>ts_event</code> 表示聚合的起始时间（opening time）。因此当下载的是 K 线时，时间戳代表的是每根 K 线的开盘时间，而非收盘时间。</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timeseries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># ES（S&amp;P 合约），2022 年 6 月到期</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># 小时线</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-01T00:00:00&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-03T00:10:00&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># 可选：限制返回结果数量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 返回的数据为 DBNStore 格式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<p><code>&lt;DBNStore(schema=ohlcv-1h)&gt;</code></p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 将 DBN 格式转换为 pandas DataFrame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 预览</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-01 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4149.25</td><td style="text-align:left">4153.50</td><td style="text-align:left">4149.00</td><td style="text-align:left">4150.75</td><td style="text-align:left">9281</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-01 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4151.00</td><td style="text-align:left">4157.75</td><td style="text-align:left">4149.50</td><td style="text-align:left">4154.25</td><td style="text-align:left">11334</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-01 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4154.25</td><td style="text-align:left">4155.25</td><td style="text-align:left">4146.50</td><td style="text-align:left">4147.00</td><td style="text-align:left">7258</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<p>说明：</p>
<ul>
<li><code>rtype</code> = 1 小时的 K 线类型编码</li>
<li>更多关于类型编码的说明见：<a href="https://databento.com/docs/standards-and-conventions/common-fields-enums-types#rtype?historical=python&amp;live=python&amp;reference=python" target="_blank" rel="noopener noreferrer">rtype 说明</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="符号解析symbols">符号解析（Symbols）<a href="#符号解析symbols" class="hash-link" aria-label="符号解析（Symbols）的直接链接" title="符号解析（Symbols）的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="resolve"><code>resolve</code><a href="#resolve" class="hash-link" aria-label="resolve的直接链接" title="resolve的直接链接" translate="no">​</a></h3>
<p>将一组符号从一种输入命名类型解析为另一种输出命名类型。</p>
<ul>
<li>例如：从 <code>raw_symbol</code> 转为 <code>instrument_id</code>：<code>ESM2</code> → <code>3403</code></li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">symbology</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stype_in</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;raw_symbol&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stype_out</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start_date</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-01&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end_date</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-30&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;result&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;ESM2&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;d0&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-01&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;d1&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-26&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3403&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;symbols&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ESM2&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;stype_in&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;raw_symbol&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;stype_out&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;instrument_id&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;start_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-01&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;end_date&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2022-06-30&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;partial&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;not_found&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;message&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;status&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>其中最重要的是 <code>result</code> 字段，内含键值对 <code>&#x27;s&#x27;: &#x27;3403&#x27;</code>，即对应的 <code>instrument_id</code> 值。</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="dbnstore-操作">DBNStore 操作<a href="#dbnstore-操作" class="hash-link" aria-label="DBNStore 操作的直接链接" title="DBNStore 操作的直接链接" translate="no">​</a></h2>
<p><code>DBNStore</code> 是用于处理 <code>DBN</code> 编码数据的辅助类。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="from_bytes"><code>from_bytes</code><a href="#from_bytes" class="hash-link" aria-label="from_bytes的直接链接" title="from_bytes的直接链接" translate="no">​</a></h3>
<p>从 DBN 字节流中读取数据：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timeseries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-06 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4109.50</td><td style="text-align:left">4117.00</td><td style="text-align:left">4105.50</td><td style="text-align:left">4115.75</td><td style="text-align:left">8541</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4115.75</td><td style="text-align:left">4122.75</td><td style="text-align:left">4113.00</td><td style="text-align:left">4122.25</td><td style="text-align:left">14008</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4122.25</td><td style="text-align:left">4127.00</td><td style="text-align:left">4120.75</td><td style="text-align:left">4126.25</td><td style="text-align:left">10150</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 将流式接收的数据保存为文件，推荐后缀：`*.dbn.zst`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./GLBX-ESM2-20220606.ohlcv-1h.dbn.zst&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 从已保存的文件中加载数据并重新创建 DBN 对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;rb&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> saved</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loaded_dbn_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DBNStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">saved</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loaded_dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-06 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4109.50</td><td style="text-align:left">4117.00</td><td style="text-align:left">4105.50</td><td style="text-align:left">4115.75</td><td style="text-align:left">8541</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4115.75</td><td style="text-align:left">4122.75</td><td style="text-align:left">4113.00</td><td style="text-align:left">4122.25</td><td style="text-align:left">14008</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4122.25</td><td style="text-align:left">4127.00</td><td style="text-align:left">4120.75</td><td style="text-align:left">4126.25</td><td style="text-align:left">10150</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="from_file"><code>from_file</code><a href="#from_file" class="hash-link" aria-label="from_file的直接链接" title="from_file的直接链接" translate="no">​</a></h3>
<p>从 DBN 文件读取数据：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">loaded_dbn_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DBNStore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loaded_dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-06 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4109.50</td><td style="text-align:left">4117.00</td><td style="text-align:left">4105.50</td><td style="text-align:left">4115.75</td><td style="text-align:left">8541</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4115.75</td><td style="text-align:left">4122.75</td><td style="text-align:left">4113.00</td><td style="text-align:left">4122.25</td><td style="text-align:left">14008</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4122.25</td><td style="text-align:left">4127.00</td><td style="text-align:left">4120.75</td><td style="text-align:left">4126.25</td><td style="text-align:left">10150</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_csv"><code>to_csv</code><a href="#to_csv" class="hash-link" aria-label="to_csv的直接链接" title="to_csv的直接链接" translate="no">​</a></h3>
<p>将数据写为 CSV 文件：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timeseries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 导出为 CSV 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GLBX-ESM2-20220606-ohlcv-1h.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_df"><code>to_df</code><a href="#to_df" class="hash-link" aria-label="to_df的直接链接" title="to_df的直接链接" translate="no">​</a></h3>
<p>将 DBN 数据转换为 pandas DataFrame：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 转为 pandas DataFrame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-06 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4109.50</td><td style="text-align:left">4117.00</td><td style="text-align:left">4105.50</td><td style="text-align:left">4115.75</td><td style="text-align:left">8541</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4115.75</td><td style="text-align:left">4122.75</td><td style="text-align:left">4113.00</td><td style="text-align:left">4122.25</td><td style="text-align:left">14008</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4122.25</td><td style="text-align:left">4127.00</td><td style="text-align:left">4120.75</td><td style="text-align:left">4126.25</td><td style="text-align:left">10150</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_json"><code>to_json</code><a href="#to_json" class="hash-link" aria-label="to_json的直接链接" title="to_json的直接链接" translate="no">​</a></h3>
<p>将数据写为 JSON 文件：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 导出为 JSON 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GLBX-ESM2-20220606-ohlcv-1h.json&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_file"><code>to_file</code><a href="#to_file" class="hash-link" aria-label="to_file的直接链接" title="to_file的直接链接" translate="no">​</a></h3>
<p>将数据写为 DBN 文件：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 导出为 DBN 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GLBX-ESM2-20220606.ohlcv-1h.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_ndarray"><code>to_ndarray</code><a href="#to_ndarray" class="hash-link" aria-label="to_ndarray的直接链接" title="to_ndarray的直接链接" translate="no">​</a></h3>
<ul>
<li>将数据转换为 numpy 的 N 维数组（ndarray）。</li>
<li>每个元素包含二进制字段对应的 Python 表示（Tuple）。</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 导出为 numpy 数组</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ndarray </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_ndarray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ndarray</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="to_parquet"><code>to_parquet</code><a href="#to_parquet" class="hash-link" aria-label="to_parquet的直接链接" title="to_parquet的直接链接" translate="no">​</a></h3>
<ul>
<li>将数据写为 <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Apache Parquet</a> 文件。</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 导出为 Parquet 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_parquet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GLBX-ESM2-20220606-ohlcv-1h.parquet&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="for-循环示例"><code>for</code> 循环示例<a href="#for-循环示例" class="hash-link" aria-label="for-循环示例的直接链接" title="for-循环示例的直接链接" translate="no">​</a></h3>
<ul>
<li>可以使用标准的 Python <code>for</code> 循环来遍历 DBN 文件内容。</li>
</ul>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 先加载一些数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timeseries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ESM2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1h&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2022-06-06&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 包含 3 条小时线</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbn_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<table><thead><tr><th style="text-align:left">ts_event</th><th style="text-align:left">rtype</th><th style="text-align:left">publisher_id</th><th style="text-align:left">instrument_id</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th><th style="text-align:left">symbol</th></tr></thead><tbody><tr><td style="text-align:left">2022-06-06 00:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4109.50</td><td style="text-align:left">4117.00</td><td style="text-align:left">4105.50</td><td style="text-align:left">4115.75</td><td style="text-align:left">8541</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 01:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4115.75</td><td style="text-align:left">4122.75</td><td style="text-align:left">4113.00</td><td style="text-align:left">4122.25</td><td style="text-align:left">14008</td><td style="text-align:left">ESM2</td></tr><tr><td style="text-align:left">2022-06-06 02:00:00+00:00</td><td style="text-align:left">34</td><td style="text-align:left">1</td><td style="text-align:left">3403</td><td style="text-align:left">4122.25</td><td style="text-align:left">4127.00</td><td style="text-align:left">4120.75</td><td style="text-align:left">4126.25</td><td style="text-align:left">10150</td><td style="text-align:left">ESM2</td></tr></tbody></table>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 用 for 循环遍历 DBN 数据：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> bar </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> dbn_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># 打印完整的 bar 数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 故意只打印第一条示例</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<div class="language-text codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-text codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">OhlcvMsg {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hd: RecordHeader {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        length: 14,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rtype: Ohlcv1H,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        publisher_id: GlbxMdp3Glbx,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        instrument_id: 3403,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ts_event: 1654473600000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    open: 4109.500000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    high: 4117.000000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    low: 4105.500000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    close: 4115.750000000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volume: 4543</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> bar </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> dbn_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Bar open: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">bar</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation builtin">open</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 打印 bar 的开盘价信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic"># 故意只打印第一条示例</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<p><code>Bar open: 4108500000000</code></p>
<h1>示例</h1>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="下载-1-分钟级别的-6e-数据">下载 1 分钟级别的 6E 数据<a href="#下载-1-分钟级别的-6e-数据" class="hash-link" aria-label="下载 1 分钟级别的 6E 数据的直接链接" title="下载 1 分钟级别的 6E 数据的直接链接" translate="no">​</a></h2>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> datetime </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> timedelta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pytz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;display.max_columns&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;display.max_rows&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 设置参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;GLBX.MDP3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">symbol</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;6E.v.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stype_in</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;continuous&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ohlcv-1m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2025-01-01&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2025-01-05&quot;</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 查询美元计价的费用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_cost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">symbol</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stype_in</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">stype_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">cost</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">:</span><span class="token string-interpolation interpolation format-spec">.2f</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">$&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出：</p>
<p><code>0.01$</code></p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 下载数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timeseries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    symbols</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">symbol</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stype_in</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">stype_in</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    start</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 导出为 DBNStore 格式（CSV 数据体积约为 DBN 的 10 倍）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">dataset</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">symbol</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">start</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">-</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">end</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">schema</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.dbn.zst&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 清理并以 DataFrame 查看数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_df</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reset_index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">columns</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;ts_event&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;datetime&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">drop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">columns</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;rtype&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;publisher_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;instrument_id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 调整列顺序</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reindex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">columns</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;symbol&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;datetime&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;open&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;high&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;low&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;close&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;volume&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 将时间本地化至 Bratislava</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">assign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">datetime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_datetime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;datetime&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utc</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 标记为 UTC 时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">assign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">datetime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;datetime&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tz_convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pytz</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">timezone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Europe/Bratislava&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 转换为 Bratislava 时区</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 加 1 分钟，使 datetime 表示 K 线的收盘时间（而非开盘时间）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">assign</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">datetime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">lambda</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> df</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;datetime&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> timedelta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">minutes</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 预览</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">df</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">head</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>示例输出（仅示例格式）：</p>
<p><code>2734</code></p>
<table><thead><tr><th style="text-align:left">symbol</th><th style="text-align:left">datetime</th><th style="text-align:left">open</th><th style="text-align:left">high</th><th style="text-align:left">low</th><th style="text-align:left">close</th><th style="text-align:left">volume</th></tr></thead><tbody><tr><td style="text-align:left">6E.v.0</td><td style="text-align:left">2025-01-02 00:01:00+01:00</td><td style="text-align:left">1.03890</td><td style="text-align:left">1.03930</td><td style="text-align:left">1.03845</td><td style="text-align:left">1.03905</td><td style="text-align:left">291</td></tr><tr><td style="text-align:left">6E.v.0</td><td style="text-align:left">2025-01-02 00:02:00+01:00</td><td style="text-align:left">1.03900</td><td style="text-align:left">1.03900</td><td style="text-align:left">1.03870</td><td style="text-align:left">1.03880</td><td style="text-align:left">311</td></tr><tr><td style="text-align:left">6E.v.0</td><td style="text-align:left">2025-01-02 00:03:00+01:00</td><td style="text-align:left">1.03880</td><td style="text-align:left">1.03890</td><td style="text-align:left">1.03870</td><td style="text-align:left">1.03885</td><td style="text-align:left">140</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/tutorials/databento_overview.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_F7ru" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_GNoA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/tutorials/databento_data_catalog"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Databento 数据目录</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tutorials/loading_external_data"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">加载外部数据</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pg_n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#三类服务" class="table-of-contents__link toc-highlight">三类服务</a></li><li><a href="#三种文件格式" class="table-of-contents__link toc-highlight">三种文件格式</a></li><li><a href="#python-库" class="table-of-contents__link toc-highlight">Python 库</a></li><li><a href="#schemas数据模式" class="table-of-contents__link toc-highlight">Schemas（数据模式）</a></li><li><a href="#symbology代码体系--命名规范" class="table-of-contents__link toc-highlight">Symbology（代码体系 / 命名规范）</a></li><li><a href="#databento-文件格式dbn" class="table-of-contents__link toc-highlight">Databento 文件格式（DBN）</a></li><li><a href="#认证并连接-databento" class="table-of-contents__link toc-highlight">认证并连接 Databento</a></li><li><a href="#元数据metadata" class="table-of-contents__link toc-highlight">元数据（Metadata）</a><ul><li><a href="#列出发布方list-publishers" class="table-of-contents__link toc-highlight">列出发布方（List Publishers）</a></li><li><a href="#列出数据集list-datasets" class="table-of-contents__link toc-highlight">列出数据集（List Datasets）</a></li><li><a href="#列出-schemalist-schemas" class="table-of-contents__link toc-highlight">列出 Schema（List Schemas）</a></li><li><a href="#数据集情况dataset-condition" class="table-of-contents__link toc-highlight">数据集情况（Dataset condition）</a></li><li><a href="#数据集时间范围dataset-range" class="table-of-contents__link toc-highlight">数据集时间范围（Dataset range）</a></li><li><a href="#记录计数record-count" class="table-of-contents__link toc-highlight">记录计数（Record count）</a></li><li><a href="#成本costs" class="table-of-contents__link toc-highlight">成本（Costs）</a></li></ul></li><li><a href="#时间序列数据time-series-data" class="table-of-contents__link toc-highlight">时间序列数据（Time series data）</a><ul><li><a href="#get_range" class="table-of-contents__link toc-highlight"><code>get_range</code></a></li></ul></li><li><a href="#符号解析symbols" class="table-of-contents__link toc-highlight">符号解析（Symbols）</a><ul><li><a href="#resolve" class="table-of-contents__link toc-highlight"><code>resolve</code></a></li></ul></li><li><a href="#dbnstore-操作" class="table-of-contents__link toc-highlight">DBNStore 操作</a><ul><li><a href="#from_bytes" class="table-of-contents__link toc-highlight"><code>from_bytes</code></a></li><li><a href="#from_file" class="table-of-contents__link toc-highlight"><code>from_file</code></a></li><li><a href="#to_csv" class="table-of-contents__link toc-highlight"><code>to_csv</code></a></li><li><a href="#to_df" class="table-of-contents__link toc-highlight"><code>to_df</code></a></li><li><a href="#to_json" class="table-of-contents__link toc-highlight"><code>to_json</code></a></li><li><a href="#to_file" class="table-of-contents__link toc-highlight"><code>to_file</code></a></li><li><a href="#to_ndarray" class="table-of-contents__link toc-highlight"><code>to_ndarray</code></a></li><li><a href="#to_parquet" class="table-of-contents__link toc-highlight"><code>to_parquet</code></a></li><li><a href="#for-循环示例" class="table-of-contents__link toc-highlight"><code>for</code> 循环示例</a></li></ul></li><li><a href="#下载-1-分钟级别的-6e-数据" class="table-of-contents__link toc-highlight">下载 1 分钟级别的 6E 数据</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 NautilusTrader Documentation.</div></div></div></footer></div>
</body>
</html>
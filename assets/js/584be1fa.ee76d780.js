"use strict";(globalThis.webpackChunknautilus_trader=globalThis.webpackChunknautilus_trader||[]).push([[8551],{7491:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"integrations/ib","title":"Interactive Brokers","description":"Interactive Brokers\uff08IB\uff09\u662f\u4e00\u4e2a\u8986\u76d6\u5e7f\u6cdb\u91d1\u878d\u5de5\u5177\u7684\u4ea4\u6613\u5e73\u53f0\uff0c\u5305\u62ec\u80a1\u7968\u3001\u671f\u6743\u3001\u671f\u8d27\u3001\u5916\u6c47\u3001\u503a\u5238\u3001\u57fa\u91d1\u548c\u52a0\u5bc6\u8d27\u5e01\u3002NautilusTrader \u63d0\u4f9b\u4e86\u4e00\u4e2a\u9002\u914d\u5668\uff0c\u901a\u8fc7\u5176 Python \u5e93 ibapi\uff08https//ibkrcampus.com/ibkr-api-page/trader-workstation-api/\uff09\u6765\u4e0e IB \u96c6\u6210\u3002","source":"@site/docs/integrations/ib.md","sourceDirName":"integrations","slug":"/integrations/ib","permalink":"/integrations/ib","draft":false,"unlisted":false,"editUrl":"https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/integrations/ib.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Hyperliquid","permalink":"/integrations/hyperliquid"},"next":{"title":"OKX","permalink":"/integrations/okx"}}');var s=i(7259),c=i(9087);const d={},t="Interactive Brokers",l={},o=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u5feb\u901f\u4e0a\u624b",id:"\u5feb\u901f\u4e0a\u624b",level:2},{value:"\u8fde\u63a5\u65b9\u5f0f",id:"\u8fde\u63a5\u65b9\u5f0f",level:3},{value:"\u9ed8\u8ba4\u7aef\u53e3",id:"\u9ed8\u8ba4\u7aef\u53e3",level:3},{value:"\u8fde\u63a5\u5230\u5df2\u6709\u7684 Gateway \u6216 TWS",id:"\u8fde\u63a5\u5230\u5df2\u6709\u7684-gateway-\u6216-tws",level:3},{value:"\u4f7f\u7528 Docker \u5316\u7684 IB Gateway",id:"\u4f7f\u7528-docker-\u5316\u7684-ib-gateway",level:3},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf",level:3},{value:"\u8fde\u63a5\u7ba1\u7406",id:"\u8fde\u63a5\u7ba1\u7406",level:3},{value:"\u6982\u89c8",id:"\u6982\u89c8",level:2},{value:"\u6838\u5fc3\u7ec4\u4ef6",id:"\u6838\u5fc3\u7ec4\u4ef6",level:3},{value:"\u652f\u6301\u7ec4\u4ef6",id:"\u652f\u6301\u7ec4\u4ef6",level:3},{value:"\u652f\u6301\u7684\u8d44\u4ea7\u7c7b\u522b",id:"\u652f\u6301\u7684\u8d44\u4ea7\u7c7b\u522b",level:3},{value:"Interactive Brokers \u5ba2\u6237\u7aef",id:"interactive-brokers-\u5ba2\u6237\u7aef",level:2},{value:"\u5ba2\u6237\u7aef\u67b6\u6784",id:"\u5ba2\u6237\u7aef\u67b6\u6784",level:3},{value:"\u8fde\u63a5\u7ba1\u7406\uff08<code>InteractiveBrokersClientConnectionMixin</code>\uff09",id:"\u8fde\u63a5\u7ba1\u7406interactivebrokersclientconnectionmixin",level:4},{value:"\u9519\u8bef\u5904\u7406\uff08<code>InteractiveBrokersClientErrorMixin</code>\uff09",id:"\u9519\u8bef\u5904\u7406interactivebrokersclienterrormixin",level:4},{value:"\u8d26\u6237\u7ba1\u7406\uff08<code>InteractiveBrokersClientAccountMixin</code>\uff09",id:"\u8d26\u6237\u7ba1\u7406interactivebrokersclientaccountmixin",level:4},{value:"\u5408\u7ea6/\u6807\u7684\u7ba1\u7406\uff08<code>InteractiveBrokersClientContractMixin</code>\uff09",id:"\u5408\u7ea6\u6807\u7684\u7ba1\u7406interactivebrokersclientcontractmixin",level:4},{value:"\u884c\u60c5\u6570\u636e\u7ba1\u7406\uff08<code>InteractiveBrokersClientMarketDataMixin</code>\uff09",id:"\u884c\u60c5\u6570\u636e\u7ba1\u7406interactivebrokersclientmarketdatamixin",level:4},{value:"\u8ba2\u5355\u7ba1\u7406\uff08<code>InteractiveBrokersClientOrderMixin</code>\uff09",id:"\u8ba2\u5355\u7ba1\u7406interactivebrokersclientordermixin",level:4},{value:"\u4e3b\u8981\u7279\u6027",id:"\u4e3b\u8981\u7279\u6027",level:3},{value:"\u6807\u8bc6\u7b26\uff08Symbology\uff09",id:"\u6807\u8bc6\u7b26symbology",level:2},{value:"\u6807\u8bc6\u7b26\u65b9\u6cd5",id:"\u6807\u8bc6\u7b26\u65b9\u6cd5",level:3},{value:"1. \u7b80\u5316\u6807\u8bc6\u6cd5\uff08<code>IB_SIMPLIFIED</code>\uff09 \u2014 \u9ed8\u8ba4",id:"1-\u7b80\u5316\u6807\u8bc6\u6cd5ib_simplified--\u9ed8\u8ba4",level:4},{value:"2. \u539f\u59cb\u6807\u8bc6\u6cd5\uff08<code>IB_RAW</code>\uff09",id:"2-\u539f\u59cb\u6807\u8bc6\u6cd5ib_raw",level:4},{value:"MIC \u4ea4\u6613\u6240\u4ee3\u7801\u8f6c\u6362",id:"mic-\u4ea4\u6613\u6240\u4ee3\u7801\u8f6c\u6362",level:3},{value:"<code>convert_exchange_to_mic_venue</code>",id:"convert_exchange_to_mic_venue",level:4},{value:"<code>symbol_to_mic_venue</code>",id:"symbol_to_mic_venue",level:4},{value:"\u652f\u6301\u7684\u5408\u7ea6\u683c\u5f0f",id:"\u652f\u6301\u7684\u5408\u7ea6\u683c\u5f0f",level:3},{value:"\u671f\u8d27\u6708\u4efd\u4ee3\u7801",id:"\u671f\u8d27\u6708\u4efd\u4ee3\u7801",level:4},{value:"\u6309\u8d44\u4ea7\u7c7b\u522b\u652f\u6301\u7684\u4ea4\u6613\u6240",id:"\u6309\u8d44\u4ea7\u7c7b\u522b\u652f\u6301\u7684\u4ea4\u6613\u6240",level:4},{value:"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6807\u8bc6\u65b9\u6cd5",id:"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6807\u8bc6\u65b9\u6cd5",level:3},{value:"\u5408\u7ea6\uff08Instruments\uff09\u4e0e Contract",id:"\u5408\u7ea6instruments\u4e0e-contract",level:2},{value:"\u5408\u7ea6\u7c7b\u578b",id:"\u5408\u7ea6\u7c7b\u578b",level:3},{value:"\u57fa\u7840\u5408\u7ea6\uff08<code>IBContract</code>\uff09",id:"\u57fa\u7840\u5408\u7ea6ibcontract",level:4},{value:"\u5408\u7ea6\u8be6\u60c5\uff08<code>IBContractDetails</code>\uff09",id:"\u5408\u7ea6\u8be6\u60c5ibcontractdetails",level:4},{value:"\u5408\u7ea6\u67e5\u8be2",id:"\u5408\u7ea6\u67e5\u8be2",level:3},{value:"\u52a0\u8f7d\u5408\u7ea6",id:"\u52a0\u8f7d\u5408\u7ea6",level:3},{value:"1. \u4f7f\u7528 <code>load_ids</code>\uff08\u63a8\u8350\uff09",id:"1-\u4f7f\u7528-load_ids\u63a8\u8350",level:4},{value:"2. \u4f7f\u7528 <code>load_contracts</code>\uff08\u5904\u7406\u590d\u6742\u5408\u7ea6\uff09",id:"2-\u4f7f\u7528-load_contracts\u5904\u7406\u590d\u6742\u5408\u7ea6",level:4},{value:"\u6309\u8d44\u4ea7\u7c7b\u522b\u7684 <code>IBContract</code> \u793a\u4f8b",id:"\u6309\u8d44\u4ea7\u7c7b\u522b\u7684-ibcontract-\u793a\u4f8b",level:3},{value:"\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879",id:"\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879",level:3},{value:"\u8fde\u7eed\u671f\u8d27\uff08Continuous futures\uff09",id:"\u8fde\u7eed\u671f\u8d27continuous-futures",level:3},{value:"\u671f\u6743\u4ef7\u5dee\uff08Option spreads\uff09",id:"\u671f\u6743\u4ef7\u5deeoption-spreads",level:2},{value:"\u521b\u5efa\u671f\u6743\u4ef7\u5dee\u7684 InstrumentId",id:"\u521b\u5efa\u671f\u6743\u4ef7\u5dee\u7684-instrumentid",level:3},{value:"\u52a8\u6001\u52a0\u8f7d\u4ef7\u5dee",id:"\u52a8\u6001\u52a0\u8f7d\u4ef7\u5dee",level:3},{value:"\u4ef7\u5dee\u4ea4\u6613\u8981\u6c42",id:"\u4ef7\u5dee\u4ea4\u6613\u8981\u6c42",level:3},{value:"\u5386\u53f2\u6570\u636e\u4e0e\u56de\u6d4b",id:"\u5386\u53f2\u6570\u636e\u4e0e\u56de\u6d4b",level:2},{value:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b",id:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b",level:3},{value:"\u5386\u53f2\u6570\u636e\u5ba2\u6237\u7aef",id:"\u5386\u53f2\u6570\u636e\u5ba2\u6237\u7aef",level:3},{value:"\u83b7\u53d6\u5408\u7ea6\u4fe1\u606f",id:"\u83b7\u53d6\u5408\u7ea6\u4fe1\u606f",level:3},{value:"\u57fa\u672c\u5408\u7ea6\u68c0\u7d22",id:"\u57fa\u672c\u5408\u7ea6\u68c0\u7d22",level:4},{value:"\u4e0b\u8f7d\u671f\u6743\u94fe\u5e76\u4fdd\u5b58\u5230 Catalog",id:"\u4e0b\u8f7d\u671f\u6743\u94fe\u5e76\u4fdd\u5b58\u5230-catalog",level:4},{value:"\u8bf7\u6c42\u5386\u53f2 K \u7ebf",id:"\u8bf7\u6c42\u5386\u53f2-k-\u7ebf",level:3},{value:"\u8bf7\u6c42\u5386\u53f2\u9010\u7b14",id:"\u8bf7\u6c42\u5386\u53f2\u9010\u7b14",level:3},{value:"K \u7ebf\u89c4\u683c",id:"k-\u7ebf\u89c4\u683c",level:3},{value:"\u65f6\u95f4\u578b K \u7ebf",id:"\u65f6\u95f4\u578b-k-\u7ebf",level:4},{value:"\u4ef7\u683c\u7c7b\u578b",id:"\u4ef7\u683c\u7c7b\u578b",level:4},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:3},{value:"\u6570\u636e\u9650\u5236",id:"\u6570\u636e\u9650\u5236",level:3},{value:"\u63a8\u8350\u6700\u4f73\u5b9e\u8df5",id:"\u63a8\u8350\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u5b9e\u76d8\u4ea4\u6613",id:"\u5b9e\u76d8\u4ea4\u6613",level:2},{value:"\u67b6\u6784\u6982\u89c8",id:"\u67b6\u6784\u6982\u89c8",level:3},{value:"InstrumentProvider \u914d\u7f6e",id:"instrumentprovider-\u914d\u7f6e",level:3},{value:"\u57fa\u672c\u914d\u7f6e",id:"\u57fa\u672c\u914d\u7f6e",level:4},{value:"\u884d\u751f\u54c1\u7684\u9ad8\u7ea7\u914d\u7f6e",id:"\u884d\u751f\u54c1\u7684\u9ad8\u7ea7\u914d\u7f6e",level:4},{value:"\u4e0e\u5916\u90e8\u6570\u636e\u63d0\u4f9b\u65b9\u96c6\u6210",id:"\u4e0e\u5916\u90e8\u6570\u636e\u63d0\u4f9b\u65b9\u96c6\u6210",level:3},{value:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",id:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",level:3},{value:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b",id:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b-1",level:4},{value:"\u5e02\u573a\u6570\u636e\u7c7b\u578b\uff08Market data types\uff09",id:"\u5e02\u573a\u6570\u636e\u7c7b\u578bmarket-data-types",level:4},{value:"\u57fa\u672c\u7684\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",id:"\u57fa\u672c\u7684\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",level:4},{value:"\u751f\u4ea7/\u5b9e\u65f6\u7684\u9ad8\u7ea7\u914d\u7f6e",id:"\u751f\u4ea7\u5b9e\u65f6\u7684\u9ad8\u7ea7\u914d\u7f6e",level:4},{value:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e\u9009\u9879",id:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e\u9009\u9879",level:3},{value:"\u5907\u6ce8",id:"\u5907\u6ce8",level:4},{value:"\u6267\u884c\u5ba2\u6237\u7aef\uff08Execution client\uff09\u914d\u7f6e\u9009\u9879",id:"\u6267\u884c\u5ba2\u6237\u7aefexecution-client\u914d\u7f6e\u9009\u9879",level:3},{value:"\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",id:"\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",level:3},{value:"\u652f\u6301\u7684\u529f\u80fd",id:"\u652f\u6301\u7684\u529f\u80fd",level:4},{value:"\u652f\u6301\u7684\u8ba2\u5355\u7c7b\u578b",id:"\u652f\u6301\u7684\u8ba2\u5355\u7c7b\u578b",level:4},{value:"\u6709\u6548\u671f\uff08Time in force\uff09\u9009\u9879",id:"\u6709\u6548\u671ftime-in-force\u9009\u9879",level:4},{value:"\u6279\u91cf\u64cd\u4f5c",id:"\u6279\u91cf\u64cd\u4f5c",level:4},{value:"\u6301\u4ed3\u7ba1\u7406",id:"\u6301\u4ed3\u7ba1\u7406",level:4},{value:"\u8ba2\u5355\u67e5\u8be2",id:"\u8ba2\u5355\u67e5\u8be2",level:4},{value:"\u8fde\u5e26/\u6761\u4ef6\u8ba2\u5355\uff08Contingent orders\uff09",id:"\u8fde\u5e26\u6761\u4ef6\u8ba2\u5355contingent-orders",level:4},{value:"\u57fa\u672c\u7684\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",id:"\u57fa\u672c\u7684\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",level:4},{value:"\u9ad8\u7ea7\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e\uff08\u751f\u4ea7\uff09",id:"\u9ad8\u7ea7\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e\u751f\u4ea7",level:4},{value:"\u8d26\u6237 ID\uff08Account ID\uff09\u914d\u7f6e",id:"\u8d26\u6237-idaccount-id\u914d\u7f6e",level:4},{value:"\u8ba2\u5355\u6807\u7b7e\u4e0e\u9ad8\u7ea7\u529f\u80fd",id:"\u8ba2\u5355\u6807\u7b7e\u4e0e\u9ad8\u7ea7\u529f\u80fd",level:4},{value:"OCA\uff08one-cancels-all\uff09\u8ba2\u5355",id:"ocaone-cancels-all\u8ba2\u5355",level:4},{value:"\u57fa\u672c OCA \u914d\u7f6e",id:"\u57fa\u672c-oca-\u914d\u7f6e",level:3},{value:"\u9ad8\u7ea7 OCA \u914d\u7f6e",id:"\u9ad8\u7ea7-oca-\u914d\u7f6e",level:3},{value:"OCA \u7c7b\u578b",id:"oca-\u7c7b\u578b",level:3},{value:"\u540c\u4e00 OCA \u5206\u7ec4\u4e2d\u7684\u591a\u7b14\u8ba2\u5355",id:"\u540c\u4e00-oca-\u5206\u7ec4\u4e2d\u7684\u591a\u7b14\u8ba2\u5355",level:4},{value:"OCA \u914d\u7f6e\u8981\u6c42",id:"oca-\u914d\u7f6e\u8981\u6c42",level:3},{value:"\u6761\u4ef6\u8ba2\u5355\uff08Conditional orders\uff09",id:"\u6761\u4ef6\u8ba2\u5355conditional-orders",level:3},{value:"\u652f\u6301\u7684\u6761\u4ef6\u7c7b\u578b",id:"\u652f\u6301\u7684\u6761\u4ef6\u7c7b\u578b",level:4},{value:"\u57fa\u672c\u6761\u4ef6\u5355\u793a\u4f8b",id:"\u57fa\u672c\u6761\u4ef6\u5355\u793a\u4f8b",level:4},{value:"\u5e26\u903b\u8f91\u7684\u591a\u6761\u4ef6\u793a\u4f8b",id:"\u5e26\u903b\u8f91\u7684\u591a\u6761\u4ef6\u793a\u4f8b",level:4},{value:"\u6761\u4ef6\u53c2\u6570\u8bf4\u660e",id:"\u6761\u4ef6\u53c2\u6570\u8bf4\u660e",level:4},{value:"\u5b8c\u6574\u793a\u4f8b\uff1a\u5305\u542b\u6240\u6709\u6761\u4ef6\u7c7b\u578b",id:"\u5b8c\u6574\u793a\u4f8b\u5305\u542b\u6240\u6709\u6761\u4ef6\u7c7b\u578b",level:4},{value:"\u8ba2\u5355\u884c\u4e3a",id:"\u8ba2\u5355\u884c\u4e3a",level:4},{value:"\u5b9e\u73b0\u8bf4\u660e",id:"\u5b9e\u73b0\u8bf4\u660e",level:4},{value:"\u5b8c\u6574\u4ea4\u6613\u8282\u70b9\u914d\u7f6e",id:"\u5b8c\u6574\u4ea4\u6613\u8282\u70b9\u914d\u7f6e",level:3},{value:"\u6a21\u62df/\u7eb8\u9762\u4ea4\u6613\u914d\u7f6e\uff08Paper trading\uff09",id:"\u6a21\u62df\u7eb8\u9762\u4ea4\u6613\u914d\u7f6epaper-trading",level:4},{value:"\u4f7f\u7528 Dockerized gateway \u7684\u5b9e\u76d8\u4ea4\u6613",id:"\u4f7f\u7528-dockerized-gateway-\u7684\u5b9e\u76d8\u4ea4\u6613",level:2},{value:"\u591a\u5ba2\u6237\u7aef\u914d\u7f6e\uff08Multi-client configuration\uff09",id:"\u591a\u5ba2\u6237\u7aef\u914d\u7f6emulti-client-configuration",level:3},{value:"\u542f\u52a8\u4ea4\u6613\u8282\u70b9",id:"\u542f\u52a8\u4ea4\u6613\u8282\u70b9",level:3},{value:"\u5176\u4ed6\u914d\u7f6e\u9009\u9879",id:"\u5176\u4ed6\u914d\u7f6e\u9009\u9879",level:3},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf-1",level:4},{value:"\u65e5\u5fd7\u914d\u7f6e",id:"\u65e5\u5fd7\u914d\u7f6e",level:4},{value:"\u6545\u969c\u6392\u67e5\uff08Troubleshooting\uff09",id:"\u6545\u969c\u6392\u67e5troubleshooting",level:2},{value:"\u5e38\u89c1\u8fde\u63a5\u95ee\u9898",id:"\u5e38\u89c1\u8fde\u63a5\u95ee\u9898",level:3},{value:"\u8fde\u63a5\u88ab\u62d2\u7edd\uff08Connection refused\uff09",id:"\u8fde\u63a5\u88ab\u62d2\u7eddconnection-refused",level:4},{value:"\u8ba4\u8bc1\u9519\u8bef\uff08Authentication errors\uff09",id:"\u8ba4\u8bc1\u9519\u8befauthentication-errors",level:4},{value:"\u5ba2\u6237\u7aef ID \u51b2\u7a81\uff08Client ID conflicts\uff09",id:"\u5ba2\u6237\u7aef-id-\u51b2\u7a81client-id-conflicts",level:4},{value:"\u5e02\u573a\u6570\u636e\u6743\u9650\uff08Market data permissions\uff09",id:"\u5e02\u573a\u6570\u636e\u6743\u9650market-data-permissions",level:4},{value:"\u9519\u8bef\u4ee3\u7801",id:"\u9519\u8bef\u4ee3\u7801",level:3},{value:"\u6027\u80fd\u4f18\u5316",id:"\u6027\u80fd\u4f18\u5316",level:3},{value:"\u964d\u4f4e\u6570\u636e\u91cf",id:"\u964d\u4f4e\u6570\u636e\u91cf",level:4},{value:"\u8fde\u63a5\u7ba1\u7406",id:"\u8fde\u63a5\u7ba1\u7406-1",level:4},{value:"\u5185\u5b58\u7ba1\u7406",id:"\u5185\u5b58\u7ba1\u7406",level:4},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u5b89\u5168",id:"\u5b89\u5168",level:4},{value:"\u5f00\u53d1\u6d41\u7a0b",id:"\u5f00\u53d1\u6d41\u7a0b",level:4},{value:"\u751f\u4ea7\u90e8\u7f72",id:"\u751f\u4ea7\u90e8\u7f72",level:4},{value:"\u8ba2\u5355\u7ba1\u7406",id:"\u8ba2\u5355\u7ba1\u7406",level:4},{value:"\u8c03\u8bd5\u5efa\u8bae",id:"\u8c03\u8bd5\u5efa\u8bae",level:3},{value:"\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7",id:"\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7",level:4},{value:"\u76d1\u63a7\u8fde\u63a5\u72b6\u6001",id:"\u76d1\u63a7\u8fde\u63a5\u72b6\u6001",level:4},{value:"\u9a8c\u8bc1\u5408\u7ea6/\u54c1\u79cd",id:"\u9a8c\u8bc1\u5408\u7ea6\u54c1\u79cd",level:4},{value:"\u652f\u6301\u4e0e\u8d44\u6e90",id:"\u652f\u6301\u4e0e\u8d44\u6e90",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"interactive-brokers",children:"Interactive Brokers"})}),"\n",(0,s.jsxs)(n.p,{children:["Interactive Brokers\uff08IB\uff09\u662f\u4e00\u4e2a\u8986\u76d6\u5e7f\u6cdb\u91d1\u878d\u5de5\u5177\u7684\u4ea4\u6613\u5e73\u53f0\uff0c\u5305\u62ec\u80a1\u7968\u3001\u671f\u6743\u3001\u671f\u8d27\u3001\u5916\u6c47\u3001\u503a\u5238\u3001\u57fa\u91d1\u548c\u52a0\u5bc6\u8d27\u5e01\u3002NautilusTrader \u63d0\u4f9b\u4e86\u4e00\u4e2a\u9002\u914d\u5668\uff0c\u901a\u8fc7\u5176 Python \u5e93 ",(0,s.jsx)(n.code,{children:"ibapi"}),"\uff08",(0,s.jsx)(n.a,{href:"https://github.com/nautechsystems/ibapi",children:"https://github.com/nautechsystems/ibapi"}),"\uff09\u8c03\u7528 Trader Workstation\uff08TWS\uff09API\uff08",(0,s.jsx)(n.a,{href:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/",children:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/"}),"\uff09\u6765\u4e0e IB \u96c6\u6210\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["TWS API \u7528\u4e8e\u8fde\u63a5 IB \u7684\u72ec\u7acb\u4ea4\u6613\u5e94\u7528\u7a0b\u5e8f\uff1aTWS \u548c IB Gateway\u3002\u4e24\u8005\u5747\u53ef\u4ece IB \u5b98\u7f51\u4e0b\u8f7d\u3002\u5982\u679c\u4f60\u5c1a\u672a\u5b89\u88c5 TWS \u6216 IB Gateway\uff0c\u8bf7\u53c2\u9605\u300c\u521d\u59cb\u8bbe\u7f6e\u300d\u6307\u5357\uff08",(0,s.jsx)(n.a,{href:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/#tws-download",children:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/#tws-download"}),"\uff09\u3002\u5728 NautilusTrader \u4e2d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"InteractiveBrokersClient"})," \u4e0e\u5176\u4e2d\u4efb\u4e00\u5e94\u7528\u5efa\u7acb\u8fde\u63a5\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u53e6\u4e00\u79cd\u9009\u62e9\u662f\u4f7f\u7528 IB Gateway \u7684 Docker \u5316\u7248\u672c\uff08",(0,s.jsx)(n.a,{href:"https://github.com/gnzsnz/ib-gateway-docker",children:"https://github.com/gnzsnz/ib-gateway-docker"}),"\uff09\uff0c\u8fd9\u5bf9\u5728\u4e91\u7aef\u81ea\u52a8\u5316\u90e8\u7f72\u4ea4\u6613\u7b56\u7565\u5c24\u4e3a\u65b9\u4fbf\u3002\u8be5\u65b9\u6848\u8981\u6c42\u672c\u673a\u5b89\u88c5 Docker\uff08",(0,s.jsx)(n.a,{href:"https://www.docker.com/",children:"https://www.docker.com/"}),"\uff09\u4ee5\u53ca Python \u7684 ",(0,s.jsx)(n.code,{children:"docker"})," \u5305\uff08",(0,s.jsx)(n.a,{href:"https://pypi.org/project/docker/",children:"https://pypi.org/project/docker/"}),"\uff09\uff0cNautilusTrader \u5df2\u628a\u8be5\u5305\u4f5c\u4e3a\u53ef\u9009 extras \u4e00\u5e76\u63d0\u4f9b\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"\u72ec\u7acb\u7248\u7684 TWS \u4e0e IB Gateway \u5728\u542f\u52a8\u65f6\u9700\u8981\u624b\u52a8\u8f93\u5165\u7528\u6237\u540d\u3001\u5bc6\u7801\u53ca\u4ea4\u6613\u6a21\u5f0f\uff08live \u6216 paper\uff09\u3002Docker \u5316\u7684 IB Gateway \u5219\u53ef\u901a\u8fc7\u7a0b\u5e8f\u5316\u65b9\u5f0f\u5b8c\u6210\u8fd9\u4e9b\u6b65\u9aa4\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(n.p,{children:"\u8981\u5b89\u88c5\u5305\u542b Interactive Brokers\uff08\u4ee5\u53ca Docker\uff09\u652f\u6301\u7684 NautilusTrader\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'pip install --upgrade "nautilus_trader[ib,docker]"\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u4ece\u6e90\u7801\u6784\u5efa\u5e76\u5e0c\u671b\u5b89\u88c5\u5168\u90e8\u53ef\u9009\u9879\uff08\u5305\u62ec IB \u4e0e Docker\uff09\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"uv sync --all-extras\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["\u7531\u4e8e IB \u5b98\u65b9\u672a\u63d0\u4f9b ",(0,s.jsx)(n.code,{children:"ibapi"})," \u7684 wheel \u5305\uff0cNautilusTrader \u5728 PyPI \u4e0a\u5bf9\u5176\u8fdb\u884c\u4e86\u91cd\u6253\u5305\u53d1\u5e03\uff08",(0,s.jsx)(n.a,{href:"https://pypi.org/project/nautilus-ibapi/",children:"https://pypi.org/project/nautilus-ibapi/"}),"\uff09\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u5728\u4ed3\u5e93\u4e2d\u627e\u5230\u5b9e\u65f6\u793a\u4f8b\u811a\u672c\uff1a",(0,s.jsx)(n.a,{href:"https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/interactive_brokers/",children:"https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/interactive_brokers/"})]}),"\n",(0,s.jsx)(n.h2,{id:"\u5feb\u901f\u4e0a\u624b",children:"\u5feb\u901f\u4e0a\u624b"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5b9e\u73b0\u7b56\u7565\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u8fd0\u884c TWS\uff08Trader Workstation\uff09\u6216 IB Gateway\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e2a\u4eba\u51ed\u636e\u767b\u5f55\u4e0a\u8ff0\u4efb\u4e00\u72ec\u7acb\u5e94\u7528\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"DockerizedIBGateway"})," \u4ee5\u7f16\u7a0b\u65b9\u5f0f\u8fde\u63a5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8fde\u63a5\u65b9\u5f0f",children:"\u8fde\u63a5\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u4e3b\u8981\u6709\u4e24\u79cd\u8fde\u63a5 IB \u7684\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u8fde\u63a5\u5230\u5df2\u6709\u7684 TWS \u6216 IB Gateway \u5b9e\u4f8b"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 Docker \u5316\u7684 IB Gateway\uff08\u63a8\u8350\u7528\u4e8e\u81ea\u52a8\u5316\u90e8\u7f72\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u9ed8\u8ba4\u7aef\u53e3",children:"\u9ed8\u8ba4\u7aef\u53e3"}),"\n",(0,s.jsx)(n.p,{children:"\u6839\u636e\u8fd0\u884c\u7684\u5e94\u7528\u4e0e\u4ea4\u6613\u6a21\u5f0f\u4e0d\u540c\uff0cIB \u4f7f\u7528\u4e0d\u540c\u7684\u9ed8\u8ba4\u7aef\u53e3\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u5e94\u7528"}),(0,s.jsx)(n.th,{children:"\u6a21\u62df\u4ea4\u6613\uff08Paper\uff09"}),(0,s.jsx)(n.th,{children:"\u5b9e\u76d8\u4ea4\u6613\uff08Live\uff09"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TWS"}),(0,s.jsx)(n.td,{children:"7497"}),(0,s.jsx)(n.td,{children:"7496"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"IB Gateway"}),(0,s.jsx)(n.td,{children:"4002"}),(0,s.jsx)(n.td,{children:"4001"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\u8fde\u63a5\u5230\u5df2\u6709\u7684-gateway-\u6216-tws",children:"\u8fde\u63a5\u5230\u5df2\u6709\u7684 Gateway \u6216 TWS"}),"\n",(0,s.jsxs)(n.p,{children:["\u8fde\u63a5\u5230\u5df2\u6709\u5b9e\u4f8b\u65f6\uff0c\u9700\u8981\u5728 ",(0,s.jsx)(n.code,{children:"InteractiveBrokersDataClientConfig"})," \u548c ",(0,s.jsx)(n.code,{children:"InteractiveBrokersExecClientConfig"})," \u4e2d\u5206\u522b\u6307\u5b9a ",(0,s.jsx)(n.code,{children:"ibg_host"})," \u4e0e ",(0,s.jsx)(n.code,{children:"ibg_port"}),"\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersDataClientConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersExecClientConfig\n\n# \u9488\u5bf9 TWS \u6a21\u62df\u4ea4\u6613\u7684\u793a\u4f8b\uff08\u9ed8\u8ba4\u7aef\u53e3 7497\uff09\ndata_config = InteractiveBrokersDataClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,\n    ibg_client_id=1,\n)\n\nexec_config = InteractiveBrokersExecClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,\n    ibg_client_id=1,\n    account_id="DU123456",  # \u4f60\u7684\u6a21\u62df\u4ea4\u6613\u8d26\u6237 ID\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-docker-\u5316\u7684-ib-gateway",children:"\u4f7f\u7528 Docker \u5316\u7684 IB Gateway"}),"\n",(0,s.jsxs)(n.p,{children:["\u5bf9\u4e8e\u81ea\u52a8\u5316\u90e8\u7f72\uff0c\u63a8\u8350\u4f7f\u7528 Docker \u5316\u7684 Gateway\u3002\u5728\u5ba2\u6237\u7aef\u914d\u7f6e\u4e2d\u4f20\u5165 ",(0,s.jsx)(n.code,{children:"dockerized_gateway"}),"\uff08",(0,s.jsx)(n.code,{children:"DockerizedIBGatewayConfig"})," \u7684\u5b9e\u4f8b\uff09\uff0c\u56e0\u4e3a\u4e3b\u673a\u548c\u7aef\u53e3\u7531\u5bb9\u5668\u7ba1\u7406\uff0c\u65e0\u9700\u518d\u624b\u52a8\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"ibg_host"}),"/",(0,s.jsx)(n.code,{children:"ibg_port"}),"\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import DockerizedIBGatewayConfig\nfrom nautilus_trader.adapters.interactive_brokers.gateway import DockerizedIBGateway\n\ngateway_config = DockerizedIBGatewayConfig(\n    username="your_username",  # \u6216\u4f7f\u7528\u73af\u5883\u53d8\u91cf TWS_USERNAME\n    password="your_password",  # \u6216\u4f7f\u7528\u73af\u5883\u53d8\u91cf TWS_PASSWORD\n    trading_mode="paper",      # "paper" \u6216 "live"\n    read_only_api=True,         # \u5982\u9700\u4e0b\u5355\u5219\u8bbe\u4e3a False\n    timeout=300,                # \u542f\u52a8\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n)\n\n# \u9996\u6b21\u542f\u52a8\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u65f6\u95f4\ngateway = DockerizedIBGateway(config=gateway_config)\ngateway.start()\n\n# \u786e\u8ba4\u662f\u5426\u5df2\u767b\u5f55\nprint(gateway.is_logged_in(gateway.container))\n\n# \u67e5\u770b\u5bb9\u5668\u65e5\u5fd7\nprint(gateway.container.logs())\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u73af\u5883\u53d8\u91cf",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u901a\u8fc7\u5411 ",(0,s.jsx)(n.code,{children:"DockerizedIBGatewayConfig"})," \u4f20\u5165 ",(0,s.jsx)(n.code,{children:"username"})," \u4e0e ",(0,s.jsx)(n.code,{children:"password"}),"\uff0c\u6216\u8005\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf\u6765\u63d0\u4f9b\u51ed\u636e\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TWS_USERNAME"}),"\uff1aIB \u8d26\u6237\u7528\u6237\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TWS_PASSWORD"}),"\uff1aIB \u8d26\u6237\u5bc6\u7801"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TWS_ACCOUNT"}),"\uff1aIB \u8d26\u6237 ID\uff08\u4f5c\u4e3a ",(0,s.jsx)(n.code,{children:"account_id"})," \u7684\u56de\u9000\u503c\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8fde\u63a5\u7ba1\u7406",children:"\u8fde\u63a5\u7ba1\u7406"}),"\n",(0,s.jsx)(n.p,{children:"\u8be5\u9002\u914d\u5668\u63d0\u4f9b\u5065\u58ee\u7684\u8fde\u63a5\u7ba1\u7406\u529f\u80fd\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u81ea\u52a8\u91cd\u8fde\uff1a\u53ef\u901a\u8fc7\u73af\u5883\u53d8\u91cf ",(0,s.jsx)(n.code,{children:"IB_MAX_CONNECTION_ATTEMPTS"})," \u914d\u7f6e\u91cd\u8bd5\u6b21\u6570\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:["\u8fde\u63a5\u8d85\u65f6\uff1a\u53ef\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"connection_timeout"})," \u53c2\u6570\u8c03\u6574\uff08\u9ed8\u8ba4 300 \u79d2\uff09\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u8fde\u63a5\u770b\u95e8\u72d7\uff1a\u76d1\u63a7\u8fde\u63a5\u5065\u5eb7\u5e76\u5728\u9700\u8981\u65f6\u89e6\u53d1\u91cd\u8fde\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u4f18\u96c5\u7684\u9519\u8bef\u5904\u7406\uff1a\u5bf9\u5404\u79cd\u8fde\u63a5\u573a\u666f\u8fdb\u884c\u5206\u7c7b\u5904\u7406\u5e76\u63d0\u4f9b\u53cb\u597d\u7684\u9519\u8bef\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u6982\u89c8",children:"\u6982\u89c8"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Brokers \u9002\u914d\u5668\u4e0e IB \u7684 TWS API \u6df1\u5ea6\u96c6\u6210\uff0c\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a"}),"\n",(0,s.jsx)(n.h3,{id:"\u6838\u5fc3\u7ec4\u4ef6",children:"\u6838\u5fc3\u7ec4\u4ef6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersClient"}),"\uff1a\u6838\u5fc3\u5ba2\u6237\u7aef\uff0c\u57fa\u4e8e ",(0,s.jsx)(n.code,{children:"ibapi"})," \u6267\u884c TWS API \u8bf7\u6c42\uff0c\u8d1f\u8d23\u8fde\u63a5\u7ba1\u7406\u3001\u9519\u8bef\u5904\u7406\u4e0e API \u4ea4\u4e92\u534f\u8c03\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersDataClient"}),"\uff1a\u8fde\u63a5\u5230 Gateway\uff0c\u7528\u4e8e\u6d41\u5f0f\u63a5\u6536\u884c\u60c5\uff08Quotes\u3001Trades\u3001Bars\uff09\u7b49\u5e02\u573a\u6570\u636e\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersExecutionClient"}),"\uff1a\u8d1f\u8d23\u8d26\u6237\u4fe1\u606f\u3001\u8ba2\u5355\u7ba1\u7406\u4e0e\u4ea4\u6613\u6267\u884c\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProvider"}),"\uff1a\u68c0\u7d22\u4e0e\u7ba1\u7406\u5408\u7ea6/\u6807\u7684\u5b9a\u4e49\uff0c\u652f\u6301\u671f\u6743\u4e0e\u671f\u8d27\u94fe\u7684\u52a0\u8f7d\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"HistoricInteractiveBrokersClient"}),"\uff1a\u7528\u4e8e\u68c0\u7d22\u5386\u53f2\u6570\u636e\u4e0e\u5408\u7ea6\u4fe1\u606f\uff0c\u9002\u5408\u56de\u6d4b\u4e0e\u7814\u7a76\u4f7f\u7528\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u652f\u6301\u7ec4\u4ef6",children:"\u652f\u6301\u7ec4\u4ef6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DockerizedIBGateway"}),"\uff1a\u7ba1\u7406 Docker \u5316\u7684 IB Gateway \u5b9e\u4f8b\uff0c\u4fbf\u4e8e\u81ea\u52a8\u5316\u90e8\u7f72\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u7c7b\uff1a\u4e3a\u5404\u7ec4\u4ef6\u63d0\u4f9b\u8be6\u7ec6\u914d\u7f6e\u9879\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5de5\u5382\u7c7b\uff1a\u521b\u5efa\u5e76\u914d\u7f6e\u5ba2\u6237\u7aef\u5b9e\u4f8b\u6240\u9700\u7684\u4f9d\u8d56\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u652f\u6301\u7684\u8d44\u4ea7\u7c7b\u522b",children:"\u652f\u6301\u7684\u8d44\u4ea7\u7c7b\u522b"}),"\n",(0,s.jsx)(n.p,{children:"\u8be5\u9002\u914d\u5668\u652f\u6301\u901a\u8fc7 IB \u63d0\u4f9b\u7684\u4e3b\u8981\u8d44\u4ea7\u7c7b\u522b\u8fdb\u884c\u4ea4\u6613\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u80a1\u7968\u7c7b\uff1a\u80a1\u7968\u3001ETF\u3001\u4ee5\u53ca\u80a1\u7968\u671f\u6743"}),"\n",(0,s.jsx)(n.li,{children:"\u56fa\u5b9a\u6536\u76ca\u7c7b\uff1a\u503a\u5238\u4e0e\u503a\u5238\u57fa\u91d1"}),"\n",(0,s.jsx)(n.li,{children:"\u884d\u751f\u54c1\uff1a\u671f\u8d27\u3001\u671f\u6743\u4e0e\u6743\u8bc1"}),"\n",(0,s.jsx)(n.li,{children:"\u5916\u6c47\uff1a\u73b0\u8d27\u5916\u6c47\u4e0e\u8fdc\u671f"}),"\n",(0,s.jsx)(n.li,{children:"\u52a0\u5bc6\u8d27\u5e01\uff1a\u5982\u6bd4\u7279\u5e01\u3001\u4ee5\u592a\u574a\u7b49"}),"\n",(0,s.jsx)(n.li,{children:"\u5546\u54c1\uff1a\u5b9e\u7269\u5546\u54c1\u4e0e\u5546\u54c1\u671f\u8d27"}),"\n",(0,s.jsx)(n.li,{children:"\u6307\u6570\u7c7b\uff1a\u6307\u6570\u4ea7\u54c1\u4e0e\u6307\u6570\u671f\u6743"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"interactive-brokers-\u5ba2\u6237\u7aef",children:"Interactive Brokers \u5ba2\u6237\u7aef"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersClient"})," \u662f IB \u9002\u914d\u5668\u7684\u6838\u5fc3\uff0c\u8d1f\u8d23\u4e00\u7cfb\u5217\u5173\u952e\u804c\u80fd\uff0c\u5305\u62ec\u5efa\u7acb\u4e0e\u7ef4\u62a4\u8fde\u63a5\u3001\u5904\u7406 API \u9519\u8bef\u3001\u6267\u884c\u4ea4\u6613\u4ee5\u53ca\u83b7\u53d6\u884c\u60c5\u3001\u5408\u7ea6\u4e0e\u8d26\u6237\u7b49\u591a\u7c7b\u6570\u636e\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3a\u4fbf\u4e8e\u7ba1\u7406\u8fd9\u4e9b\u804c\u8d23\uff0c",(0,s.jsx)(n.code,{children:"InteractiveBrokersClient"})," \u91c7\u7528 mixin\uff08\u6df7\u5165\uff09\u67b6\u6784\uff0c\u5c06\u4e0d\u540c\u804c\u8d23\u62c6\u5206\u5230\u82e5\u5e72\u4e13\u95e8\u7684 mixin \u4e2d\uff0c\u4ece\u800c\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027\u4e0e\u6e05\u6670\u5ea6\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5ba2\u6237\u7aef\u67b6\u6784",children:"\u5ba2\u6237\u7aef\u67b6\u6784"}),"\n",(0,s.jsx)(n.p,{children:"\u5ba2\u6237\u7aef\u91c7\u7528 mixin \u67b6\u6784\uff0c\u6bcf\u4e2a mixin \u8d1f\u8d23 IB API \u7684\u4e00\u5757\u529f\u80fd\uff1a"}),"\n",(0,s.jsxs)(n.h4,{id:"\u8fde\u63a5\u7ba1\u7406interactivebrokersclientconnectionmixin",children:["\u8fde\u63a5\u7ba1\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientConnectionMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5efa\u7acb\u5e76\u7ef4\u62a4\u4e0e TWS/Gateway \u7684\u5957\u63a5\u5b57\u8fde\u63a5\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u8fde\u63a5\u8d85\u65f6\u4e0e\u91cd\u8fde\u903b\u8f91\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7ba1\u7406\u8fde\u63a5\u72b6\u6001\u4e0e\u5065\u5eb7\u76d1\u63a7\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u652f\u6301\u901a\u8fc7\u73af\u5883\u53d8\u91cf ",(0,s.jsx)(n.code,{children:"IB_MAX_CONNECTION_ATTEMPTS"})," \u914d\u7f6e\u91cd\u8fde\u5c1d\u8bd5\u6b21\u6570\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u9519\u8bef\u5904\u7406interactivebrokersclienterrormixin",children:["\u9519\u8bef\u5904\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientErrorMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u6240\u6709 API \u9519\u8bef\u4e0e\u8b66\u544a\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5c06\u9519\u8bef\u6309\u7c7b\u578b\u5206\u7c7b\uff08\u5ba2\u6237\u7aef\u9519\u8bef\u3001\u8fde\u901a\u6027\u95ee\u9898\u3001\u8bf7\u6c42\u9519\u8bef\u7b49\uff09\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u9488\u5bf9\u8ba2\u9605\u4e0e\u8bf7\u6c42\u7684\u7279\u5b9a\u9519\u8bef\u573a\u666f\u8fdb\u884c\u5904\u7406\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u63d0\u4f9b\u8be6\u5c3d\u7684\u9519\u8bef\u65e5\u5fd7\u4e0e\u8c03\u8bd5\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u8d26\u6237\u7ba1\u7406interactivebrokersclientaccountmixin",children:["\u8d26\u6237\u7ba1\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientAccountMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u68c0\u7d22\u8d26\u6237\u4fe1\u606f\u4e0e\u4f59\u989d\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7ba1\u7406\u6301\u4ed3\u6570\u636e\u4e0e\u6295\u8d44\u7ec4\u5408\u66f4\u65b0\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u591a\u8d26\u6237\u573a\u666f\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u4e0e\u8d26\u6237\u76f8\u5173\u7684\u901a\u77e5\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u5408\u7ea6\u6807\u7684\u7ba1\u7406interactivebrokersclientcontractmixin",children:["\u5408\u7ea6/\u6807\u7684\u7ba1\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientContractMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u68c0\u7d22\u5408\u7ea6\u8be6\u60c5\u4e0e\u89c4\u8303\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u6807\u7684\u641c\u7d22\u4e0e\u67e5\u627e\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7ba1\u7406\u5408\u7ea6\u9a8c\u8bc1\u4e0e\u6821\u9a8c\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u590d\u6742\u7684\u6807\u7684\u7c7b\u578b\uff08\u671f\u6743\u94fe\u3001\u671f\u8d27\u94fe\u7b49\uff09\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u884c\u60c5\u6570\u636e\u7ba1\u7406interactivebrokersclientmarketdatamixin",children:["\u884c\u60c5\u6570\u636e\u7ba1\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientMarketDataMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u5b9e\u65f6\u4e0e\u5386\u53f2\u884c\u60c5\u6570\u636e\u8ba2\u9605\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u62a5\u4ef7\uff08quotes\uff09\u3001\u6210\u4ea4\uff08trades\uff09\u4e0e K \u7ebf\uff08bars\uff09\u6570\u636e\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7ba1\u7406\u884c\u60c5\u6570\u636e\u7c7b\u578b\u8bbe\u7f6e\uff08\u5b9e\u65f6\u3001\u5ef6\u8fdf\u3001\u51bb\u7ed3\u7b49\uff09\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u9010\u7b14\uff08tick-by-tick\uff09\u6570\u636e\u4e0e\u5e02\u573a\u6df1\u5ea6\uff08market depth\uff09\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u8ba2\u5355\u7ba1\u7406interactivebrokersclientordermixin",children:["\u8ba2\u5355\u7ba1\u7406\uff08",(0,s.jsx)(n.code,{children:"InteractiveBrokersClientOrderMixin"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u8ba2\u5355\u4e0b\u5355\u3001\u4fee\u6539\u4e0e\u64a4\u5355\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5904\u7406\u8ba2\u5355\u72b6\u6001\u66f4\u65b0\u4e0e\u6210\u4ea4\u56de\u62a5\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u7ba1\u7406\u8ba2\u5355\u6821\u9a8c\u4e0e\u9519\u8bef\u5904\u7406\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u590d\u6742\u8ba2\u5355\u7c7b\u578b\u4e0e\u6761\u4ef6\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4e3b\u8981\u7279\u6027",children:"\u4e3b\u8981\u7279\u6027"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5f02\u6b65\u64cd\u4f5c\uff1a\u6240\u6709\u64cd\u4f5c\u5747\u57fa\u4e8e Python \u7684 asyncio \u5f02\u6b65\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u5065\u58ee\u7684\u9519\u8bef\u5904\u7406\uff1a\u5168\u9762\u7684\u9519\u8bef\u5206\u7c7b\u4e0e\u5904\u7406\u673a\u5236\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u8fde\u63a5\u5f39\u6027\uff1a\u53ef\u914d\u91cd\u8bd5\u903b\u8f91\u7684\u81ea\u52a8\u91cd\u8fde\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u6d88\u606f\u5904\u7406\uff1a\u9ad8\u541e\u5410\u573a\u666f\u4e0b\u7684\u9ad8\u6548\u6d88\u606f\u961f\u5217\u5904\u7406\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u72b6\u6001\u7ba1\u7406\uff1a\u5bf9\u8fde\u63a5\u3001\u8ba2\u9605\u4e0e\u8bf7\u6c42\u8fdb\u884c\u51c6\u786e\u8ddf\u8e2a\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5f53\u6392\u67e5 TWS API \u7684\u5165\u7ad9\u6d88\u606f\u95ee\u9898\u65f6\uff0c\u53ef\u4ee5\u4ece ",(0,s.jsx)(n.code,{children:"InteractiveBrokersClient._process_message"})," \u65b9\u6cd5\u5165\u624b\uff0c\u8be5\u65b9\u6cd5\u662f\u5904\u7406\u6765\u81ea API \u7684\u6240\u6709\u6d88\u606f\u7684\u4e3b\u8981\u5165\u53e3\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u6807\u8bc6\u7b26symbology",children:"\u6807\u8bc6\u7b26\uff08Symbology\uff09"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProvider"})," \u652f\u6301\u4e09\u79cd\u6784\u9020 ",(0,s.jsx)(n.code,{children:"InstrumentId"})," \u7684\u65b9\u6cd5\uff0c\u53ef\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProviderConfig"})," \u4e2d\u7684 ",(0,s.jsx)(n.code,{children:"symbology_method"})," \u679a\u4e3e\u6765\u914d\u7f6e\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6807\u8bc6\u7b26\u65b9\u6cd5",children:"\u6807\u8bc6\u7b26\u65b9\u6cd5"}),"\n",(0,s.jsxs)(n.h4,{id:"1-\u7b80\u5316\u6807\u8bc6\u6cd5ib_simplified--\u9ed8\u8ba4",children:["1. \u7b80\u5316\u6807\u8bc6\u6cd5\uff08",(0,s.jsx)(n.code,{children:"IB_SIMPLIFIED"}),"\uff09 \u2014 \u9ed8\u8ba4"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5f53 ",(0,s.jsx)(n.code,{children:"symbology_method"})," \u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"IB_SIMPLIFIED"}),"\uff08\u9ed8\u8ba4\uff09\u65f6\uff0c\u7cfb\u7edf\u4f7f\u7528\u76f4\u89c2\u4e14\u4fbf\u4e8e\u9605\u8bfb\u7684\u6807\u8bc6\u89c4\u5219\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:"\u6309\u8d44\u4ea7\u7c7b\u522b\u7684\u683c\u5f0f\u89c4\u5219\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5916\u6c47\uff08Forex\uff09\uff1a",(0,s.jsx)(n.code,{children:"{symbol}/{currency}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"EUR/USD.IDEALPRO"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u80a1\u7968\uff08Stocks\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}.{primaryExchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"localSymbol \u4e2d\u7684\u7a7a\u683c\u4f1a\u88ab\u66ff\u6362\u4e3a\u8fde\u5b57\u7b26"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"BF-B.NYSE"}),"\u3001",(0,s.jsx)(n.code,{children:"SPY.ARCA"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u671f\u8d27\uff08Futures\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e2a\u522b\u5408\u7ea6\u4f7f\u7528\u5355\u6570\u5b57\u5e74\u4efd"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"ESM4.CME"}),"\u3001",(0,s.jsx)(n.code,{children:"CLZ7.NYMEX"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u8fde\u7eed\u671f\u8d27\uff08Continuous Futures\uff09\uff1a",(0,s.jsx)(n.code,{children:"{symbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8868\u793a\u524d\u6708\u5408\u7ea6\uff0c\u81ea\u52a8\u6eda\u52a8"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"ES.CME"}),"\u3001",(0,s.jsx)(n.code,{children:"CL.NYMEX"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u671f\u8d27\u671f\u6743\uff08FOP\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u683c\u5f0f\uff1a",(0,s.jsx)(n.code,{children:"{symbol}{month}{year} {right}{strike}"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"ESM4 C4200.CME"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u671f\u6743\uff08Options\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"localSymbol \u4e2d\u7684\u7a7a\u683c\u5168\u90e8\u79fb\u9664"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"AAPL230217P00155000.SMART"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u6307\u6570\uff08Indices\uff09\uff1a",(0,s.jsx)(n.code,{children:"^{localSymbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"^SPX.CBOE"}),"\u3001",(0,s.jsx)(n.code,{children:"^NDX.NASDAQ"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u503a\u5238\uff08Bonds\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"912828XE8.SMART"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u52a0\u5bc6\u8d27\u5e01\uff08Cryptocurrencies\uff09\uff1a",(0,s.jsx)(n.code,{children:"{symbol}/{currency}.{exchange}"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"BTC/USD.PAXOS"}),"\u3001",(0,s.jsx)(n.code,{children:"ETH/USD.PAXOS"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"2-\u539f\u59cb\u6807\u8bc6\u6cd5ib_raw",children:["2. \u539f\u59cb\u6807\u8bc6\u6cd5\uff08",(0,s.jsx)(n.code,{children:"IB_RAW"}),"\uff09"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06 ",(0,s.jsx)(n.code,{children:"symbology_method"})," \u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"IB_RAW"})," \u65f6\uff0c\u4f1a\u91c7\u7528\u4e0e IB API \u5b57\u6bb5\u76f4\u63a5\u5bf9\u5e94\u7684\u4e25\u683c\u89e3\u6790\u89c4\u5219\uff0c\u9002\u7528\u4e8e\u5404\u79cd\u5730\u533a\u4e0e\u590d\u6742\u54c1\u79cd\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:"\u683c\u5f0f\u89c4\u5219\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5dee\u4ef7\u5408\u7ea6\uff08CFDs\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}={secType}.IBCFD"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u5927\u5b97\u5546\u54c1\uff08Commodities\uff09\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}={secType}.IBCMDTY"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u5176\u4ed6\u7c7b\u578b\u9ed8\u8ba4\uff1a",(0,s.jsx)(n.code,{children:"{localSymbol}={secType}.{exchange}"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"IBUS30=CFD.IBCFD"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"XAUUSD=CMDTY.IBCMDTY"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"AAPL=STK.SMART"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u6b64\u914d\u7f6e\u53ef\u786e\u4fdd\u6807\u7684\u6807\u8bc6\u7684\u660e\u786e\u6027\uff0c\u9002\u7528\u4e8e\u7b80\u5316\u89c4\u5219\u65e0\u6cd5\u6b63\u786e\u89e3\u6790\u7684\u56fd\u9645\u5316\u6216\u975e\u6807\u51c6\u6807\u7684\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"mic-\u4ea4\u6613\u6240\u4ee3\u7801\u8f6c\u6362",children:"MIC \u4ea4\u6613\u6240\u4ee3\u7801\u8f6c\u6362"}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u914d\u5668\u652f\u6301\u5c06 IB \u7684\u4ea4\u6613\u6240\u4ee3\u7801\u8f6c\u6362\u4e3a\u5e02\u573a\u6807\u8bc6\u7801\uff08MIC\uff09\uff0c\u4ee5\u4fbf\u7edf\u4e00\u8868\u793a\u4ea4\u6613\u573a\u6240\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"convert_exchange_to_mic_venue",children:(0,s.jsx)(n.code,{children:"convert_exchange_to_mic_venue"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06\u6b64\u9879\u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"True"})," \u65f6\uff0c\u9002\u914d\u5668\u4f1a\u81ea\u52a8\u628a IB \u7684\u4ea4\u6613\u6240\u4ee3\u7801\u6620\u5c04\u4e3a\u5bf9\u5e94\u7684 MIC\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"instrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    convert_exchange_to_mic_venue=True,  # \u542f\u7528 MIC \u8f6c\u6362\n    symbology_method=SymbologyMethod.IB_SIMPLIFIED,\n)\n"})}),"\n",(0,s.jsx)(n.p,{children:"MIC \u8f6c\u6362\u793a\u4f8b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CME"})," \u2192 ",(0,s.jsx)(n.code,{children:"XCME"}),"\uff08\u829d\u52a0\u54e5\u5546\u54c1\u4ea4\u6613\u6240\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NASDAQ"})," \u2192 ",(0,s.jsx)(n.code,{children:"XNAS"}),"\uff08\u7eb3\u65af\u8fbe\u514b\u4ea4\u6613\u6240\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"NYSE"})," \u2192 ",(0,s.jsx)(n.code,{children:"XNYS"}),"\uff08\u7ebd\u7ea6\u8bc1\u5238\u4ea4\u6613\u6240\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LSE"})," \u2192 ",(0,s.jsx)(n.code,{children:"XLON"}),"\uff08\u4f26\u6566\u8bc1\u5238\u4ea4\u6613\u6240\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"symbol_to_mic_venue",children:(0,s.jsx)(n.code,{children:"symbol_to_mic_venue"})}),"\n",(0,s.jsxs)(n.p,{children:["\u82e5\u9700\u81ea\u5b9a\u4e49\u6620\u5c04\uff0c\u53ef\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"symbol_to_mic_venue"})," \u5b57\u5178\u8986\u76d6\u9ed8\u8ba4\u6620\u5c04\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'instrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    convert_exchange_to_mic_venue=True,\n    symbol_to_mic_venue={\n        "ES": "XCME",  # \u6240\u6709 ES \u671f\u8d27/\u671f\u6743\u4f7f\u7528 CME \u7684 MIC\n        "SPY": "ARCX", # \u9488\u5bf9 SPY \u6307\u5b9a ARCA\n    },\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u652f\u6301\u7684\u5408\u7ea6\u683c\u5f0f",children:"\u652f\u6301\u7684\u5408\u7ea6\u683c\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u914d\u5668\u652f\u6301\u57fa\u4e8e Interactive Brokers \u5408\u7ea6\u89c4\u8303\u7684\u591a\u79cd\u5408\u7ea6\u683c\u5f0f\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"\u671f\u8d27\u6708\u4efd\u4ee3\u7801",children:"\u671f\u8d27\u6708\u4efd\u4ee3\u7801"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"F"})," = \u4e00\u6708\uff0c",(0,s.jsx)(n.strong,{children:"G"})," = \u4e8c\u6708\uff0c",(0,s.jsx)(n.strong,{children:"H"})," = \u4e09\u6708\uff0c",(0,s.jsx)(n.strong,{children:"J"})," = \u56db\u6708"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"K"})," = \u4e94\u6708\uff0c",(0,s.jsx)(n.strong,{children:"M"})," = \u516d\u6708\uff0c",(0,s.jsx)(n.strong,{children:"N"})," = \u4e03\u6708\uff0c",(0,s.jsx)(n.strong,{children:"Q"})," = \u516b\u6708"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"U"})," = \u4e5d\u6708\uff0c",(0,s.jsx)(n.strong,{children:"V"})," = \u5341\u6708\uff0c",(0,s.jsx)(n.strong,{children:"X"})," = \u5341\u4e00\u6708\uff0c",(0,s.jsx)(n.strong,{children:"Z"})," = \u5341\u4e8c\u6708"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u6309\u8d44\u4ea7\u7c7b\u522b\u652f\u6301\u7684\u4ea4\u6613\u6240",children:"\u6309\u8d44\u4ea7\u7c7b\u522b\u652f\u6301\u7684\u4ea4\u6613\u6240"}),"\n",(0,s.jsx)(n.p,{children:"\u671f\u8d27\u4ea4\u6613\u6240\uff08Futures Exchanges\uff09\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CME"}),", ",(0,s.jsx)(n.code,{children:"CBOT"}),", ",(0,s.jsx)(n.code,{children:"NYMEX"}),", ",(0,s.jsx)(n.code,{children:"COMEX"}),", ",(0,s.jsx)(n.code,{children:"KCBT"}),", ",(0,s.jsx)(n.code,{children:"MGE"}),", ",(0,s.jsx)(n.code,{children:"NYBOT"}),", ",(0,s.jsx)(n.code,{children:"SNFE"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u671f\u6743\u4ea4\u6613\u6240\uff08Options Exchanges\uff09\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SMART"}),"\uff08IB \u7684\u667a\u80fd\u8def\u7531\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5916\u6c47\u4ea4\u6613\u6240\uff08Forex Exchanges\uff09\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"IDEALPRO"}),"\uff08IB \u7684\u5916\u6c47\u5e73\u53f0\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u52a0\u5bc6\u8d27\u5e01\u4ea4\u6613\u6240\uff08Cryptocurrency Exchanges\uff09\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"PAXOS"}),"\uff08IB \u7684\u52a0\u5bc6\u8d27\u5e01\u5e73\u53f0\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"CFD/\u5546\u54c1\u4ea4\u6613\u6240\uff08CFD/Commodity Exchanges\uff09\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"IBCFD"}),", ",(0,s.jsx)(n.code,{children:"IBCMDTY"}),"\uff08IB \u7684\u5185\u90e8\u8def\u7531\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6807\u8bc6\u65b9\u6cd5",children:"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6807\u8bc6\u65b9\u6cd5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5bf9\u5927\u591a\u6570\u573a\u666f\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"IB_SIMPLIFIED"}),"\uff08\u9ed8\u8ba4\uff09\uff0c\u5b83\u80fd\u751f\u6210\u6e05\u6670\u4e14\u6613\u8bfb\u7684 InstrumentId"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5728\u5904\u7406\u590d\u6742\u7684\u56fd\u9645\u5316\u5408\u7ea6\u6216\u7b80\u5316\u89c4\u5219\u5931\u6548\u65f6\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"IB_RAW"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u82e5\u9700\u5408\u89c4\u6216\u6570\u636e\u4e00\u81f4\u6027\uff0c\u8bf7\u542f\u7528 ",(0,s.jsx)(n.code,{children:"convert_exchange_to_mic_venue"})," \u4ee5\u83b7\u5f97\u6807\u51c6\u5316\u7684 MIC \u4ee3\u7801"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5408\u7ea6instruments\u4e0e-contract",children:"\u5408\u7ea6\uff08Instruments\uff09\u4e0e Contract"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 Interactive Brokers \u4e2d\uff0cNautilusTrader \u7684 ",(0,s.jsx)(n.code,{children:"Instrument"})," \u5bf9\u5e94\u4e8e IB \u7684 Contract\uff08\u5408\u7ea6\uff09\u3002\u8be5\u9002\u914d\u5668\u5904\u7406\u4e24\u7c7b\u5408\u7ea6\u8868\u793a\uff1a"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5408\u7ea6\u7c7b\u578b",children:"\u5408\u7ea6\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.h4,{id:"\u57fa\u7840\u5408\u7ea6ibcontract",children:["\u57fa\u7840\u5408\u7ea6\uff08",(0,s.jsx)(n.code,{children:"IBContract"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5305\u542b\u5408\u7ea6\u7684\u57fa\u672c\u8bc6\u522b\u5b57\u6bb5"}),"\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u5408\u7ea6\u641c\u7d22\u4e0e\u57fa\u7840\u64cd\u4f5c"}),"\n",(0,s.jsxs)(n.li,{children:["\u65e0\u6cd5\u76f4\u63a5\u8f6c\u6362\u4e3a NautilusTrader \u7684 ",(0,s.jsx)(n.code,{children:"Instrument"})]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"\u5408\u7ea6\u8be6\u60c5ibcontractdetails",children:["\u5408\u7ea6\u8be6\u60c5\uff08",(0,s.jsx)(n.code,{children:"IBContractDetails"}),"\uff09"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5305\u542b\u66f4\u5168\u9762\u7684\u5408\u7ea6\u4fe1\u606f\uff0c\u5305\u62ec\uff1a","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u7684\u8ba2\u5355\u7c7b\u578b"}),"\n",(0,s.jsx)(n.li,{children:"\u4ea4\u6613\u65f6\u95f4\u4e0e\u65e5\u5386"}),"\n",(0,s.jsx)(n.li,{children:"\u4fdd\u8bc1\u91d1\u8981\u6c42"}),"\n",(0,s.jsx)(n.li,{children:"\u4ef7\u683c\u523b\u5ea6\u4e0e\u4e58\u6570"}),"\n",(0,s.jsx)(n.li,{children:"\u884c\u60c5\u6743\u9650"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u53ef\u8f6c\u6362\u4e3a NautilusTrader \u7684 ",(0,s.jsx)(n.code,{children:"Instrument"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u4ea4\u6613\u64cd\u4f5c\u901a\u5e38\u9700\u8981 ",(0,s.jsx)(n.code,{children:"IBContractDetails"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5408\u7ea6\u67e5\u8be2",children:"\u5408\u7ea6\u67e5\u8be2"}),"\n",(0,s.jsxs)(n.p,{children:["\u6b32\u67e5\u8be2\u5408\u7ea6\u4fe1\u606f\uff0c\u53ef\u4f7f\u7528 IB \u7684 Contract Information Center\uff08",(0,s.jsx)(n.a,{href:"https://pennies.interactivebrokers.com/cstools/contract_info/",children:"https://pennies.interactivebrokers.com/cstools/contract_info/"}),"\uff09\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u52a0\u8f7d\u5408\u7ea6",children:"\u52a0\u8f7d\u5408\u7ea6"}),"\n",(0,s.jsx)(n.p,{children:"\u52a0\u8f7d\u5408\u7ea6\u4e3b\u8981\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsxs)(n.h4,{id:"1-\u4f7f\u7528-load_ids\u63a8\u8350",children:["1. \u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"load_ids"}),"\uff08\u63a8\u8350\uff09"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5927\u591a\u6570\u573a\u666f\u4e0b\uff0c\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"symbology_method=SymbologyMethod.IB_SIMPLIFIED"}),"\uff08\u9ed8\u8ba4\uff09\u642d\u914d ",(0,s.jsx)(n.code,{children:"load_ids"})," \u80fd\u5f97\u5230\u6e05\u6670\u4e14\u76f4\u89c2\u7684\u6807\u8bc6\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersInstrumentProviderConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import SymbologyMethod\n\ninstrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    symbology_method=SymbologyMethod.IB_SIMPLIFIED,\n    load_ids=frozenset([\n        "EUR/USD.IDEALPRO",    # \u5916\u6c47\n        "SPY.ARCA",            # \u80a1\u7968\n        "ESM24.CME",           # \u671f\u8d27\uff08\u4e2a\u522b\u5408\u7ea6\uff09\n        "BTC/USD.PAXOS",       # \u52a0\u5bc6\u8d27\u5e01\n        "^SPX.CBOE",           # \u6307\u6570\n    ]),\n)\n'})}),"\n",(0,s.jsxs)(n.h4,{id:"2-\u4f7f\u7528-load_contracts\u5904\u7406\u590d\u6742\u5408\u7ea6",children:["2. \u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"load_contracts"}),"\uff08\u5904\u7406\u590d\u6742\u5408\u7ea6\uff09"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5bf9\u4e8e\u671f\u6743\u94fe\u3001\u671f\u8d27\u94fe\u7b49\u590d\u6742\u573a\u666f\uff0c\u53ef\u901a\u8fc7\u4f20\u5165 ",(0,s.jsx)(n.code,{children:"IBContract"})," \u5b9e\u4f8b\u5230 ",(0,s.jsx)(n.code,{children:"load_contracts"})," \u8fdb\u884c\u52a0\u8f7d\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBContract\n\n# \u4e3a\u6307\u5b9a\u5230\u671f\u65e5\u52a0\u8f7d\u671f\u6743\u94fe\noptions_chain_expiry = IBContract(\n    secType="IND",\n    symbol="SPX",\n    exchange="CBOE",\n    build_options_chain=True,\n    lastTradeDateOrContractMonth=\'20240718\',\n)\n\n# \u6309\u5230\u671f\u65e5\u8303\u56f4\u52a0\u8f7d\u671f\u6743\u94fe\noptions_chain_range = IBContract(\n    secType="IND",\n    symbol="SPX",\n    exchange="CBOE",\n    build_options_chain=True,\n    min_expiry_days=0,\n    max_expiry_days=30,\n)\n\n# \u52a0\u8f7d\u671f\u8d27\u94fe\nfutures_chain = IBContract(\n    secType="CONTFUT",\n    exchange="CME",\n    symbol="ES",\n    build_futures_chain=True,\n)\n\ninstrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    load_contracts=frozenset([\n        options_chain_expiry,\n        options_chain_range,\n        futures_chain,\n    ]),\n)\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"\u6309\u8d44\u4ea7\u7c7b\u522b\u7684-ibcontract-\u793a\u4f8b",children:["\u6309\u8d44\u4ea7\u7c7b\u522b\u7684 ",(0,s.jsx)(n.code,{children:"IBContract"})," \u793a\u4f8b"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from nautilus_trader.adapters.interactive_brokers.common import IBContract\n\n# \u80a1\u7968\nIBContract(secType='STK', exchange='SMART', primaryExchange='ARCA', symbol='SPY')\nIBContract(secType='STK', exchange='SMART', primaryExchange='NASDAQ', symbol='AAPL')\n\n# \u503a\u5238\nIBContract(secType='BOND', secIdType='ISIN', secId='US03076KAA60')\nIBContract(secType='BOND', secIdType='CUSIP', secId='912828XE8')\n\n# \u5355\u5f20\u671f\u6743\nIBContract(secType='OPT', exchange='SMART', symbol='SPY',\n           lastTradeDateOrContractMonth='20251219', strike=500, right='C')\n\n# \u671f\u6743\u94fe\uff08\u52a0\u8f7d\u6240\u6709\u884c\u6743\u4ef7/\u5230\u671f\u65e5\uff09\nIBContract(secType='STK', exchange='SMART', primaryExchange='ARCA', symbol='SPY',\n           build_options_chain=True, min_expiry_days=10, max_expiry_days=60)\n\n# \u5dee\u4ef7\u5408\u7ea6\uff08CFD\uff09\nIBContract(secType='CFD', symbol='IBUS30')\nIBContract(secType='CFD', symbol='DE40EUR', exchange='SMART')\n\n# \u5355\u5f20\u671f\u8d27\nIBContract(secType='FUT', exchange='CME', symbol='ES',\n           lastTradeDateOrContractMonth='20240315')\n\n# \u671f\u8d27\u94fe\uff08\u52a0\u8f7d\u6240\u6709\u5230\u671f\u65e5\uff09\nIBContract(secType='CONTFUT', exchange='CME', symbol='ES', build_futures_chain=True)\n\n# \u671f\u8d27\u671f\u6743\uff08FOP\uff09- \u5355\u5f20\nIBContract(secType='FOP', exchange='CME', symbol='ES',\n           lastTradeDateOrContractMonth='20240315', strike=4200, right='C')\n\n# \u671f\u8d27\u671f\u6743\u94fe\uff08\u52a0\u8f7d\u6240\u6709\u884c\u6743\u4ef7/\u5230\u671f\u65e5\uff09\nIBContract(secType='CONTFUT', exchange='CME', symbol='ES',\n           build_options_chain=True, min_expiry_days=7, max_expiry_days=60)\n\n# \u5916\u6c47\nIBContract(secType='CASH', exchange='IDEALPRO', symbol='EUR', currency='USD')\nIBContract(secType='CASH', exchange='IDEALPRO', symbol='GBP', currency='JPY')\n\n# \u52a0\u5bc6\u8d27\u5e01\nIBContract(secType='CRYPTO', symbol='BTC', exchange='PAXOS', currency='USD')\nIBContract(secType='CRYPTO', symbol='ETH', exchange='PAXOS', currency='USD')\n\n# \u6307\u6570\nIBContract(secType='IND', symbol='SPX', exchange='CBOE')\nIBContract(secType='IND', symbol='NDX', exchange='NASDAQ')\n\n# \u5546\u54c1\nIBContract(secType='CMDTY', symbol='XAUUSD', exchange='SMART')\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879",children:"\u9ad8\u7ea7\u914d\u7f6e\u9009\u9879"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u4f7f\u7528\u81ea\u5b9a\u4e49\u4ea4\u6613\u6240\u7684\u671f\u6743\u94fe\nIBContract(\n    secType="STK",\n    symbol="AAPL",\n    exchange="SMART",\n    primaryExchange="NASDAQ",\n    build_options_chain=True,\n    options_chain_exchange="CBOE",  # \u4f7f\u7528 CBOE \u800c\u975e SMART \u6765\u52a0\u8f7d\u671f\u6743\n    min_expiry_days=7,\n    max_expiry_days=45,\n)\n\n# \u6307\u5b9a\u6708\u4efd\u7684\u671f\u8d27\u94fe\nIBContract(\n    secType="CONTFUT",\n    exchange="NYMEX",\n    symbol="CL",  # \u539f\u6cb9\n    build_futures_chain=True,\n    min_expiry_days=30,\n    max_expiry_days=180,\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u8fde\u7eed\u671f\u8d27continuous-futures",children:"\u8fde\u7eed\u671f\u8d27\uff08Continuous futures\uff09"}),"\n",(0,s.jsxs)(n.p,{children:["\u5bf9\u4e8e\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"secType='CONTFUT'"})," \u7684\u8fde\u7eed\u671f\u8d27\uff0c\u9002\u914d\u5668\u53ea\u4f7f\u7528\u7b26\u53f7\u4e0e\u4ea4\u6613\u6240\u6765\u751f\u6210 InstrumentId\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# \u8fde\u7eed\u671f\u8d27\u793a\u4f8b\nIBContract(secType='CONTFUT', exchange='CME', symbol='ES')  # \u2192 ES.CME\nIBContract(secType='CONTFUT', exchange='NYMEX', symbol='CL') # \u2192 CL.NYMEX\n\n# \u542f\u7528 MIC \u8f6c\u6362\u65f6\ninstrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    convert_exchange_to_mic_venue=True,\n)\n# \u7ed3\u679c\u4e3a\uff1a\n# ES.XCME\uff08\u4ee3\u66ff ES.CME\uff09\n# CL.XNYM\uff08\u4ee3\u66ff CL.NYMEX\uff09\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fde\u7eed\u671f\u8d27 vs \u5355\u5f20\u671f\u8d27\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u8fde\u7eed\uff08Continuous\uff09\uff1a",(0,s.jsx)(n.code,{children:"ES.CME"})," \u2014 \u8868\u793a\u524d\u6708\u5408\u7ea6\u5e76\u81ea\u52a8\u6eda\u52a8"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5355\u5f20\uff08Individual\uff09\uff1a",(0,s.jsx)(n.code,{children:"ESM4.CME"})," \u2014 \u6307\u5b9a\u7684 2024 \u5e74 3 \u6708\u5408\u7ea6"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["\u5728\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"build_options_chain=True"})," \u6216 ",(0,s.jsx)(n.code,{children:"build_futures_chain=True"})," \u65f6\uff0c\u5e94\u4e3a\u57fa\u7840\u5408\u7ea6\u6307\u5b9a ",(0,s.jsx)(n.code,{children:"secType"})," \u4e0e ",(0,s.jsx)(n.code,{children:"symbol"}),"\uff1b\u9002\u914d\u5668\u4f1a\u5728\u6307\u5b9a\u7684\u5230\u671f\u8303\u56f4\u5185\u81ea\u52a8\u53d1\u73b0\u5e76\u52a0\u8f7d\u6240\u6709\u76f8\u5173\u7684\u884d\u751f\u5408\u7ea6\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u671f\u6743\u4ef7\u5deeoption-spreads",children:"\u671f\u6743\u4ef7\u5dee\uff08Option spreads\uff09"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Brokers \u901a\u8fc7 BAG \u5408\u7ea6\u652f\u6301\u671f\u6743\u4ef7\u5dee\uff08spreads\uff09\uff0c\u5c06\u591a\u4e2a\u671f\u6743\u817f\u7ec4\u5408\u6210\u4e00\u4e2a\u53ef\u4ea4\u6613\u5408\u7ea6\u3002NautilusTrader \u4e3a\u521b\u5efa\u3001\u52a0\u8f7d\u53ca\u4ea4\u6613\u4ef7\u5dee\u63d0\u4f9b\u4e86\u5b8c\u6574\u652f\u6301\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u521b\u5efa\u671f\u6743\u4ef7\u5dee\u7684-instrumentid",children:"\u521b\u5efa\u671f\u6743\u4ef7\u5dee\u7684 InstrumentId"}),"\n",(0,s.jsxs)(n.p,{children:["\u671f\u6743\u4ef7\u5dee\u53ef\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"InstrumentId.new_spread()"})," \u65b9\u6cd5\u521b\u5efa\uff0c\u8be5\u65b9\u6cd5\u5c06\u5404\u817f\u53ca\u5176\u6bd4\u4f8b\u7ec4\u5408\u8d77\u6765\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.model.identifiers import InstrumentId\n\n# \u521b\u5efa\u5355\u4e2a\u671f\u6743\u817f\u7684 InstrumentId\ncall_leg = InstrumentId.from_str("SPY C400.SMART")\nput_leg = InstrumentId.from_str("SPY P390.SMART")\n\n# \u521b\u5efa 1:1 \u7684\u770b\u6da8\u4ef7\u5dee\uff08\u4e70\u5165\u770b\u6da8\uff0c\u5356\u51fa\u770b\u6da8\uff09\ncall_spread_id = InstrumentId.new_spread([\n    (call_leg, 1),   # \u591a\u5934 1 \u5f20\n    (put_leg, -1),   # \u7a7a\u5934 1 \u5f20\n])\n\n# \u521b\u5efa 1:2 \u7684\u6bd4\u4f8b\u4ef7\u5dee\nratio_spread_id = InstrumentId.new_spread([\n    (call_leg, 1),   # \u591a\u5934 1 \u5f20\n    (put_leg, 2),    # \u591a\u5934 2 \u5f20\n])\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u52a8\u6001\u52a0\u8f7d\u4ef7\u5dee",children:"\u52a8\u6001\u52a0\u8f7d\u4ef7\u5dee"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u4ea4\u6613\u6216\u8ba2\u9605\u884c\u60c5\u524d\uff0c\u5fc5\u987b\u5148\u8bf7\u6c42\u52a0\u8f7d\u4ef7\u5dee\u5408\u7ea6\u3002\u53ef\u5728\u7b56\u7565\u4e2d\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"request_instrument()"})," \u52a8\u6001\u52a0\u8f7d\u4ef7\u5dee\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u5728\u7b56\u7565\u7684 on_start \u65b9\u6cd5\u4e2d\ndef on_start(self):\n    # \u8bf7\u6c42\u52a0\u8f7d\u4ef7\u5dee\u5408\u7ea6\n    self.request_instrument(spread_id)\n\ndef on_instrument(self, instrument):\n    # \u5904\u7406\u5df2\u52a0\u8f7d\u7684\u4ef7\u5dee\u5408\u7ea6\n    self.log.info(f"Loaded spread: {instrument.id}")\n\n    # \u73b0\u5728\u53ef\u4ee5\u8ba2\u9605\u884c\u60c5\n    self.subscribe_quote_ticks(instrument.id)\n\n    # \u5e76\u4e0b\u5355\n    order = self.order_factory.market(\n        instrument_id=instrument.id,\n        order_side=OrderSide.BUY,\n        quantity=instrument.make_qty(1),\n        time_in_force=TimeInForce.DAY,\n    )\n    self.submit_order(order)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u4ef7\u5dee\u4ea4\u6613\u8981\u6c42",children:"\u4ef7\u5dee\u4ea4\u6613\u8981\u6c42"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5148\u52a0\u8f7d\u5404\u4e2a\u817f\uff08Load individual legs first\uff09\uff1a\u786e\u4fdd\u4ef7\u5dee\u7684\u7ec4\u6210\u817f\u90fd\u5df2\u53ef\u7528\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u8bf7\u6c42\u52a0\u8f7d\u4ef7\u5dee\u5408\u7ea6\uff08Request the spread instrument\uff09\uff1a\u5728\u4ea4\u6613\u524d\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"request_instrument()"}),"\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u8ba2\u9605\u884c\u60c5\uff08Subscribe to market data\uff09\uff1a\u4ef7\u5dee\u52a0\u8f7d\u540e\u518d\u8bf7\u6c42\u62a5\u4ef7\u9010\u7b14\u6570\u636e\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u4e0b\u5355\uff08Place orders\uff09\uff1a\u4ef7\u5dee\u53ef\u7528\u540e\u53ef\u4f7f\u7528\u4efb\u610f\u8ba2\u5355\u7c7b\u578b\u8fdb\u884c\u4ea4\u6613\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5386\u53f2\u6570\u636e\u4e0e\u56de\u6d4b",children:"\u5386\u53f2\u6570\u636e\u4e0e\u56de\u6d4b"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"HistoricInteractiveBrokersClient"})," \u63d0\u4f9b\u4e86\u4ece Interactive Brokers \u83b7\u53d6\u5386\u53f2\u6570\u636e\u7684\u5b8c\u6574\u65b9\u6cd5\uff0c\u9002\u7528\u4e8e\u56de\u6d4b\u4e0e\u7814\u7a76\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b",children:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"K \u7ebf\uff08Bar data\uff09\uff1a\u5e26\u65f6\u95f4\u3001\u9010\u7b14\u4e0e\u6210\u4ea4\u91cf\u805a\u5408\u7684 OHLCV \u6570\u636e"}),"\n",(0,s.jsx)(n.li,{children:"\u9010\u7b14\uff08Tick data\uff09\uff1a\u4ea4\u6613\u9010\u7b14\u4e0e\u62a5\u4ef7\u9010\u7b14\u6570\u636e\uff0c\u7cbe\u5ea6\u53ef\u8fbe\u5fae\u79d2"}),"\n",(0,s.jsx)(n.li,{children:"\u5408\u7ea6\u6570\u636e\uff08Instrument data\uff09\uff1a\u5b8c\u6574\u7684\u5408\u7ea6\u89c4\u683c\u4e0e\u4ea4\u6613\u89c4\u5219"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5386\u53f2\u6570\u636e\u5ba2\u6237\u7aef",children:"\u5386\u53f2\u6570\u636e\u5ba2\u6237\u7aef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.historical.client import HistoricInteractiveBrokersClient\nfrom ibapi.common import MarketDataTypeEnum\n\n# \u521d\u59cb\u5316\u5ba2\u6237\u7aef\nclient = HistoricInteractiveBrokersClient(\n    host="127.0.0.1",\n    port=7497,\n    client_id=1,\n    market_data_type=MarketDataTypeEnum.DELAYED_FROZEN,  # \u82e5\u65e0\u8ba2\u9605\u5219\u4f7f\u7528\u5ef6\u8fdf\u51bb\u7ed3\u6570\u636e\n    log_level="INFO"\n)\n\n# \u8fde\u63a5\u5230 TWS/Gateway\nawait client.connect()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u83b7\u53d6\u5408\u7ea6\u4fe1\u606f",children:"\u83b7\u53d6\u5408\u7ea6\u4fe1\u606f"}),"\n",(0,s.jsx)(n.h4,{id:"\u57fa\u672c\u5408\u7ea6\u68c0\u7d22",children:"\u57fa\u672c\u5408\u7ea6\u68c0\u7d22"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBContract\n\n# \u5b9a\u4e49\u5408\u7ea6\u5217\u8868\ncontracts = [\n    IBContract(secType="STK", symbol="AAPL", exchange="SMART", primaryExchange="NASDAQ"),\n    IBContract(secType="STK", symbol="MSFT", exchange="SMART", primaryExchange="NASDAQ"),\n    IBContract(secType="CASH", symbol="EUR", currency="USD", exchange="IDEALPRO"),\n]\n\n# \u8bf7\u6c42\u5408\u7ea6\u5b9a\u4e49\ninstruments = await client.request_instruments(contracts=contracts)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u4e0b\u8f7d\u671f\u6743\u94fe\u5e76\u4fdd\u5b58\u5230-catalog",children:"\u4e0b\u8f7d\u671f\u6743\u94fe\u5e76\u4fdd\u5b58\u5230 Catalog"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728\u7b56\u7565\u4e2d\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"request_instruments"})," \u4e0b\u8f7d\u6574\u6761\u671f\u6743\u94fe\uff0c\u5e76\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"update_catalog=True"})," \u5c06\u6570\u636e\u4fdd\u5b58\u5230 Catalog\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u5728\u7b56\u7565\u7684 on_start \u65b9\u6cd5\u4e2d\ndef on_start(self):\n    self.request_instruments(\n        venue=IB_VENUE,\n        update_catalog=True,\n        params={\n            "update_catalog": True,\n            "ib_contracts": (\n                # SPY \u671f\u6743\n                {\n                    "secType": "STK",\n                    "symbol": "SPY",\n                    "exchange": "SMART",\n                    "primaryExchange": "ARCA",\n                    "build_options_chain": True,\n                    "min_expiry_days": 7,\n                    "max_expiry_days": 30,\n                },\n                # QQQ \u671f\u6743\n                {\n                    "secType": "STK",\n                    "symbol": "QQQ",\n                    "exchange": "SMART",\n                    "primaryExchange": "NASDAQ",\n                    "build_options_chain": True,\n                    "min_expiry_days": 7,\n                    "max_expiry_days": 30,\n                },\n                # ES \u671f\u8d27\u671f\u6743\n                {\n                    "secType": "CONTFUT",\n                    "exchange": "CME",\n                    "symbol": "ES",\n                    "build_options_chain": True,\n                    "min_expiry_days": 0,\n                    "max_expiry_days": 60,\n                },\n            ),\n        },\n    )\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u8bf7\u6c42\u5386\u53f2-k-\u7ebf",children:"\u8bf7\u6c42\u5386\u53f2 K \u7ebf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import datetime\n\n# \u8bf7\u6c42\u5386\u53f2 K \u7ebf\nbars = await client.request_bars(\n    bar_specifications=[\n        "1-MINUTE-LAST",    # 1 \u5206\u949f K \u7ebf\uff0c\u4f7f\u7528\u6700\u65b0\u4ef7\n        "5-MINUTE-MID",     # 5 \u5206\u949f K \u7ebf\uff0c\u4f7f\u7528\u4e2d\u95f4\u4ef7\n        "1-HOUR-LAST",      # 1 \u5c0f\u65f6 K \u7ebf\uff0c\u4f7f\u7528\u6700\u65b0\u4ef7\n        "1-DAY-LAST",       # \u65e5\u7ebf\uff0c\u4f7f\u7528\u6700\u65b0\u4ef7\n    ],\n    start_date_time=datetime.datetime(2023, 11, 1, 9, 30),\n    end_date_time=datetime.datetime(2023, 11, 6, 16, 30),\n    tz_name="America/New_York",\n    contracts=contracts,\n    use_rth=True,  # \u4ec5\u5e38\u89c4\u4ea4\u6613\u65f6\u6bb5\n    timeout=120,   # \u8bf7\u6c42\u8d85\u65f6\uff08\u79d2\uff09\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u8bf7\u6c42\u5386\u53f2\u9010\u7b14",children:"\u8bf7\u6c42\u5386\u53f2\u9010\u7b14"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u8bf7\u6c42\u5386\u53f2\u9010\u7b14\u6570\u636e\nticks = await client.request_ticks(\n    tick_types=["TRADES", "BID_ASK"],  # \u6210\u4ea4\u9010\u7b14\u4e0e\u4e70\u5356\u4ef7\u9010\u7b14\n    start_date_time=datetime.datetime(2023, 11, 6, 9, 30),\n    end_date_time=datetime.datetime(2023, 11, 6, 16, 30),\n    tz_name="America/New_York",\n    contracts=contracts,\n    use_rth=True,\n    timeout=120,\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"k-\u7ebf\u89c4\u683c",children:"K \u7ebf\u89c4\u683c"}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u914d\u5668\u652f\u6301\u591a\u79cd K \u7ebf\u89c4\u683c\uff1a"}),"\n",(0,s.jsx)(n.h4,{id:"\u65f6\u95f4\u578b-k-\u7ebf",children:"\u65f6\u95f4\u578b K \u7ebf"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"1-SECOND-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"5-SECOND-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"10-SECOND-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"15-SECOND-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"30-SECOND-LAST"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"1-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"2-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"3-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"5-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"10-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"15-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"20-MINUTE-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"30-MINUTE-LAST"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"1-HOUR-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"2-HOUR-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"3-HOUR-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"4-HOUR-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"8-HOUR-LAST"'})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'"1-DAY-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"1-WEEK-LAST"'}),", ",(0,s.jsx)(n.code,{children:'"1-MONTH-LAST"'})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u4ef7\u683c\u7c7b\u578b",children:"\u4ef7\u683c\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LAST"})," - \u6700\u65b0\u6210\u4ea4\u4ef7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"MID"})," - \u4e70\u5356\u4ef7\u4e2d\u95f4\u4ef7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"BID"})," - \u4e70\u4ef7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ASK"})," - \u5356\u4ef7"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import asyncio\nimport datetime\nfrom nautilus_trader.adapters.interactive_brokers.common import IBContract\nfrom nautilus_trader.adapters.interactive_brokers.historical.client import HistoricInteractiveBrokersClient\nfrom nautilus_trader.persistence.catalog import ParquetDataCatalog\n\n\nasync def download_historical_data():\n    # \u521d\u59cb\u5316\u5ba2\u6237\u7aef\n    client = HistoricInteractiveBrokersClient(\n        host="127.0.0.1",\n        port=7497,\n        client_id=5,\n    )\n\n    # \u8fde\u63a5\n    await client.connect()\n    await asyncio.sleep(2)  # \u7b49\u5f85\u8fde\u63a5\u7a33\u5b9a\n\n    # \u5b9a\u4e49\u5408\u7ea6\n    contracts = [\n        IBContract(secType="STK", symbol="AAPL", exchange="SMART", primaryExchange="NASDAQ"),\n        IBContract(secType="CASH", symbol="EUR", currency="USD", exchange="IDEALPRO"),\n    ]\n\n    # \u8bf7\u6c42\u5408\u7ea6\n    instruments = await client.request_instruments(contracts=contracts)\n\n    # \u8bf7\u6c42\u5386\u53f2 K \u7ebf\n    bars = await client.request_bars(\n        bar_specifications=["1-HOUR-LAST", "1-DAY-LAST"],\n        start_date_time=datetime.datetime(2023, 11, 1, 9, 30),\n        end_date_time=datetime.datetime(2023, 11, 6, 16, 30),\n        tz_name="America/New_York",\n        contracts=contracts,\n        use_rth=True,\n    )\n\n    # \u8bf7\u6c42\u9010\u7b14\u6570\u636e\n    ticks = await client.request_ticks(\n        tick_types=["TRADES"],\n        start_date_time=datetime.datetime(2023, 11, 6, 14, 0),\n        end_date_time=datetime.datetime(2023, 11, 6, 15, 0),\n        tz_name="America/New_York",\n        contracts=contracts,\n    )\n\n    # \u4fdd\u5b58\u5230 catalog\n    catalog = ParquetDataCatalog("./catalog")\n    catalog.write_data(instruments)\n    catalog.write_data(bars)\n    catalog.write_data(ticks)\n\n    print(f"Downloaded {len(instruments)} instruments")\n    print(f"Downloaded {len(bars)} bars")\n    print(f"Downloaded {len(ticks)} ticks")\n\n    # \u65ad\u5f00\u8fde\u63a5\n    await client.disconnect()\n\n# \u8fd0\u884c\u793a\u4f8b\nif __name__ == "__main__":\n    asyncio.run(download_historical_data())\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636e\u9650\u5236",children:"\u6570\u636e\u9650\u5236"}),"\n",(0,s.jsx)(n.p,{children:"\u8bf7\u6ce8\u610f Interactive Brokers \u5728\u5386\u53f2\u6570\u636e\u4f7f\u7528\u4e0a\u7684\u4e00\u4e9b\u9650\u5236\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u901f\u7387\u9650\u5236\uff08Rate Limits\uff09"}),"\uff1aIB \u5bf9\u5386\u53f2\u6570\u636e\u8bf7\u6c42\u4f1a\u65bd\u52a0\u901f\u7387\u9650\u5236"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6570\u636e\u53ef\u7528\u6027\uff08Data Availability\uff09"}),"\uff1a\u5386\u53f2\u6570\u636e\u7684\u53ef\u7528\u6027\u53d6\u51b3\u4e8e\u5177\u4f53\u5408\u7ea6\u7c7b\u578b\u548c\u8ba2\u9605\u6743\u9650"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5e02\u573a\u6570\u636e\u6743\u9650\uff08Market Data Permissions\uff09"}),"\uff1a\u90e8\u5206\u6570\u636e\u9700\u8981\u7279\u5b9a\u7684\u5e02\u573a\u6570\u636e\u8ba2\u9605\u624d\u80fd\u8bbf\u95ee"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65f6\u95f4\u8303\u56f4\uff08Time Ranges\uff09"}),"\uff1a\u4e0d\u540c\u7684 Bar \u7c92\u5ea6\u548c\u5408\u7ea6\u7c7b\u578b\u5bf9\u6700\u5927\u56de\u6eaf\u65f6\u957f\u6709\u4e0d\u540c\u9650\u5236"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u63a8\u8350\u6700\u4f73\u5b9e\u8df5",children:"\u63a8\u8350\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u5ef6\u8fdf\u6570\u636e\uff08Use Delayed Data\uff09"}),"\uff1a\u7528\u4e8e\u56de\u6d4b\u65f6\uff0c",(0,s.jsx)(n.code,{children:"MarketDataTypeEnum.DELAYED_FROZEN"})," \u5e38\u5e38\u5df2\u8db3\u591f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6279\u91cf\u8bf7\u6c42\uff08Batch Requests\uff09"}),"\uff1a\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\u628a\u591a\u4e2a\u5408\u7ea6\u5408\u5e76\u4e3a\u4e00\u6b21\u8bf7\u6c42\u4ee5\u964d\u4f4e\u901f\u7387\u6d88\u8017"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5904\u7406\u8d85\u65f6\uff08Handle Timeouts\uff09"}),"\uff1a\u5bf9\u5927\u89c4\u6a21\u6570\u636e\u8bf7\u6c42\u8bbe\u7f6e\u5408\u9002\u7684\u8d85\u65f6\u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9075\u5b88\u901f\u7387\u9650\u5236\uff08Respect Rate Limits\uff09"}),"\uff1a\u5728\u8bf7\u6c42\u4e4b\u95f4\u52a0\u5ef6\u8fdf\u4ee5\u907f\u514d\u89e6\u53d1\u901f\u7387\u9650\u5236"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9a8c\u8bc1\u6570\u636e\uff08Validate Data\uff09"}),"\uff1a\u56de\u6d4b\u524d\u52a1\u5fc5\u68c0\u67e5\u6570\u636e\u8d28\u91cf\u548c\u5b8c\u6574\u6027"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"IB \u4f1a\u5f3a\u5236\u6267\u884c pacing \u9650\u5236\uff1b\u8fc7\u91cf\u7684\u5386\u53f2\u6570\u636e\u6216\u4e0b\u5355\u8bf7\u6c42\u4f1a\u89e6\u53d1 pacing \u8fdd\u89c4\uff0cIB \u53ef\u80fd\u4f1a\u6682\u505c API \u4f1a\u8bdd\u6570\u5206\u949f\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b9e\u76d8\u4ea4\u6613",children:"\u5b9e\u76d8\u4ea4\u6613"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 Interactive Brokers \u4e0a\u505a\u5b9e\u76d8\u4ea4\u6613\u65f6\uff0c\u9700\u8981\u642d\u5efa\u5305\u542b ",(0,s.jsx)(n.code,{children:"InteractiveBrokersDataClient"})," \u4e0e ",(0,s.jsx)(n.code,{children:"InteractiveBrokersExecutionClient"})," \u7684 ",(0,s.jsx)(n.code,{children:"TradingNode"}),"\uff1b\u4e24\u4e2a\u5ba2\u6237\u7aef\u90fd\u4f9d\u8d56 ",(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProvider"})," \u6765\u7ba1\u7406\u5408\u7ea6\u4fe1\u606f\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u67b6\u6784\u6982\u89c8",children:"\u67b6\u6784\u6982\u89c8"}),"\n",(0,s.jsx)(n.p,{children:"\u5b9e\u76d8\u4ea4\u6613\u90e8\u7f72\u901a\u5e38\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"InstrumentProvider\uff08\u5408\u7ea6\u63d0\u4f9b\u5668\uff09"}),"\uff1a\u7ba1\u7406\u5408\u7ea6\u5b9a\u4e49\u548c Contract \u8be6\u60c5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DataClient\uff08\u6570\u636e\u5ba2\u6237\u7aef\uff09"}),"\uff1a\u5904\u7406\u5b9e\u65f6\u884c\u60c5\u8ba2\u9605"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ExecutionClient\uff08\u6267\u884c\u5ba2\u6237\u7aef\uff09"}),"\uff1a\u7ba1\u7406\u8ba2\u5355\u3001\u6301\u4ed3\u548c\u8d26\u6237\u4fe1\u606f"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"instrumentprovider-\u914d\u7f6e",children:"InstrumentProvider \u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProvider"})," \u662f\u8bbf\u95ee IB \u5408\u7ea6\u4fe1\u606f\u7684\u6865\u6881\uff0c\u652f\u6301\u52a0\u8f7d\u5355\u4e2a\u5408\u7ea6\u3001\u671f\u6743\u94fe\u548c\u671f\u8d27\u94fe\u7b49\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u57fa\u672c\u914d\u7f6e",children:"\u57fa\u672c\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersInstrumentProviderConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import SymbologyMethod\nfrom nautilus_trader.adapters.interactive_brokers.common import IBContract\n\ninstrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    symbology_method=SymbologyMethod.IB_SIMPLIFIED,\n    build_futures_chain=False,  # \u82e5\u9700\u83b7\u53d6\u671f\u8d27\u94fe\u5219\u8bbe\u4e3a True\n    build_options_chain=False,  # \u82e5\u9700\u83b7\u53d6\u671f\u6743\u94fe\u5219\u8bbe\u4e3a True\n    min_expiry_days=10,         # \u884d\u751f\u54c1\u6700\u5c0f\u5230\u671f\u5929\u6570\n    max_expiry_days=60,         # \u884d\u751f\u54c1\u6700\u5927\u5230\u671f\u5929\u6570\n    convert_exchange_to_mic_venue=False,  # \u662f\u5426\u4f7f\u7528 MIC \u7801\u8fdb\u884c\u4ea4\u6613\u6240\u6620\u5c04\n    cache_validity_days=1,      # \u5408\u7ea6\u7f13\u5b58\u6709\u6548\u671f\uff08\u5929\uff09\n    load_ids=frozenset([\n        # \u4f7f\u7528\u7b80\u5316\u7b26\u53f7\u7684\u5355\u4e2a\u5408\u7ea6\u793a\u4f8b\n        \"EUR/USD.IDEALPRO\",     # \u5916\u6c47\n        \"BTC/USD.PAXOS\",        # \u52a0\u5bc6\u8d27\u5e01\n        \"SPY.ARCA\",             # \u80a1\u7968 ETF\n        \"V.NYSE\",               # \u4e2a\u80a1\n        \"ESM4.CME\",             # \u671f\u8d27\uff08\u5e74\u4efd\u4e3a\u4e00\u4f4d\u6570\u5b57\u7684\u793a\u4f8b\uff09\n        \"^SPX.CBOE\",            # \u6307\u6570\n    ]),\n    load_contracts=frozenset([\n        # \u4f7f\u7528 IBContract \u6307\u5b9a\u7684\u590d\u6742\u5408\u7ea6\u793a\u4f8b\n        IBContract(secType='STK', symbol='AAPL', exchange='SMART', primaryExchange='NASDAQ'),\n        IBContract(secType='CASH', symbol='GBP', currency='USD', exchange='IDEALPRO'),\n    ]),\n)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u884d\u751f\u54c1\u7684\u9ad8\u7ea7\u914d\u7f6e",children:"\u884d\u751f\u54c1\u7684\u9ad8\u7ea7\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# \u914d\u7f6e\u671f\u6743\u4e0e\u671f\u8d27\u94fe\nadvanced_config = InteractiveBrokersInstrumentProviderConfig(\n    symbology_method=SymbologyMethod.IB_SIMPLIFIED,\n    build_futures_chain=True,   # \u542f\u7528\u671f\u8d27\u94fe\u52a0\u8f7d\n    build_options_chain=True,   # \u542f\u7528\u671f\u6743\u94fe\u52a0\u8f7d\n    min_expiry_days=7,          # \u52a0\u8f7d 7 \u5929\u4ee5\u4e0a\u5230\u671f\u7684\u5408\u7ea6\n    max_expiry_days=90,         # \u52a0\u8f7d 90 \u5929\u5185\u5230\u671f\u7684\u5408\u7ea6\n    load_contracts=frozenset([\n        # \u52a0\u8f7d SPY \u7684\u671f\u6743\u94fe\n        IBContract(\n            secType='STK',\n            symbol='SPY',\n            exchange='SMART',\n            primaryExchange='ARCA',\n            build_options_chain=True,\n        ),\n        # \u52a0\u8f7d ES \u671f\u8d27\u94fe\n        IBContract(\n            secType='CONTFUT',\n            exchange='CME',\n            symbol='ES',\n            build_futures_chain=True,\n        ),\n    ]),\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4e0e\u5916\u90e8\u6570\u636e\u63d0\u4f9b\u65b9\u96c6\u6210",children:"\u4e0e\u5916\u90e8\u6570\u636e\u63d0\u4f9b\u65b9\u96c6\u6210"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Brokers \u9002\u914d\u5668\u53ef\u4ee5\u4e0e\u5176\u4ed6\u6570\u636e\u6e90\u5e76\u7528\u4ee5\u6269\u5c55\u884c\u60c5\u8986\u76d6\u3002\u4f7f\u7528\u591a\u6570\u636e\u6e90\u65f6\u5e94\u6ce8\u610f\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5728\u5404\u6570\u636e\u6e90\u95f4\u91c7\u7528\u4e00\u81f4\u7684\u7b26\u53f7\u65b9\u6cd5\uff08symbology method\uff09"}),"\n",(0,s.jsxs)(n.li,{children:["\u53ef\u8003\u8651\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"convert_exchange_to_mic_venue=True"})," \u4ee5\u6807\u51c6\u5316\u4ea4\u6613\u573a\u6240\u6807\u8bc6"]}),"\n",(0,s.jsx)(n.li,{children:"\u5408\u7406\u7ba1\u7406\u5408\u7ea6\u7f13\u5b58\u4ee5\u907f\u514d\u51b2\u7a81"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",children:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersDataClient"})," \u8d1f\u8d23\u4e0e IB \u5efa\u7acb\u6d41\u5f0f\u4e0e\u8bf7\u6c42\u5f0f\u884c\u60c5\u8fde\u63a5\u3002\u8fde\u63a5\u540e\u4f1a\u6839\u636e ",(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProviderConfig"})," \u7684\u914d\u7f6e\u8bbe\u7f6e\u884c\u60c5\u7c7b\u578b\u5e76\u52a0\u8f7d\u5408\u7ea6\u3002\u6709\u5173\u5e02\u573a\u6570\u636e\u7c7b\u578b\u7684\u8bf4\u660e\u53ef\u53c2\u8003\u94fe\u63a5\uff1a",(0,s.jsx)(n.a,{href:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/#delayed-market-data",children:"market data type"}),"\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b-1",children:"\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Quote Ticks\uff08\u62a5\u4ef7 Tick\uff09"}),"\uff1a\u5b9e\u65f6\u4e70\u5356\u4ef7\u53ca\u91cf"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trade Ticks\uff08\u6210\u4ea4 Tick\uff09"}),"\uff1a\u5b9e\u65f6\u6210\u4ea4\u4ef7\u548c\u6210\u4ea4\u91cf"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bar Data\uff08Bar \u6570\u636e\uff09"}),"\uff1a\u5b9e\u65f6 OHLCV \u6761\uff08\u4ece 1 \u79d2\u5230 1 \u5929\u7c92\u5ea6\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Market Depth\uff08\u5e02\u573a\u6df1\u5ea6\uff09"}),"\uff1a\u4e8c\u7ea7\u884c\u60c5\uff08Level 2\uff09\u8ba2\u5355\u8584\u6570\u636e\uff08\u82e5\u53ef\u7528\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5e02\u573a\u6570\u636e\u7c7b\u578bmarket-data-types",children:"\u5e02\u573a\u6570\u636e\u7c7b\u578b\uff08Market data types\uff09"}),"\n",(0,s.jsx)(n.p,{children:"IB \u652f\u6301\u591a\u79cd\u5e02\u573a\u6570\u636e\u7c7b\u578b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"REALTIME"}),"\uff1a\u5b9e\u65f6\u884c\u60c5\uff08\u9700\u8981\u76f8\u5e94\u7684\u5e02\u573a\u6570\u636e\u8ba2\u9605\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELAYED"}),"\uff1a\u5ef6\u8fdf 15-20 \u5206\u949f\u7684\u6570\u636e\uff08\u591a\u6570\u5e02\u573a\u514d\u8d39\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"DELAYED_FROZEN"}),"\uff1a\u5ef6\u8fdf\u4e14\u4e0d\u66f4\u65b0\u7684\u6570\u636e\uff08\u9002\u7528\u4e8e\u6d4b\u8bd5\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"FROZEN"}),"\uff1a\u5e02\u573a\u6536\u76d8\u65f6\u7684\u6700\u540e\u5df2\u77e5\u5b9e\u65f6\u6570\u636e"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u57fa\u672c\u7684\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e",children:"\u57fa\u672c\u7684\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import IBMarketDataTypeEnum\nfrom nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersDataClientConfig\n\ndata_client_config = InteractiveBrokersDataClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,  # TWS paper trading port\n    ibg_client_id=1,\n    use_regular_trading_hours=True,  # \u4ec5 RTH\uff08\u80a1\u7968\uff09\n    market_data_type=IBMarketDataTypeEnum.DELAYED_FROZEN,  # \u4f7f\u7528\u5ef6\u8fdf\u6570\u636e\n    ignore_quote_tick_size_updates=False,  # \u5305\u62ec\u4ec5\u5927\u5c0f\u53d8\u52a8\u7684\u66f4\u65b0\n    instrument_provider=instrument_provider_config,\n    connection_timeout=300,  # 5 \u5206\u949f\n    request_timeout=60,      # 1 \u5206\u949f\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u751f\u4ea7\u5b9e\u65f6\u7684\u9ad8\u7ea7\u914d\u7f6e",children:"\u751f\u4ea7/\u5b9e\u65f6\u7684\u9ad8\u7ea7\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u9762\u5411\u751f\u4ea7\u7684\u5b9e\u65f6\u6570\u636e\u914d\u7f6e\nproduction_data_config = InteractiveBrokersDataClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=4001,  # IB Gateway live trading port\n    ibg_client_id=1,\n    use_regular_trading_hours=False,  # \u5305\u542b\u76d8\u524d\u76d8\u540e\n    market_data_type=IBMarketDataTypeEnum.REALTIME,  # \u5b9e\u65f6\u6570\u636e\n    ignore_quote_tick_size_updates=True,  # \u964d\u4f4e tick \u91cf\n    handle_revised_bars=True,  # \u5904\u7406 bar \u7684\u4fee\u6b63\n    instrument_provider=instrument_provider_config,\n    dockerized_gateway=dockerized_gateway_config,  # \u4f7f\u7528 Docker \u65f6\u7684\u914d\u7f6e\n    connection_timeout=300,\n    request_timeout=60,\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e\u9009\u9879",children:"\u6570\u636e\u5ba2\u6237\u7aef\u914d\u7f6e\u9009\u9879"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"instrument_provider"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProviderConfig()"})}),(0,s.jsx)(n.td,{children:"\u63a7\u5236\u542f\u52a8\u65f6\u52a0\u8f7d\u54ea\u4e9b\u5408\u7ea6\u7684\u63d0\u4f9b\u5668\u914d\u7f6e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_host"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"127.0.0.1"})}),(0,s.jsx)(n.td,{children:"TWS/IB Gateway \u7684\u4e3b\u673a\u540d\u6216 IP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_port"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsx)(n.td,{children:"TWS/IB Gateway \u7aef\u53e3\uff08TWS \u5e38\u7528 7497/7496\uff0cIBG \u5e38\u7528 4002/4001\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_client_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1"})}),(0,s.jsx)(n.td,{children:"\u8fde\u63a5\u5230 TWS/IB Gateway \u65f6\u4f7f\u7528\u7684\u552f\u4e00\u5ba2\u6237\u7aef ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"use_regular_trading_hours"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"\u4e3a True \u65f6\u8bf7\u6c42\u4ec5\u9650\u5e38\u89c4\u4ea4\u6613\u65f6\u6bb5\uff08\u4e3b\u8981\u5f71\u54cd\u80a1\u7968\u7684 Bar \u6570\u636e\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"market_data_type"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REALTIME"})}),(0,s.jsxs)(n.td,{children:["\u5e02\u573a\u6570\u636e\u7c7b\u578b\uff08",(0,s.jsx)(n.code,{children:"REALTIME"}),", ",(0,s.jsx)(n.code,{children:"DELAYED"}),", ",(0,s.jsx)(n.code,{children:"DELAYED_FROZEN"})," \u7b49\uff09"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ignore_quote_tick_size_updates"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsx)(n.td,{children:"\u4e3a True \u65f6\u6291\u5236\u4ec5\u5927\u5c0f\u53d8\u52a8\u7684\u62a5\u4ef7 Tick\uff0c\u4ee5\u964d\u4f4e\u6570\u636e\u91cf"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dockerized_gateway"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsxs)(n.td,{children:["\u53ef\u9009\u7684 ",(0,s.jsx)(n.code,{children:"DockerizedIBGatewayConfig"}),"\uff0c\u7528\u4e8e\u5bb9\u5668\u5316\u90e8\u7f72"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"connection_timeout"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"300"})}),(0,s.jsx)(n.td,{children:"\u7b49\u5f85\u521d\u59cb API \u8fde\u63a5\u7684\u6700\u5927\u79d2\u6570"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"request_timeout"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"60"})}),(0,s.jsx)(n.td,{children:"\u5386\u53f2\u6570\u636e\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u5907\u6ce8",children:"\u5907\u6ce8"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"use_regular_trading_hours"})}),"\uff1a\u5f53\u4e3a True \u65f6\uff0c\u6570\u636e\u8bf7\u6c42\u4ec5\u8986\u76d6\u5e38\u89c4\u4ea4\u6613\u65f6\u6bb5\uff0c\u4e3b\u8981\u5f71\u54cd\u80a1\u7968\u7684 Bar \u6570\u636e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"ignore_quote_tick_size_updates"})}),"\uff1a\u4e3a True \u65f6\u4f1a\u8fc7\u6ee4\u6389\u4ec5\u5927\u5c0f\u53d8\u5316\uff08\u4ef7\u683c\u672a\u53d8\uff09\u7684\u62a5\u4ef7 Tick\uff0c\u4ece\u800c\u51cf\u5c11\u6570\u636e\u91cf"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"handle_revised_bars"})}),"\uff1a\u4e3a True \u65f6\u4f1a\u5904\u7406\u6765\u81ea IB \u7684 bar \u4fee\u6b63\uff08bar \u53ef\u80fd\u5728\u521d\u6b21\u53d1\u5e03\u540e\u88ab\u66f4\u65b0\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"connection_timeout"})}),"\uff1a\u521d\u59cb\u5316\u8fde\u63a5\u5141\u8bb8\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"request_timeout"})}),"\uff1a\u5386\u53f2\u6570\u636e\u8bf7\u6c42\u7684\u6700\u5927\u7b49\u5f85\u65f6\u95f4"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6267\u884c\u5ba2\u6237\u7aefexecution-client\u914d\u7f6e\u9009\u9879",children:"\u6267\u884c\u5ba2\u6237\u7aef\uff08Execution client\uff09\u914d\u7f6e\u9009\u9879"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"instrument_provider"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"InteractiveBrokersInstrumentProviderConfig()"})}),(0,s.jsx)(n.td,{children:"\u63a7\u5236\u542f\u52a8\u65f6\u52a0\u8f7d\u54ea\u4e9b\u5408\u7ea6\u7684\u63d0\u4f9b\u5668\u914d\u7f6e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_host"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"127.0.0.1"})}),(0,s.jsx)(n.td,{children:"TWS/IB Gateway \u7684\u4e3b\u673a\u540d\u6216 IP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_port"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsx)(n.td,{children:"TWS/IB Gateway \u7aef\u53e3\uff08TWS \u5e38\u7528 7497/7496\uff0cIBG \u5e38\u7528 4002/4001\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ibg_client_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1"})}),(0,s.jsx)(n.td,{children:"\u8fde\u63a5\u5230 TWS/IB Gateway \u65f6\u4f7f\u7528\u7684\u552f\u4e00\u5ba2\u6237\u7aef ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"account_id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsxs)(n.td,{children:["Interactive Brokers \u7684\u8d26\u6237 ID\uff08\u82e5\u4e3a\u7a7a\u5219\u4f7f\u7528\u73af\u5883\u53d8\u91cf ",(0,s.jsx)(n.code,{children:"TWS_ACCOUNT"}),"\uff09"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dockerized_gateway"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsxs)(n.td,{children:["\u53ef\u9009\u7684 ",(0,s.jsx)(n.code,{children:"DockerizedIBGatewayConfig"}),"\uff0c\u7528\u4e8e\u5bb9\u5668\u5316\u90e8\u7f72"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"connection_timeout"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"300"})}),(0,s.jsx)(n.td,{children:"\u7b49\u5f85\u521d\u59cb API \u8fde\u63a5\u7684\u6700\u5927\u79d2\u6570"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"fetch_all_open_orders"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsx)(n.td,{children:"\u4e3a True \u65f6\u4f1a\u62c9\u53d6\u6240\u6709 API client id \u4e0b\u7684\u672a\u7ed3\u8ba2\u5355\uff08\u800c\u975e\u4ec5\u5f53\u524d\u4f1a\u8bdd\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"track_option_exercise_from_position_update"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"False"})}),(0,s.jsx)(n.td,{children:"\u4e3a True \u65f6\u8ba2\u9605\u5b9e\u65f6\u6301\u4ed3\u66f4\u65b0\u4ee5\u68c0\u6d4b\u671f\u6743\u884c\u6743\u4e8b\u4ef6"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",children:"\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"InteractiveBrokersExecutionClient"})," \u8d1f\u8d23\u4ea4\u6613\u6267\u884c\u3001\u8ba2\u5355\u7ba1\u7406\u3001\u8d26\u6237\u4fe1\u606f\u548c\u6301\u4ed3\u8ddf\u8e2a\uff0c\u63d0\u4f9b\u7aef\u5230\u7aef\u7684\u8ba2\u5355\u751f\u547d\u5468\u671f\u7ba1\u7406\u4e0e\u5b9e\u65f6\u8d26\u6237\u66f4\u65b0\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u652f\u6301\u7684\u529f\u80fd",children:"\u652f\u6301\u7684\u529f\u80fd"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8ba2\u5355\u7ba1\u7406\uff08Order Management\uff09"}),"\uff1a\u4e0b\u5355\u3001\u4fee\u6539\u4e0e\u64a4\u5355"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8ba2\u5355\u7c7b\u578b\uff08Order Types\uff09"}),"\uff1a\u5e02\u4ef7\u3001\u9650\u4ef7\u3001\u6b62\u635f\u3001\u6b62\u635f\u9650\u4ef7\u3001\u8ddf\u8e2a\u6b62\u635f\u7b49\u591a\u79cd\u7c7b\u578b"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8d26\u6237\u4fe1\u606f\uff08Account Information\uff09"}),"\uff1a\u5b9e\u65f6\u4f59\u989d\u4e0e\u4fdd\u8bc1\u91d1\u66f4\u65b0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6301\u4ed3\u8ddf\u8e2a\uff08Position Tracking\uff09"}),"\uff1a\u5b9e\u65f6\u6301\u4ed3\u66f4\u65b0\u4e0e P&L"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4ea4\u6613\u62a5\u544a\uff08Trade Reporting\uff09"}),"\uff1a\u6267\u884c\u62a5\u544a\u4e0e\u6210\u4ea4\u56de\u62a5\u901a\u77e5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u98ce\u63a7\uff08Risk Management\uff09"}),"\uff1a\u4e0b\u5355\u524d\u98ce\u63a7\u68c0\u67e5\u4e0e\u4ed3\u4f4d\u9650\u5236"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u652f\u6301\u7684\u8ba2\u5355\u7c7b\u578b",children:"\u652f\u6301\u7684\u8ba2\u5355\u7c7b\u578b"}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u914d\u5668\u652f\u6301\u5927\u591a\u6570 IB \u7684\u8ba2\u5355\u7c7b\u578b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5e02\u4ef7\u5355\uff08Market Orders\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.MARKET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9650\u4ef7\u5355\uff08Limit Orders\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.LIMIT"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6b62\u635f\u5355\uff08Stop Orders\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.STOP_MARKET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6b62\u635f\u9650\u4ef7\u5355\uff08Stop-Limit Orders\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.STOP_LIMIT"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e6\u53ca\u6210\u5e02\uff08Market-If-Touched\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.MARKET_IF_TOUCHED"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e6\u53ca\u6210\u9650\uff08Limit-If-Touched\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.LIMIT_IF_TOUCHED"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8ddf\u8e2a\u6b62\u635f\u5e02\u4ef7\uff08Trailing Stop Market\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.TRAILING_STOP_MARKET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8ddf\u8e2a\u6b62\u635f\u9650\u4ef7\uff08Trailing Stop Limit\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"OrderType.TRAILING_STOP_LIMIT"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6536\u76d8\u5e02\u4ef7\uff08Market-on-Close\uff09"}),"\uff1a\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"OrderType.MARKET"})," \u5e76\u914d ",(0,s.jsx)(n.code,{children:"TimeInForce.AT_THE_CLOSE"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6536\u76d8\u9650\u4ef7\uff08Limit-on-Close\uff09"}),"\uff1a\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"OrderType.LIMIT"})," \u5e76\u914d ",(0,s.jsx)(n.code,{children:"TimeInForce.AT_THE_CLOSE"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u6709\u6548\u671ftime-in-force\u9009\u9879",children:"\u6709\u6548\u671f\uff08Time in force\uff09\u9009\u9879"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65e5\u5185\u8ba2\u5355\uff08Day Orders\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.DAY"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u76f4\u5230\u64a4\u9500\uff08Good-Till-Canceled\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.GTC"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7acb\u5373\u6210\u4ea4\u6216\u53d6\u6d88\uff08Immediate-or-Cancel\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.IOC"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5168\u90e8\u6210\u4ea4\u6216\u53d6\u6d88\uff08Fill-or-Kill\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.FOK"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5230\u671f\u65e5\u6709\u6548\uff08Good-Till-Date\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.GTD"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65e5\u5f00\u76d8\uff08At-the-Open\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.AT_THE_OPEN"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65e5\u6536\u76d8\uff08At-the-Close\uff09"}),"\uff1a",(0,s.jsx)(n.code,{children:"TimeInForce.AT_THE_CLOSE"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u6279\u91cf\u64cd\u4f5c",children:"\u6279\u91cf\u64cd\u4f5c"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operation"}),(0,s.jsx)(n.th,{children:"Supported"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Batch Submit"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5728\u5355\u6b21\u8bf7\u6c42\u4e2d\u63d0\u4ea4\u591a\u7b14\u8ba2\u5355"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Batch Modify"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5728\u5355\u6b21\u8bf7\u6c42\u4e2d\u4fee\u6539\u591a\u7b14\u8ba2\u5355"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Batch Cancel"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5728\u5355\u6b21\u8bf7\u6c42\u4e2d\u64a4\u9500\u591a\u7b14\u8ba2\u5355"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u6301\u4ed3\u7ba1\u7406",children:"\u6301\u4ed3\u7ba1\u7406"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Supported"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Query positions"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5b9e\u65f6\u6301\u4ed3\u67e5\u8be2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Position mode"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301\u51c0\u5934\u5bf8\u4e0e\u591a\u5934/\u7a7a\u5934\u5206\u79bb\u6a21\u5f0f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Leverage control"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301\u8d26\u6237\u7ea7\u522b\u4fdd\u8bc1\u91d1\u63a7\u5236"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Margin mode"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301\u7ec4\u5408\u4e0e\u5355\u5408\u7ea6\u4fdd\u8bc1\u91d1\u6a21\u5f0f"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba2\u5355\u67e5\u8be2",children:"\u8ba2\u5355\u67e5\u8be2"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Supported"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Query open orders"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5217\u51fa\u6240\u6709\u6d3b\u52a8\u8ba2\u5355"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Query order history"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u8ba2\u5355\u5386\u53f2\u6570\u636e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Order status updates"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u5b9e\u65f6\u8ba2\u5355\u72b6\u6001\u53d8\u66f4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trade history"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u6267\u884c\u4e0e\u6210\u4ea4\u62a5\u544a"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8fde\u5e26\u6761\u4ef6\u8ba2\u5355contingent-orders",children:"\u8fde\u5e26/\u6761\u4ef6\u8ba2\u5355\uff08Contingent orders\uff09"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Supported"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Order lists"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u539f\u5b50\u5316\u7684\u591a\u5355\u4e00\u8d77\u63d0\u4ea4\uff08Order lists\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OCO orders"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301 One-Cancels-Other\uff0c\u4e14\u53ef\u81ea\u5b9a\u4e49 OCA \u7c7b\u578b\uff081\u30012\u30013\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bracket orders"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301\u7236\u5b50\u5355\uff08\u6b62\u76c8/\u6b62\u635f\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Conditional orders"}),(0,s.jsx)(n.td,{children:"\u2713"}),(0,s.jsx)(n.td,{children:"\u652f\u6301\u9ad8\u7ea7\u6761\u4ef6\u89e6\u53d1\u4e0e\u53d6\u6d88"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u57fa\u672c\u7684\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e",children:"\u57fa\u672c\u7684\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersExecClientConfig\nfrom nautilus_trader.config import RoutingConfig\n\nexec_client_config = InteractiveBrokersExecClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,  # TWS paper trading port\n    ibg_client_id=1,\n    account_id="DU123456",  # \u4f60\u7684 IB \u8d26\u6237 ID\uff08\u6d4b\u8bd5\u6216\u5b9e\u76d8\uff09\n    instrument_provider=instrument_provider_config,\n    connection_timeout=300,\n    routing=RoutingConfig(default=True),  # \u5c06\u6240\u6709\u8ba2\u5355\u8def\u7531\u5230\u6b64\u5ba2\u6237\u7aef\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u9ad8\u7ea7\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e\u751f\u4ea7",children:"\u9ad8\u7ea7\u6267\u884c\u5ba2\u6237\u7aef\u914d\u7f6e\uff08\u751f\u4ea7\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u751f\u4ea7\u73af\u5883\u4e0b\u4f7f\u7528 dockerized gateway \u7684\u914d\u7f6e\u793a\u4f8b\nproduction_exec_config = InteractiveBrokersExecClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=4001,  # IB Gateway live trading port\n    ibg_client_id=1,\n    account_id=None,  # \u5c06\u4f7f\u7528\u73af\u5883\u53d8\u91cf TWS_ACCOUNT\n    instrument_provider=instrument_provider_config,\n    dockerized_gateway=dockerized_gateway_config,\n    connection_timeout=300,\n    routing=RoutingConfig(default=True),\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u8d26\u6237-idaccount-id\u914d\u7f6e",children:"\u8d26\u6237 ID\uff08Account ID\uff09\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"account_id"})," \u53c2\u6570\u975e\u5e38\u91cd\u8981\uff0c\u5fc5\u987b\u4e0e TWS/Gateway \u4e2d\u767b\u5f55\u7684\u8d26\u6237\u4e00\u81f4\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u9009\u9879 1\uff1a\u5728\u914d\u7f6e\u4e2d\u76f4\u63a5\u6307\u5b9a\nexec_config = InteractiveBrokersExecClientConfig(\n    account_id="DU123456",  # Paper trading \u8d26\u6237\n    # ... \u5176\u5b83\u53c2\u6570\n)\n\n# \u9009\u9879 2\uff1a\u4f7f\u7528\u73af\u5883\u53d8\u91cf\nimport os\nos.environ["TWS_ACCOUNT"] = "DU123456"\nexec_config = InteractiveBrokersExecClientConfig(\n    account_id=None,  # \u5c06\u4f7f\u7528 TWS_ACCOUNT \u73af\u5883\u53d8\u91cf\n    # ... \u5176\u5b83\u53c2\u6570\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba2\u5355\u6807\u7b7e\u4e0e\u9ad8\u7ea7\u529f\u80fd",children:"\u8ba2\u5355\u6807\u7b7e\u4e0e\u9ad8\u7ea7\u529f\u80fd"}),"\n",(0,s.jsx)(n.p,{children:"\u9002\u914d\u5668\u901a\u8fc7\u8ba2\u5355\u6807\u7b7e\uff08order tags\uff09\u652f\u6301 IB \u7279\u6709\u7684\u8ba2\u5355\u53c2\u6570\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBOrderTags\n\n# \u521b\u5efa\u5e26\u6709 IB \u7279\u5b9a\u53c2\u6570\u7684\u6807\u7b7e\norder_tags = IBOrderTags(\n    allOrNone=True,           # \u5168\u90e8\u6210\u4ea4\u6216\u64a4\u9500\uff08AON\uff09\n    ocaGroup="MyGroup1",      # OCA \u5206\u7ec4\n    ocaType=1,                # Block \u7c7b\u578b\n    activeStartTime="20240315 09:30:00 EST",  # GTC \u6fc0\u6d3b\u65f6\u95f4\n    activeStopTime="20240315 16:00:00 EST",   # GTC \u505c\u7528\u65f6\u95f4\n    goodAfterTime="20240315 09:35:00 EST",    # Good after \u65f6\u95f4\n)\n\n# \u5c06\u6807\u7b7e\u5e94\u7528\u5230\u8ba2\u5355\norder = order_factory.limit(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(100),\n    price=instrument.make_price(100.0),\n    tags=[order_tags.value],\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"ocaone-cancels-all\u8ba2\u5355",children:"OCA\uff08one-cancels-all\uff09\u8ba2\u5355"}),"\n",(0,s.jsxs)(n.p,{children:["\u9002\u914d\u5668\u901a\u8fc7\u663e\u5f0f\u914d\u7f6e\u7684 ",(0,s.jsx)(n.code,{children:"IBOrderTags"})," \u63d0\u4f9b\u5bf9 OCA \u8ba2\u5355\u7684\u5b8c\u5584\u652f\u6301\uff1a"]}),"\n",(0,s.jsx)(n.h3,{id:"\u57fa\u672c-oca-\u914d\u7f6e",children:"\u57fa\u672c OCA \u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u6240\u6709 OCA \u529f\u80fd\u90fd\u5fc5\u987b\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"IBOrderTags"})," \u663e\u5f0f\u914d\u7f6e\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBOrderTags\n\n# \u521b\u5efa OCA \u914d\u7f6e\noca_tags = IBOrderTags(\n    ocaGroup="MY_OCA_GROUP",\n    ocaType=1,  # \u7c7b\u578b 1\uff1aCancel All with Block\uff08\u63a8\u8350\uff09\n)\n\n# \u5e94\u7528\u4e8e\u6302\u5355\u7684\u6b62\u76c8/\u6b62\u635f\nbracket_order = order_factory.bracket(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(100),\n    tp_price=instrument.make_price(110.0),\n    sl_trigger_price=instrument.make_price(90.0),\n    tp_tags=[oca_tags.value],  # \u5fc5\u987b\u663e\u5f0f\u6dfb\u52a0 OCA \u6807\u7b7e\n    sl_tags=[oca_tags.value],  # \u5fc5\u987b\u663e\u5f0f\u6dfb\u52a0 OCA \u6807\u7b7e\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u9ad8\u7ea7-oca-\u914d\u7f6e",children:"\u9ad8\u7ea7 OCA \u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"IBOrderTags"})," \u6307\u5b9a\u4e0d\u540c\u7684 OCA \u7c7b\u578b\u4e0e\u884c\u4e3a\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBOrderTags\n\n# \u521b\u5efa\u81ea\u5b9a\u4e49 OCA \u914d\u7f6e\ncustom_oca_tags = IBOrderTags(\n    ocaGroup="MY_CUSTOM_GROUP",\n    ocaType=2,  # \u4f7f\u7528\u7c7b\u578b 2\uff1aReduce with Block\n)\n\n# \u5e94\u7528\u4e8e\u5355\u7b14\u8ba2\u5355\norder = order_factory.limit(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(100),\n    price=instrument.make_price(100.0),\n    tags=[custom_oca_tags.value],\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"oca-\u7c7b\u578b",children:"OCA \u7c7b\u578b"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Brokers \u652f\u6301\u4e09\u79cd OCA \u7c7b\u578b\uff1a"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Behavior"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"1"})}),(0,s.jsx)(n.td,{children:"Cancel All with Block"}),(0,s.jsx)(n.td,{children:"\u4ee5 block \u65b9\u5f0f\u53d6\u6d88\u6240\u6709\u5269\u4f59\u8ba2\u5355"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"\u9ed8\u8ba4"})," - \u6700\u5b89\u5168\u7684\u9009\u9879\uff0c\u53ef\u9632\u6b62\u8fc7\u5ea6\u6210\u4ea4"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"2"})}),(0,s.jsx)(n.td,{children:"Reduce with Block"}),(0,s.jsx)(n.td,{children:"\u6309\u6bd4\u4f8b\u51cf\u5c11\u5269\u4f59\u8ba2\u5355\uff08\u5e26 block \u4fdd\u62a4\uff09"}),(0,s.jsx)(n.td,{children:"\u90e8\u5206\u6210\u4ea4\u65f6\u63d0\u4f9b\u8fc7\u5ea6\u6210\u4ea4\u4fdd\u62a4"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"3"})}),(0,s.jsx)(n.td,{children:"Reduce without Block"}),(0,s.jsx)(n.td,{children:"\u6309\u6bd4\u4f8b\u51cf\u5c11\u5269\u4f59\u8ba2\u5355\uff08\u4e0d\u5e26 block \u4fdd\u62a4\uff09"}),(0,s.jsx)(n.td,{children:"\u6267\u884c\u901f\u5ea6\u6700\u5feb\uff0c\u4f46\u5b58\u5728\u8f83\u9ad8\u7684\u8fc7\u5ea6\u6210\u4ea4\u98ce\u9669"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"\u540c\u4e00-oca-\u5206\u7ec4\u4e2d\u7684\u591a\u7b14\u8ba2\u5355",children:"\u540c\u4e00 OCA \u5206\u7ec4\u4e2d\u7684\u591a\u7b14\u8ba2\u5355"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u4f7f\u7528\u76f8\u540c OCA \u5206\u7ec4\u521b\u5efa\u591a\u7b14\u8ba2\u5355\noca_tags = IBOrderTags(\n    ocaGroup="MULTI_ORDER_GROUP",\n    ocaType=3,  # \u4f7f\u7528\u7c7b\u578b 3\uff1aReduce without Block\n)\n\norder1 = order_factory.limit(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(50),\n    price=instrument.make_price(99.0),\n    tags=[oca_tags.value],\n)\n\norder2 = order_factory.limit(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(50),\n    price=instrument.make_price(101.0),\n    tags=[oca_tags.value],\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"oca-\u914d\u7f6e\u8981\u6c42",children:"OCA \u914d\u7f6e\u8981\u6c42"}),"\n",(0,s.jsxs)(n.p,{children:["OCA \u529f\u80fd",(0,s.jsx)(n.strong,{children:"\u4ec5"}),"\u901a\u8fc7\u663e\u5f0f\u914d\u7f6e\u53ef\u7528\uff1a"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9700\u8981 IBOrderTags"})," - OCA \u8bbe\u7f6e\u5fc5\u987b\u5728\u8ba2\u5355\u6807\u7b7e\u4e2d\u660e\u786e\u6307\u5b9a"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65e0\u81ea\u52a8\u68c0\u6d4b"})," - ",(0,s.jsx)(n.code,{children:"ContingencyType.OCO"})," \u548c ",(0,s.jsx)(n.code,{children:"ContingencyType.OUO"})," \u4e0d\u4f1a\u81ea\u52a8\u751f\u6210 OCA \u5206\u7ec4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u624b\u52a8\u914d\u7f6e"})," - \u6240\u6709 OCA \u5206\u7ec4\u548c\u7c7b\u578b\u5747\u9700\u624b\u5de5\u6307\u5b9a"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6761\u4ef6\u8ba2\u5355conditional-orders",children:"\u6761\u4ef6\u8ba2\u5355\uff08Conditional orders\uff09"}),"\n",(0,s.jsxs)(n.p,{children:["\u9002\u914d\u5668\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"IBOrderTags"})," \u7684 ",(0,s.jsx)(n.code,{children:"conditions"})," \u53c2\u6570\u652f\u6301 IB \u7684\u6761\u4ef6\u8ba2\u5355\u3002\u6761\u4ef6\u8ba2\u5355\u5141\u8bb8\u5728\u6ee1\u8db3\u6307\u5b9a\u6761\u4ef6\u540e\u518d\u63d0\u4ea4\u6216\u53d6\u6d88\u8ba2\u5355\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u652f\u6301\u7684\u6761\u4ef6\u7c7b\u578b",children:"\u652f\u6301\u7684\u6761\u4ef6\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4ef7\u683c\u6761\u4ef6\uff08Price Conditions\uff09"}),"\uff1a\u57fa\u4e8e\u67d0\u5408\u7ea6\u4ef7\u683c\u89e6\u53d1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65f6\u95f4\u6761\u4ef6\uff08Time Conditions\uff09"}),"\uff1a\u5728\u6307\u5b9a\u65e5\u671f\u65f6\u95f4\u89e6\u53d1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6210\u4ea4\u91cf\u6761\u4ef6\uff08Volume Conditions\uff09"}),"\uff1a\u57fa\u4e8e\u6210\u4ea4\u91cf\u9608\u503c\u89e6\u53d1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6267\u884c\u6761\u4ef6\uff08Execution Conditions\uff09"}),"\uff1a\u5f53\u6307\u5b9a\u5408\u7ea6\u53d1\u751f\u6210\u4ea4\u65f6\u89e6\u53d1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4fdd\u8bc1\u91d1\u6761\u4ef6\uff08Margin Conditions\uff09"}),"\uff1a\u57fa\u4e8e\u8d26\u6237\u4fdd\u8bc1\u91d1\u6c34\u5e73\u89e6\u53d1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u767e\u5206\u6bd4\u53d8\u5316\u6761\u4ef6\uff08Percent Change Conditions\uff09"}),"\uff1a\u57fa\u4e8e\u4ef7\u683c\u767e\u5206\u6bd4\u53d8\u52a8\u89e6\u53d1"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u57fa\u672c\u6761\u4ef6\u5355\u793a\u4f8b",children:"\u57fa\u672c\u6761\u4ef6\u5355\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.common import IBOrderTags\n\n# \u521b\u5efa\u4ef7\u683c\u6761\u4ef6\uff1a\u5f53 SPY \u8d85\u8fc7 $250 \u65f6\u89e6\u53d1\nprice_condition = {\n    "type": "price",\n    "conId": 265598,  # SPY \u5408\u7ea6 ID\n    "exchange": "SMART",\n    "isMore": True,  # \u5f53\u4ef7\u683c\u5927\u4e8e\u9608\u503c\u65f6\u89e6\u53d1\n    "price": 250.00,\n    "triggerMethod": 0,  # \u9ed8\u8ba4\u89e6\u53d1\u65b9\u6cd5\n    "conjunction": "and",\n}\n\n# \u521b\u5efa\u5e26\u6761\u4ef6\u7684\u8ba2\u5355\u6807\u7b7e\norder_tags = IBOrderTags(\n    conditions=[price_condition],\n    conditionsCancelOrder=False,  # \u6761\u4ef6\u6ee1\u8db3\u65f6\u53d1\u9001\u8ba2\u5355\n)\n\n# \u5e94\u7528\u4e8e\u8ba2\u5355\norder = order_factory.limit(\n    instrument_id=instrument.id,\n    order_side=OrderSide.BUY,\n    quantity=instrument.make_qty(100),\n    price=instrument.make_price(251.00),\n    tags=[order_tags.value],\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5e26\u903b\u8f91\u7684\u591a\u6761\u4ef6\u793a\u4f8b",children:"\u5e26\u903b\u8f91\u7684\u591a\u6761\u4ef6\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u521b\u5efa\u5305\u542b AND/OR \u903b\u8f91\u7684\u591a\u4e2a\u6761\u4ef6\nconditions = [\n    {\n        "type": "price",\n        "conId": 265598,\n        "exchange": "SMART",\n        "isMore": True,\n        "price": 250.00,\n        "triggerMethod": 0,\n        "conjunction": "and",  # \u4e0e\u4e0b\u4e00\u4e2a\u6761\u4ef6\u4e3a AND\n    },\n    {\n        "type": "time",\n        "time": "20250315-09:30:00",\n        "isMore": True,\n        "conjunction": "or",  # \u4e0e\u4e0b\u4e00\u4e2a\u6761\u4ef6\u4e3a OR\n    },\n    {\n        "type": "volume",\n        "conId": 265598,\n        "exchange": "SMART",\n        "isMore": True,\n        "volume": 10000000,\n        "conjunction": "and",\n    },\n]\n\norder_tags = IBOrderTags(\n    conditions=conditions,\n    conditionsCancelOrder=False,\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u6761\u4ef6\u53c2\u6570\u8bf4\u660e",children:"\u6761\u4ef6\u53c2\u6570\u8bf4\u660e"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4ef7\u683c\u6761\u4ef6\uff08Price Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"conId"}),"\uff1a\u8981\u76d1\u63a7\u7684\u5408\u7ea6 ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exchange"}),'\uff1a\u8981\u76d1\u63a7\u7684\u4ea4\u6613\u6240\uff08\u4f8b\u5982\uff1a"SMART", "NASDAQ"\uff09']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMore"}),"\uff1aTrue \u8868\u793a >=\uff0cFalse \u8868\u793a <="]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"price"}),"\uff1a\u4ef7\u683c\u9608\u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"triggerMethod"}),"\uff1a0=Default, 1=DoubleBidAsk, 2=Last, 3=DoubleLast, 4=BidAsk, 7=LastBidAsk, 8=MidPoint"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u65f6\u95f4\u6761\u4ef6\uff08Time Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"time"}),'\uff1aUTC \u683c\u5f0f\u7684\u65f6\u95f4\u5b57\u7b26\u4e32 "YYYYMMDD-HH:MM',":SS",'"\uff08\u4f8b\u5982\uff1a"20250315-09:30:00"\uff09']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMore"}),"\uff1aTrue \u8868\u793a\u5728\u8be5\u65f6\u95f4\u4e4b\u540e\u89e6\u53d1\uff0cFalse \u8868\u793a\u5728\u8be5\u65f6\u95f4\u4e4b\u524d\u89e6\u53d1"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6210\u4ea4\u91cf\u6761\u4ef6\uff08Volume Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"conId"}),"\uff1a\u8981\u76d1\u63a7\u7684\u5408\u7ea6 ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exchange"}),"\uff1a\u8981\u76d1\u63a7\u7684\u4ea4\u6613\u6240"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMore"}),"\uff1aTrue \u8868\u793a >=\uff0cFalse \u8868\u793a <="]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"volume"}),"\uff1a\u6210\u4ea4\u91cf\u9608\u503c"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u6267\u884c\u6761\u4ef6\uff08Execution Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"symbol"}),"\uff1a\u7528\u4e8e\u76d1\u63a7\u6210\u4ea4\u7684\u6807\u7684\u7b26\u53f7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secType"}),'\uff1a\u8bc1\u5238\u7c7b\u578b\uff08\u4f8b\u5982\uff1a"STK", "OPT", "FUT"\uff09']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exchange"}),"\uff1a\u8981\u76d1\u63a7\u7684\u4ea4\u6613\u6240"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u4fdd\u8bc1\u91d1\u6761\u4ef6\uff08Margin Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"percent"}),"\uff1a\u4fdd\u8bc1\u91d1\u4f59\u91cf\u767e\u5206\u6bd4\u9608\u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMore"}),"\uff1aTrue \u8868\u793a >=\uff0cFalse \u8868\u793a <="]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u767e\u5206\u6bd4\u53d8\u5316\u6761\u4ef6\uff08Percent Change Condition\uff09\uff1a"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"conId"}),"\uff1a\u8981\u76d1\u63a7\u7684\u5408\u7ea6 ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exchange"}),"\uff1a\u8981\u76d1\u63a7\u7684\u4ea4\u6613\u6240"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMore"}),"\uff1aTrue \u8868\u793a >=\uff0cFalse \u8868\u793a <="]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"changePercent"}),"\uff1a\u767e\u5206\u6bd4\u53d8\u5316\u9608\u503c"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5b8c\u6574\u793a\u4f8b\u5305\u542b\u6240\u6709\u6761\u4ef6\u7c7b\u578b",children:"\u5b8c\u6574\u793a\u4f8b\uff1a\u5305\u542b\u6240\u6709\u6761\u4ef6\u7c7b\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u6f14\u793a\u6240\u6709 6 \u79cd\u652f\u6301\u7684\u6761\u4ef6\u7c7b\u578b\nfrom nautilus_trader.adapters.interactive_brokers.common import IBOrderTags\n\n# 1. \u4ef7\u683c\u6761\u4ef6 - \u5f53 ES \u671f\u8d27 > 6000 \u65f6\u89e6\u53d1\nprice_condition = {\n    "type": "price",\n    "conId": 495512563,  # ES \u671f\u8d27\u5408\u7ea6 ID\n    "exchange": "CME",\n    "isMore": True,\n    "price": 6000.0,\n    "triggerMethod": 0,\n    "conjunction": "and",\n}\n\n# 2. \u65f6\u95f4\u6761\u4ef6 - \u5728\u6307\u5b9a\u65f6\u95f4\u89e6\u53d1\ntime_condition = {\n    "type": "time",\n    "time": "20250315-09:30:00",  # UTC \u683c\u5f0f\n    "isMore": True,\n    "conjunction": "and",\n}\n\n# 3. \u6210\u4ea4\u91cf\u6761\u4ef6 - \u6210\u4ea4\u91cf > 100,000 \u65f6\u89e6\u53d1\nvolume_condition = {\n    "type": "volume",\n    "conId": 495512563,\n    "exchange": "CME",\n    "isMore": True,\n    "volume": 100000,\n    "conjunction": "and",\n}\n\n# 4. \u6267\u884c\u6761\u4ef6 - \u5f53 SPY \u6709\u6210\u4ea4\u65f6\u89e6\u53d1\nexecution_condition = {\n    "type": "execution",\n    "symbol": "SPY",\n    "secType": "STK",\n    "exchange": "SMART",\n    "conjunction": "and",\n}\n\n# 5. \u4fdd\u8bc1\u91d1\u6761\u4ef6 - \u5f53\u4fdd\u8bc1\u91d1\u4f59\u91cf > 75% \u65f6\u89e6\u53d1\nmargin_condition = {\n    "type": "margin",\n    "percent": 75,\n    "isMore": True,\n    "conjunction": "and",\n}\n\n# 6. \u767e\u5206\u6bd4\u53d8\u5316\u6761\u4ef6 - \u5f53\u4ef7\u683c\u53d8\u5316 > 5% \u65f6\u89e6\u53d1\npercent_change_condition = {\n    "type": "percent_change",\n    "conId": 495512563,\n    "exchange": "CME",\n    "changePercent": 5.0,\n    "isMore": True,\n    "conjunction": "and",\n}\n\n# \u53ef\u4efb\u610f\u7ec4\u5408\u6761\u4ef6\norder_tags = IBOrderTags(\n    conditions=[price_condition, time_condition],  # \u591a\u4e2a\u6761\u4ef6\n    conditionsCancelOrder=False,  # \u6761\u4ef6\u6ee1\u8db3\u65f6\u53d1\u9001\u8ba2\u5355\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba2\u5355\u884c\u4e3a",children:"\u8ba2\u5355\u884c\u4e3a"}),"\n",(0,s.jsxs)(n.p,{children:["\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"conditionsCancelOrder"})," \u6765\u63a7\u5236\u5728\u6761\u4ef6\u6ee1\u8db3\u65f6\u7684\u884c\u4e3a\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"False"}),"\uff1a\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\u53d1\u9001\uff08transmit\uff09\u8ba2\u5355"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"True"}),"\uff1a\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\u53d6\u6d88\uff08cancel\uff09\u8ba2\u5355"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u73b0\u8bf4\u660e",children:"\u5b9e\u73b0\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5168\u90e8 6 \u79cd\u6761\u4ef6\u7c7b\u578b\u5747\u88ab\u5b8c\u6574\u652f\u6301"}),"\uff0c\u5e76\u5df2\u7528 Interactive Brokers \u7684\u5b9e\u76d8\u8ba2\u5355\u8fdb\u884c\u4e86\u6d4b\u8bd5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4ef7\u683c\u6761\u4ef6\uff08Price conditions\uff09"})," \u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\uff0c\u5c3d\u7ba1 ibapi \u5e93\u4e2d\u5b58\u5728\u4e00\u4e2a\u5df2\u77e5 bug\uff1a",(0,s.jsx)(n.code,{children:"PriceCondition.__str__"})," \u88ab\u9519\u8bef\u5730\u4f5c\u4e3a property \u88c5\u9970"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65f6\u95f4\u6761\u4ef6\uff08Time conditions\uff09"})," \u4f7f\u7528\u5e26\u77ed\u6a2a\u7684 UTC \u683c\u5f0f\uff08",(0,s.jsx)(n.code,{children:"YYYYMMDD-HH:MM:SS"}),"\uff09\uff0c\u4ee5\u4fbf\u53ef\u9760\u89e3\u6790"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u903b\u8f91\u8fde\u63a5\uff08conjunction logic\uff09"}),' \u652f\u6301\u4f7f\u7528 "and"/"or" \u8fd0\u7b97\u7b26\u7ec4\u5408\u590d\u6742\u6761\u4ef6']}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b8c\u6574\u4ea4\u6613\u8282\u70b9\u914d\u7f6e",children:"\u5b8c\u6574\u4ea4\u6613\u8282\u70b9\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u914d\u7f6e\u5b8c\u6574\u7684\u4ea4\u6613\u73af\u5883\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u6240\u6709\u5fc5\u8981\u7ec4\u4ef6\u7684 ",(0,s.jsx)(n.code,{children:"TradingNodeConfig"}),"\u3002\u4e0b\u9762\u7ed9\u51fa\u4e0d\u540c\u573a\u666f\u7684\u5b8c\u6574\u793a\u4f8b\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u6a21\u62df\u7eb8\u9762\u4ea4\u6613\u914d\u7f6epaper-trading",children:"\u6a21\u62df/\u7eb8\u9762\u4ea4\u6613\u914d\u7f6e\uff08Paper trading\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import os\nfrom nautilus_trader.adapters.interactive_brokers.common import IB\nfrom nautilus_trader.adapters.interactive_brokers.common import IB_VENUE\nfrom nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersDataClientConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersExecClientConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import InteractiveBrokersInstrumentProviderConfig\nfrom nautilus_trader.adapters.interactive_brokers.config import IBMarketDataTypeEnum\nfrom nautilus_trader.adapters.interactive_brokers.config import SymbologyMethod\nfrom nautilus_trader.adapters.interactive_brokers.factories import InteractiveBrokersLiveDataClientFactory\nfrom nautilus_trader.adapters.interactive_brokers.factories import InteractiveBrokersLiveExecClientFactory\nfrom nautilus_trader.config import LiveDataEngineConfig\nfrom nautilus_trader.config import LoggingConfig\nfrom nautilus_trader.config import RoutingConfig\nfrom nautilus_trader.config import TradingNodeConfig\nfrom nautilus_trader.live.node import TradingNode\n\n# Instrument provider configuration\ninstrument_provider_config = InteractiveBrokersInstrumentProviderConfig(\n    symbology_method=SymbologyMethod.IB_SIMPLIFIED,\n    load_ids=frozenset([\n        "EUR/USD.IDEALPRO",\n        "GBP/USD.IDEALPRO",\n        "SPY.ARCA",\n        "QQQ.NASDAQ",\n        "AAPL.NASDAQ",\n        "MSFT.NASDAQ",\n    ]),\n)\n\n# Data client configuration\ndata_client_config = InteractiveBrokersDataClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,  # TWS paper trading\n    ibg_client_id=1,\n    use_regular_trading_hours=True,\n    market_data_type=IBMarketDataTypeEnum.DELAYED_FROZEN,\n    instrument_provider=instrument_provider_config,\n)\n\n# Execution client configuration\nexec_client_config = InteractiveBrokersExecClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,  # TWS paper trading\n    ibg_client_id=1,\n    account_id="DU123456",  # Your paper trading account\n    instrument_provider=instrument_provider_config,\n    routing=RoutingConfig(default=True),\n)\n\n# Trading node configuration\nconfig_node = TradingNodeConfig(\n    trader_id="PAPER-TRADER-001",\n    logging=LoggingConfig(log_level="INFO"),\n    data_clients={IB: data_client_config},\n    exec_clients={IB: exec_client_config},\n    data_engine=LiveDataEngineConfig(\n        time_bars_timestamp_on_close=False,  # IB standard: use bar open time\n        validate_data_sequence=True,         # Discard out-of-sequence bars\n    ),\n    timeout_connection=90.0,\n    timeout_reconciliation=5.0,\n    timeout_portfolio=5.0,\n    timeout_disconnection=5.0,\n    timeout_post_stop=2.0,\n)\n\n# Create and configure the trading node\nnode = TradingNode(config=config_node)\nnode.add_data_client_factory(IB, InteractiveBrokersLiveDataClientFactory)\nnode.add_exec_client_factory(IB, InteractiveBrokersLiveExecClientFactory)\nnode.build()\nnode.portfolio.set_specific_venue(IB_VENUE)\n\nif __name__ == "__main__":\n    try:\n        node.run()\n    finally:\n        node.dispose()\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528-dockerized-gateway-\u7684\u5b9e\u76d8\u4ea4\u6613",children:"\u4f7f\u7528 Dockerized gateway \u7684\u5b9e\u76d8\u4ea4\u6613"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.adapters.interactive_brokers.config import DockerizedIBGatewayConfig\n\n# Dockerized gateway configuration\ndockerized_gateway_config = DockerizedIBGatewayConfig(\n    username=os.environ.get("TWS_USERNAME"),\n    password=os.environ.get("TWS_PASSWORD"),\n    trading_mode="live",  # "paper" or "live"\n    read_only_api=False,  # Allow order execution\n    timeout=300,\n)\n\n# Data client with dockerized gateway\ndata_client_config = InteractiveBrokersDataClientConfig(\n    ibg_client_id=1,\n    use_regular_trading_hours=False,  # Include extended hours\n    market_data_type=IBMarketDataTypeEnum.REALTIME,\n    instrument_provider=instrument_provider_config,\n    dockerized_gateway=dockerized_gateway_config,\n)\n\n# Execution client with dockerized gateway\nexec_client_config = InteractiveBrokersExecClientConfig(\n    ibg_client_id=1,\n    account_id=os.environ.get("TWS_ACCOUNT"),  # Live account ID\n    instrument_provider=instrument_provider_config,\n    dockerized_gateway=dockerized_gateway_config,\n    routing=RoutingConfig(default=True),\n)\n\n# Live trading node configuration\nconfig_node = TradingNodeConfig(\n    trader_id="LIVE-TRADER-001",\n    logging=LoggingConfig(log_level="INFO"),\n    data_clients={IB: data_client_config},\n    exec_clients={IB: exec_client_config},\n    data_engine=LiveDataEngineConfig(\n        time_bars_timestamp_on_close=False,\n        validate_data_sequence=True,\n    ),\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u591a\u5ba2\u6237\u7aef\u914d\u7f6emulti-client-configuration",children:"\u591a\u5ba2\u6237\u7aef\u914d\u7f6e\uff08Multi-client configuration\uff09"}),"\n",(0,s.jsx)(n.p,{children:"\u5bf9\u4e8e\u66f4\u9ad8\u7ea7\u7684\u90e8\u7f72\uff0c\u53ef\u4ee5\u4e3a\u4e0d\u540c\u7528\u9014\u914d\u7f6e\u591a\u4e2a\u5ba2\u6237\u7aef\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Separate data and execution clients with different client IDs\ndata_client_config = InteractiveBrokersDataClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,\n    ibg_client_id=1,  # Data client uses ID 1\n    market_data_type=IBMarketDataTypeEnum.REALTIME,\n    instrument_provider=instrument_provider_config,\n)\n\nexec_client_config = InteractiveBrokersExecClientConfig(\n    ibg_host="127.0.0.1",\n    ibg_port=7497,\n    ibg_client_id=2,  # Execution client uses ID 2\n    account_id="DU123456",\n    instrument_provider=instrument_provider_config,\n    routing=RoutingConfig(default=True),\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u542f\u52a8\u4ea4\u6613\u8282\u70b9",children:"\u542f\u52a8\u4ea4\u6613\u8282\u70b9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def run_trading_node():\n    """\u4ee5\u5408\u9002\u7684\u9519\u8bef\u5904\u7406\u65b9\u5f0f\u8fd0\u884c\u4ea4\u6613\u8282\u70b9\u3002"""\n    node = None\n    try:\n        # Create and build node\n        node = TradingNode(config=config_node)\n        node.add_data_client_factory(IB, InteractiveBrokersLiveDataClientFactory)\n        node.add_exec_client_factory(IB, InteractiveBrokersLiveExecClientFactory)\n        node.build()\n\n        # Set venue for portfolio\n        node.portfolio.set_specific_venue(IB_VENUE)\n\n        # Add your strategies here\n        # node.trader.add_strategy(YourStrategy())\n\n        # Run the node\n        node.run()\n\n    except KeyboardInterrupt:\n        print("Shutting down...")\n    except Exception as e:\n        print(f"Error: {e}")\n    finally:\n        if node:\n            node.dispose()\n\nif __name__ == "__main__":\n    run_trading_node()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u5176\u4ed6\u914d\u7f6e\u9009\u9879",children:"\u5176\u4ed6\u914d\u7f6e\u9009\u9879"}),"\n",(0,s.jsx)(n.h4,{id:"\u73af\u5883\u53d8\u91cf-1",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,s.jsx)(n.p,{children:"\u4e3a\u65b9\u4fbf\u914d\u7f6e\uff0c\u53ef\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u5728 Windows PowerShell \u4e2d\uff0c\u4f7f\u7528 $env:TWS_USERNAME = "your_ib_username" \u6765\u8bbe\u7f6e\u4e34\u65f6\u73af\u5883\u53d8\u91cf\nexport TWS_USERNAME="your_ib_username"\nexport TWS_PASSWORD="your_ib_password"\nexport TWS_ACCOUNT="your_account_id"\nexport IB_MAX_CONNECTION_ATTEMPTS="5"  # Optional: limit reconnection attempts\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u65e5\u5fd7\u914d\u7f6e",children:"\u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Enhanced logging configuration\nlogging_config = LoggingConfig(\n    log_level="INFO",\n    log_level_file="DEBUG",\n    log_file_format="json",  # JSON format for structured logging\n    log_component_levels={\n        "InteractiveBrokersClient": "DEBUG",\n        "InteractiveBrokersDataClient": "INFO",\n        "InteractiveBrokersExecutionClient": "INFO",\n    },\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u66f4\u591a\u793a\u4f8b: ",(0,s.jsx)(n.a,{href:"https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/interactive_brokers",children:"https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/interactive_brokers"})]}),"\n",(0,s.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5troubleshooting",children:"\u6545\u969c\u6392\u67e5\uff08Troubleshooting\uff09"}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u89c1\u8fde\u63a5\u95ee\u9898",children:"\u5e38\u89c1\u8fde\u63a5\u95ee\u9898"}),"\n",(0,s.jsx)(n.h4,{id:"\u8fde\u63a5\u88ab\u62d2\u7eddconnection-refused",children:"\u8fde\u63a5\u88ab\u62d2\u7edd\uff08Connection refused\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1aTWS/Gateway \u672a\u8fd0\u884c\u6216\u7aef\u53e3\u9519\u8bef"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u529e\u6cd5"}),"\uff1a\u786e\u8ba4 TWS/Gateway \u5df2\u542f\u52a8\u5e76\u68c0\u67e5\u7aef\u53e3\u914d\u7f6e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u9ed8\u8ba4\u7aef\u53e3"}),"\uff1aTWS\uff087497/7496\uff09\uff0cIB Gateway\uff084002/4001\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba4\u8bc1\u9519\u8befauthentication-errors",children:"\u8ba4\u8bc1\u9519\u8bef\uff08Authentication errors\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u51ed\u8bc1\u9519\u8bef\u6216\u8d26\u6237\u672a\u767b\u5f55"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u529e\u6cd5"}),"\uff1a\u786e\u8ba4\u7528\u6237\u540d/\u5bc6\u7801\u5e76\u786e\u4fdd\u5728 TWS/Gateway \u4e2d\u5df2\u767b\u5f55\u8be5\u8d26\u6237"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5ba2\u6237\u7aef-id-\u51b2\u7a81client-id-conflicts",children:"\u5ba2\u6237\u7aef ID \u51b2\u7a81\uff08Client ID conflicts\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u591a\u4e2a\u5ba2\u6237\u7aef\u4f7f\u7528\u76f8\u540c\u7684 client ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u529e\u6cd5"}),"\uff1a\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u4f7f\u7528\u552f\u4e00\u7684 client ID"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5e02\u573a\u6570\u636e\u6743\u9650market-data-permissions",children:"\u5e02\u573a\u6570\u636e\u6743\u9650\uff08Market data permissions\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u5e02\u573a\u6570\u636e\u8ba2\u9605\u4e0d\u8db3"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u529e\u6cd5"}),"\uff1a\u6d4b\u8bd5\u65f6\u53ef\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"IBMarketDataTypeEnum.DELAYED_FROZEN"}),"\uff0c\u6216\u8ba2\u9605\u6240\u9700\u7684\u6570\u636e\u6e90"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u9519\u8bef\u4ee3\u7801",children:"\u9519\u8bef\u4ee3\u7801"}),"\n",(0,s.jsx)(n.p,{children:"Interactive Brokers \u4f7f\u7528\u7279\u5b9a\u7684\u9519\u8bef\u4ee3\u7801\u3002\u5e38\u89c1\u5305\u62ec\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"200"}),"\uff1a\u672a\u627e\u5230\u8bc1\u5238\u5b9a\u4e49\uff08No security definition found\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"201"}),"\uff1a\u8ba2\u5355\u88ab\u62d2\u7edd \u2014\u2014 \u539f\u56e0\u968f\u9644\uff08Order rejected - reason follows\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"202"}),"\uff1a\u8ba2\u5355\u5df2\u53d6\u6d88\uff08Order cancelled\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"300"}),"\uff1a\u627e\u4e0d\u5230\u5e26 ticker ID \u7684 EId\uff08Can't find EId with ticker ID\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"354"}),"\uff1a\u672a\u8ba2\u9605\u6240\u8bf7\u6c42\u7684\u5e02\u573a\u6570\u636e\uff08Requested market data is not subscribed\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"2104"}),"\uff1a\u5e02\u573a\u6570\u636e farm \u8fde\u63a5\u6b63\u5e38\uff08Market data farm connection is OK\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"2106"}),"\uff1aHMDS \u6570\u636e farm \u8fde\u63a5\u6b63\u5e38\uff08HMDS data farm connection is OK\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6027\u80fd\u4f18\u5316",children:"\u6027\u80fd\u4f18\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"\u964d\u4f4e\u6570\u636e\u91cf",children:"\u964d\u4f4e\u6570\u636e\u91cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Reduce quote tick volume by ignoring size-only updates\ndata_config = InteractiveBrokersDataClientConfig(\n    ignore_quote_tick_size_updates=True,\n    # ... other config\n)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8fde\u63a5\u7ba1\u7406-1",children:"\u8fde\u63a5\u7ba1\u7406"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Set reasonable timeouts\nconfig = InteractiveBrokersDataClientConfig(\n    connection_timeout=300,  # 5 minutes\n    request_timeout=60,      # 1 minute\n    # ... other config\n)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5185\u5b58\u7ba1\u7406",children:"\u5185\u5b58\u7ba1\u7406"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528\u9002\u5408\u7b56\u7565\u7684 bar \u5927\u5c0f"}),"\n",(0,s.jsx)(n.li,{children:"\u9650\u5236\u540c\u65f6\u8ba2\u9605\u7684\u6570\u91cf"}),"\n",(0,s.jsx)(n.li,{children:"\u5bf9\u4e8e\u56de\u6d4b\uff0c\u8003\u8651\u4f7f\u7528\u5386\u53f2\u6570\u636e\u4ee3\u66ff\u5b9e\u65f6\u6570\u636e"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(n.h4,{id:"\u5b89\u5168",children:"\u5b89\u5168"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5207\u52ff\u5728\u6e90\u7801\u4e2d\u786c\u7f16\u7801\u51ed\u8bc1"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u5b58\u653e\u654f\u611f\u4fe1\u606f"}),"\n",(0,s.jsx)(n.li,{children:"\u5f00\u53d1\u4e0e\u6d4b\u8bd5\u4f18\u5148\u4f7f\u7528 paper trading"}),"\n",(0,s.jsxs)(n.li,{children:["\u5bf9\u4e8e\u4ec5\u83b7\u53d6\u6570\u636e\u7684\u5e94\u7528\uff0c\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"read_only_api=True"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u5f00\u53d1\u6d41\u7a0b",children:"\u5f00\u53d1\u6d41\u7a0b"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4ece Paper Trading \u5f00\u59cb"}),"\uff1a\u5148\u5728\u7eb8\u9762\u8d26\u6237\u5b8c\u6210\u6d4b\u8bd5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u5ef6\u8fdf\u6570\u636e\uff08Delayed Data\uff09"}),"\uff1a\u5f00\u53d1\u65f6\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"DELAYED_FROZEN"})," \u5e02\u573a\u6570\u636e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5b9e\u73b0\u826f\u597d\u7684\u9519\u8bef\u5904\u7406"}),"\uff1a\u4f18\u96c5\u5904\u7406\u8fde\u63a5\u4e2d\u65ad\u4e0e API \u9519\u8bef"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u76d1\u63a7\u65e5\u5fd7"}),"\uff1a\u5f00\u542f\u5408\u9002\u7684\u65e5\u5fd7\u7ea7\u522b\u4ee5\u4fbf\u8c03\u8bd5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6d4b\u8bd5\u91cd\u8fde"}),"\uff1a\u68c0\u9a8c\u7b56\u7565\u5728\u65ad\u7ebf\u91cd\u8fde\u65f6\u7684\u8868\u73b0"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u751f\u4ea7\u90e8\u7f72",children:"\u751f\u4ea7\u90e8\u7f72"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 dockerized gateway \u8fdb\u884c\u81ea\u52a8\u5316\u90e8\u7f72"}),"\n",(0,s.jsx)(n.li,{children:"\u5b9e\u65bd\u5b8c\u5907\u7684\u76d1\u63a7\u4e0e\u544a\u8b66"}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u65e5\u5fd7\u805a\u5408\u4e0e\u5206\u6790"}),"\n",(0,s.jsx)(n.li,{children:"\u4ec5\u5728\u5fc5\u8981\u65f6\u4f7f\u7528\u5b9e\u65f6\u6570\u636e\u8ba2\u9605"}),"\n",(0,s.jsx)(n.li,{children:"\u5b9e\u65bd\u7194\u65ad\u5668\u4e0e\u6301\u4ed3\u9650\u5236"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba2\u5355\u7ba1\u7406",children:"\u8ba2\u5355\u7ba1\u7406"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u63d0\u4ea4\u8ba2\u5355\u524d\u52a1\u5fc5\u8fdb\u884c\u6821\u9a8c"}),"\n",(0,s.jsx)(n.li,{children:"\u5b9e\u73b0\u5408\u7406\u7684\u4ed3\u4f4d\u89c4\u6a21\u63a7\u5236"}),"\n",(0,s.jsx)(n.li,{children:"\u6839\u636e\u7b56\u7565\u9009\u62e9\u5408\u9002\u7684\u8ba2\u5355\u7c7b\u578b"}),"\n",(0,s.jsx)(n.li,{children:"\u76d1\u63a7\u8ba2\u5355\u72b6\u6001\u5e76\u5904\u7406\u62d2\u5355\u60c5\u51b5"}),"\n",(0,s.jsx)(n.li,{children:"\u5bf9\u8ba2\u5355\u64cd\u4f5c\u5b9e\u73b0\u8d85\u65f6\u5904\u7406"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8c03\u8bd5\u5efa\u8bae",children:"\u8c03\u8bd5\u5efa\u8bae"}),"\n",(0,s.jsx)(n.h4,{id:"\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7",children:"\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'logging_config = LoggingConfig(\n    log_level="DEBUG",\n    log_component_levels={\n        "InteractiveBrokersClient": "DEBUG",\n    },\n)\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u76d1\u63a7\u8fde\u63a5\u72b6\u6001",children:"\u76d1\u63a7\u8fde\u63a5\u72b6\u6001"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Check connection status in your strategy\nif not self.data_client.is_connected:\n    self.log.warning("Data client disconnected")\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u9a8c\u8bc1\u5408\u7ea6\u54c1\u79cd",children:"\u9a8c\u8bc1\u5408\u7ea6/\u54c1\u79cd"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Ensure instruments are loaded before trading\ninstruments = self.cache.instruments()\nif not instruments:\n    self.log.error("No instruments loaded")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u652f\u6301\u4e0e\u8d44\u6e90",children:"\u652f\u6301\u4e0e\u8d44\u6e90"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IB API Documentation"}),": ",(0,s.jsx)(n.a,{href:"https://ibkrcampus.com/ibkr-api-page/trader-workstation-api/",children:"TWS API Guide"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NautilusTrader Examples"}),": ",(0,s.jsx)(n.a,{href:"https://github.com/nautechsystems/nautilus_trader/tree/develop/examples/live/interactive_brokers",children:"GitHub Examples"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IB Contract Search"}),": ",(0,s.jsx)(n.a,{href:"https://pennies.interactivebrokers.com/cstools/contract_info/",children:"Contract Information Center"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Market Data Subscriptions"}),": ",(0,s.jsx)(n.a,{href:"https://www.interactivebrokers.com/en/trading/market-data.php",children:"IB Market Data"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},9087:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>t});var r=i(6363);const s={},c=r.createContext(s);function d(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);
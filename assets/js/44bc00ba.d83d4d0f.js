"use strict";(globalThis.webpackChunknautilus_trader=globalThis.webpackChunknautilus_trader||[]).push([[3881],{6048:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"concepts/actors","title":"Actors","description":"We are currently working on this concept guide.","source":"@site/docs/concepts/actors.md","sourceDirName":"concepts","slug":"/concepts/actors","permalink":"/concepts/actors","draft":false,"unlisted":false,"editUrl":"https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/concepts/actors.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6982\u5ff5","permalink":"/concepts/"},"next":{"title":"\u9002\u914d\u5668","permalink":"/concepts/adapters"}}');var s=n(7259),i=n(9087);const r={},d="Actors",c={},o=[{value:"\u57fa\u672c\u793a\u4f8b",id:"\u57fa\u672c\u793a\u4f8b",level:2},{value:"\u6570\u636e\u5904\u7406\u4e0e\u56de\u8c03",id:"\u6570\u636e\u5904\u7406\u4e0e\u56de\u8c03",level:2},{value:"\u5386\u53f2\u6570\u636e vs \u5b9e\u65f6\u6570\u636e",id:"\u5386\u53f2\u6570\u636e-vs-\u5b9e\u65f6\u6570\u636e",level:3},{value:"\u56de\u8c03\u5904\u7406\u5668\u6620\u5c04",id:"\u56de\u8c03\u5904\u7406\u5668\u6620\u5c04",level:3},{value:"\u5386\u53f2\u4e0e\u5b9e\u65f6\u6570\u636e\u793a\u4f8b",id:"\u5386\u53f2\u4e0e\u5b9e\u65f6\u6570\u636e\u793a\u4f8b",level:3},{value:"\u6210\u4ea4\u56de\u62a5\uff08Order fill\uff09\u8ba2\u9605",id:"\u6210\u4ea4\u56de\u62a5order-fill\u8ba2\u9605",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3}];function x(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"actors",children:"Actors"})}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsx)(t.p,{children:"We are currently working on this concept guide."})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"Actor"})," \u662f\u4e0e\u4ea4\u6613\u7cfb\u7edf\u4ea4\u4e92\u7684\u57fa\u7840\u7ec4\u4ef6\u3002\n\u5b83\u63d0\u4f9b\u4e86\u63a5\u6536\u5e02\u573a\u6570\u636e\u3001\u5904\u7406\u4e8b\u4ef6\u4ee5\u53ca\u5728\u4ea4\u6613\u73af\u5883\u4e2d\u7ba1\u7406\u72b6\u6001\u7684\u6838\u5fc3\u529f\u80fd\u3002\n",(0,s.jsx)(t.code,{children:"Strategy"})," \u7c7b\u7ee7\u627f\u81ea ",(0,s.jsx)(t.code,{children:"Actor"}),"\uff0c\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u6269\u5c55\u4e86\u8ba2\u5355\u7ba1\u7406\u76f8\u5173\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u4e3b\u8981\u80fd\u529b"}),"\uff1a"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u4e8b\u4ef6\u8ba2\u9605\u4e0e\u5904\u7406\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u5e02\u573a\u6570\u636e\u63a5\u6536\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u72b6\u6001\u7ba1\u7406\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u7684\u539f\u8bed\uff08primitives\uff09\u3002"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"\u57fa\u672c\u793a\u4f8b",children:"\u57fa\u672c\u793a\u4f8b"}),"\n",(0,s.jsx)(t.p,{children:"\u4e0e\u7b56\u7565\u7c7b\u4f3c\uff0cactor \u4e5f\u901a\u8fc7\u7c7b\u4f3c\u7684\u914d\u7f6e\u6a21\u5f0f\u6765\u521d\u59cb\u5316\u3002"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from nautilus_trader.config import ActorConfig\nfrom nautilus_trader.model import InstrumentId\nfrom nautilus_trader.model import Bar, BarType\nfrom nautilus_trader.common.actor import Actor\n\n\nclass MyActorConfig(ActorConfig):\n    instrument_id: InstrumentId   # example value: "ETHUSDT-PERP.BINANCE"\n    bar_type: BarType             # example value: "ETHUSDT-PERP.BINANCE-15-MINUTE[LAST]-INTERNAL"\n    lookback_period: int = 10\n\n\nclass MyActor(Actor):\n    def __init__(self, config: MyActorConfig) -> None:\n        super().__init__(config)\n\n        # \u81ea\u5b9a\u4e49\u72b6\u6001\u53d8\u91cf\n        self.count_of_processed_bars: int = 0\n\n    def on_start(self) -> None:\n        # \u8ba2\u9605\u6240\u6709\u4f20\u5165\u7684 bar\n        self.subscribe_bars(self.config.bar_type)   # \u53ef\u4ee5\u901a\u8fc7 `self.config` \u76f4\u63a5\u8bbf\u95ee\u914d\u7f6e\n\n    def on_bar(self, bar: Bar):\n        self.count_of_processed_bars += 1\n'})}),"\n",(0,s.jsx)(t.h2,{id:"\u6570\u636e\u5904\u7406\u4e0e\u56de\u8c03",children:"\u6570\u636e\u5904\u7406\u4e0e\u56de\u8c03"}),"\n",(0,s.jsxs)(t.p,{children:["\u5728 Nautilus \u4e2d\u5904\u7406\u6570\u636e\u65f6\uff0c\u9700\u8981\u7406\u89e3\u6570\u636e\u7684 ",(0,s.jsx)(t.em,{children:"\u8bf7\u6c42/\u8ba2\u9605"}),"\uff08requests/subscriptions\uff09\u4e0e\u76f8\u5e94\u56de\u8c03\u5904\u7406\u5668\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n\u7cfb\u7edf\u4f1a\u6839\u636e\u6570\u636e\u662f\u5386\u53f2\u6570\u636e\u8fd8\u662f\u5b9e\u65f6\u6570\u636e\u9009\u62e9\u4e0d\u540c\u7684\u5904\u7406 handler\u3002"]}),"\n",(0,s.jsx)(t.h3,{id:"\u5386\u53f2\u6570\u636e-vs-\u5b9e\u65f6\u6570\u636e",children:"\u5386\u53f2\u6570\u636e vs \u5b9e\u65f6\u6570\u636e"}),"\n",(0,s.jsx)(t.p,{children:"\u7cfb\u7edf\u5c06\u6570\u636e\u6d41\u5206\u4e3a\u4e24\u7c7b\uff1a"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u5386\u53f2\u6570\u636e"}),"\uff08\u6765\u81ea ",(0,s.jsx)(t.em,{children:"requests"}),"\uff09:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\u901a\u8fc7 ",(0,s.jsx)(t.code,{children:"request_bars()"}),"\u3001",(0,s.jsx)(t.code,{children:"request_quote_ticks()"})," \u7b49\u65b9\u6cd5\u83b7\u53d6\u3002"]}),"\n",(0,s.jsxs)(t.li,{children:["\u7531 ",(0,s.jsx)(t.code,{children:"on_historical_data()"})," Handler \u5904\u7406\u3002"]}),"\n",(0,s.jsx)(t.li,{children:"\u5e38\u7528\u4e8e\u521d\u59cb\u6570\u636e\u52a0\u8f7d\u548c\u5386\u53f2\u5206\u6790\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"\u5b9e\u65f6\u6570\u636e"}),"\uff08\u6765\u81ea ",(0,s.jsx)(t.em,{children:"subscriptions"}),"\uff09:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\u901a\u8fc7 ",(0,s.jsx)(t.code,{children:"subscribe_bars()"}),"\u3001",(0,s.jsx)(t.code,{children:"subscribe_quote_ticks()"})," \u7b49\u65b9\u6cd5\u83b7\u53d6\u3002"]}),"\n",(0,s.jsxs)(t.li,{children:["\u7531\u4e13\u95e8\u7684 handler\uff08\u4f8b\u5982 ",(0,s.jsx)(t.code,{children:"on_bar()"}),"\u3001",(0,s.jsx)(t.code,{children:"on_quote_tick()"})," \u7b49\uff09\u5904\u7406\u3002"]}),"\n",(0,s.jsx)(t.li,{children:"\u7528\u4e8e\u5b9e\u65f6\uff08live\uff09\u6570\u636e\u5904\u7406\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"\u56de\u8c03\u5904\u7406\u5668\u6620\u5c04",children:"\u56de\u8c03\u5904\u7406\u5668\u6620\u5c04"}),"\n",(0,s.jsx)(t.p,{children:"\u4e0b\u9762\u5217\u51fa\u4e86\u4e0d\u540c\u6570\u636e\u64cd\u4f5c\u4e0e\u5176\u5bf9\u5e94\u7684 handler\uff1a"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Operation"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Category"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Handler"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Purpose"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u6570\u636e\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u7684 instrument \u5b9a\u4e49\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_instruments()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\uff08\u9488\u5bf9\u67d0\u4e2a venue \u7684\uff09\u4e00\u6279 instrument \u5b9a\u4e49\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_order_book_deltas()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_order_book_deltas()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u8ba2\u5355\u8584\uff08order book\uff09\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_quote_ticks()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_quote_tick()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u62a5\u4ef7\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_trade_ticks()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_trade_tick()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u6210\u4ea4\uff08trade\uff09\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_mark_prices()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_mark_price()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u6807\u8bb0\u4ef7\uff08mark price\uff09\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_index_prices()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_index_price()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6\u6307\u6570\u4ef7\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_funding_rates()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_funding_rate()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6 funding rate \u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_bars()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_bar()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6 bar \u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_instrument_status()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument_status()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5b9e\u65f6 instrument \u72b6\u6001\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_instrument_close()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument_close()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"instrument \u6536\u76d8\uff08close\uff09\u4e8b\u4ef6"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"subscribe_order_fills()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Real\u2011time"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_order_filled()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u67d0\u5408\u7ea6/\u6807\u7684\u7684\u6210\u4ea4\u56de\u62a5\u4e8b\u4ef6"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_historical_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5386\u53f2\u6570\u636e\u5904\u7406"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"instrument \u5b9a\u4e49\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_instruments()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_instrument()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"instrument \u5b9a\u4e49\u66f4\u65b0"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_quote_ticks()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_historical_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5386\u53f2\u62a5\u4ef7\u5904\u7406"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_trade_ticks()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_historical_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5386\u53f2\u6210\u4ea4\u5904\u7406"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_bars()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_historical_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5386\u53f2 bar \u5904\u7406"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"request_aggregated_bars()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Historical"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"on_historical_data()"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u5373\u65f6\u805a\u5408\u7684\u5386\u53f2 bars\uff08on-the-fly\uff09"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"\u5386\u53f2\u4e0e\u5b9e\u65f6\u6570\u636e\u793a\u4f8b",children:"\u5386\u53f2\u4e0e\u5b9e\u65f6\u6570\u636e\u793a\u4f8b"}),"\n",(0,s.jsx)(t.p,{children:"\u4e0b\u9762\u793a\u4f8b\u540c\u65f6\u6f14\u793a\u4e86\u5386\u53f2\u6570\u636e\u8bf7\u6c42\u4e0e\u5b9e\u65f6\u8ba2\u9605\u7684\u5904\u7406\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from nautilus_trader.common.actor import Actor\nfrom nautilus_trader.config import ActorConfig\nfrom nautilus_trader.core.data import Data\nfrom nautilus_trader.model import Bar, BarType\nfrom nautilus_trader.model import ClientId, InstrumentId\n\n\nclass MyActorConfig(ActorConfig):\n    instrument_id: InstrumentId  # example value: "AAPL.XNAS"\n    bar_type: BarType            # example value: "AAPL.XNAS-1-MINUTE-LAST-EXTERNAL"\n\n\nclass MyActor(Actor):\n    def __init__(self, config: MyActorConfig) -> None:\n        super().__init__(config)\n        self.bar_type = config.bar_type\n\n    def on_start(self) -> None:\n        # \u8bf7\u6c42\u5386\u53f2\u6570\u636e \u2014\u2014 \u7531 on_historical_data() \u5904\u7406\n        self.request_bars(\n            bar_type=self.bar_type,\n            # \u8bb8\u591a\u53ef\u9009\u53c2\u6570\n            start=None,                # datetime\uff0c\u53ef\u9009\n            end=None,                  # datetime\uff0c\u53ef\u9009\n            callback=None,             # \u8bf7\u6c42\u5b8c\u6210\u65f6\u5e26\u56de request ID \u7684\u56de\u8c03\n            update_catalog_mode=None,  # UpdateCatalogMode | None\uff0c\u9ed8\u8ba4 None\n            params=None,               # dict[str, Any]\uff0c\u53ef\u9009\n        )\n\n        # \u8ba2\u9605\u5b9e\u65f6\u6570\u636e \u2014\u2014 \u7531 on_bar() \u5904\u7406\n        self.subscribe_bars(\n            bar_type=self.bar_type,\n            # \u8bb8\u591a\u53ef\u9009\u53c2\u6570\n            client_id=None,  # ClientId\uff0c\u53ef\u9009\n            params=None,     # dict[str, Any]\uff0c\u53ef\u9009\n        )\n\n    def on_historical_data(self, data: Data) -> None:\n        # \u5904\u7406\u5386\u53f2\u6570\u636e\uff08\u6765\u81ea request\uff09\n        if isinstance(data, Bar):\n            self.log.info(f"Received historical bar: {data}")\n\n    def on_bar(self, bar: Bar) -> None:\n        # \u5904\u7406\u5b9e\u65f6 bar \u66f4\u65b0\uff08\u6765\u81ea\u8ba2\u9605\uff09\n        self.log.info(f"Received real-time bar: {bar}")\n'})}),"\n",(0,s.jsx)(t.p,{children:"\u5c06\u5386\u53f2\u4e0e\u5b9e\u65f6\u6570\u636e\u5904\u7406\u5668\u5206\u79bb\u6709\u5229\u4e8e\u6839\u636e\u6570\u636e\u4e0a\u4e0b\u6587\u91c7\u7528\u4e0d\u540c\u7684\u5904\u7406\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u4f1a\uff1a"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u4f7f\u7528\u5386\u53f2\u6570\u636e\u6765\u521d\u59cb\u5316\u6307\u6807\u6216\u5efa\u7acb\u57fa\u7ebf\u7edf\u8ba1\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u5728\u5b9e\u65f6\u4ea4\u6613\u51b3\u7b56\u4e2d\u5bf9\u5b9e\u65f6\u6570\u636e\u91c7\u7528\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u5bf9\u5386\u53f2\u6570\u636e\u548c\u5b9e\u65f6\u6570\u636e\u5206\u522b\u5e94\u7528\u4e0d\u540c\u7684\u6821\u9a8c\u6216\u65e5\u5fd7\u7b56\u7565\u3002"}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["\u5728\u8c03\u8bd5\u6570\u636e\u6d41\u95ee\u9898\u65f6\uff0c\u5148\u786e\u8ba4\u4f60\u5173\u6ce8\u7684\u662f\u6b63\u786e\u7684 handler\u3002\u5982\u679c\u4f60\u5728 ",(0,s.jsx)(t.code,{children:"on_bar()"})," \u4e2d\u6ca1\u6709\u770b\u5230\u6570\u636e\uff0c\u4f46\u65e5\u5fd7\u663e\u793a\u5df2\u63a5\u6536\u5230 bar\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u6570\u636e\u6765\u81ea request\uff08\u5386\u53f2\u6570\u636e\uff09\uff0c\u5e94\u68c0\u67e5 ",(0,s.jsx)(t.code,{children:"on_historical_data()"}),"\u3002"]})}),"\n",(0,s.jsx)(t.h2,{id:"\u6210\u4ea4\u56de\u62a5order-fill\u8ba2\u9605",children:"\u6210\u4ea4\u56de\u62a5\uff08Order fill\uff09\u8ba2\u9605"}),"\n",(0,s.jsxs)(t.p,{children:["Actors \u53ef\u4ee5\u901a\u8fc7 ",(0,s.jsx)(t.code,{children:"subscribe_order_fills()"})," \u8ba2\u9605\u67d0\u4e2a\u5408\u7ea6/\u6807\u7684\u7684\u6210\u4ea4\u56de\u62a5\u4e8b\u4ef6\uff0c\u8fd9\u5bf9\u4e8e\u76d1\u63a7\u4ea4\u6613\u6d3b\u52a8\u3001\u5b9e\u73b0\u81ea\u5b9a\u4e49\u6210\u4ea4\u5206\u6790\u6216\u8ffd\u8e2a\u6267\u884c\u8d28\u91cf\u975e\u5e38\u6709\u7528\u3002"]}),"\n",(0,s.jsxs)(t.p,{children:["\u8ba2\u9605\u540e\uff0c\u8be5\u6807\u7684\u7684\u6240\u6709\u6210\u4ea4\u56de\u62a5\u90fd\u4f1a\u88ab\u8f6c\u53d1\u5230 ",(0,s.jsx)(t.code,{children:"on_order_filled()"})," \u5904\u7406\u5668\uff0c\u4e0d\u8bba\u6700\u521d\u7684\u8ba2\u5355\u7531\u54ea\u4e2a\u7b56\u7565\u6216\u7ec4\u4ef6\u53d1\u51fa\u3002"]}),"\n",(0,s.jsx)(t.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from nautilus_trader.common.actor import Actor\nfrom nautilus_trader.config import ActorConfig\nfrom nautilus_trader.model import InstrumentId\nfrom nautilus_trader.model.events import OrderFilled\n\n\nclass MyActorConfig(ActorConfig):\n    instrument_id: InstrumentId  # example value: "ETHUSDT-PERP.BINANCE"\n\n\nclass FillMonitorActor(Actor):\n    def __init__(self, config: MyActorConfig) -> None:\n        super().__init__(config)\n        self.fill_count = 0\n        self.total_volume = 0.0\n\n    def on_start(self) -> None:\n        # \u8ba2\u9605\u8be5\u5408\u7ea6\u7684\u6240\u6709\u6210\u4ea4\u56de\u62a5\n        self.subscribe_order_fills(self.config.instrument_id)\n\n    def on_order_filled(self, event: OrderFilled) -> None:\n        # \u5904\u7406\u6210\u4ea4\u56de\u62a5\u4e8b\u4ef6\n        self.fill_count += 1\n        self.total_volume += float(event.last_qty)\n\n        self.log.info(\n            f"Fill received: {event.order_side} {event.last_qty} @ {event.last_px}, "\n            f"Total fills: {self.fill_count}, Volume: {self.total_volume}"\n        )\n\n    def on_stop(self) -> None:\n        # \u53d6\u6d88\u8ba2\u9605\u6210\u4ea4\u56de\u62a5\n        self.unsubscribe_order_fills(self.config.instrument_id)\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["\u6210\u4ea4\u56de\u62a5\u8ba2\u9605\u4ec5\u9650\u6d88\u606f\u603b\u7ebf\uff08message bus\uff09\uff0c\u4e0d\u901a\u8fc7\u6570\u636e\u5f15\u64ce\uff08data engine\uff09\u3002\n\u53ea\u6709 actor \u5904\u4e8e\u8fd0\u884c\uff08running\uff09\u72b6\u6001\u65f6\uff0c",(0,s.jsx)(t.code,{children:"on_order_filled()"})," \u5904\u7406\u5668\u624d\u4f1a\u63a5\u6536\u4e8b\u4ef6\u3002"]})})]})}function a(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},9087:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>d});var l=n(6363);const s={},i=l.createContext(s);function r(e){const t=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:t},e.children)}}}]);
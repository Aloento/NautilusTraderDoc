"use strict";(globalThis.webpackChunknautilus_trader=globalThis.webpackChunknautilus_trader||[]).push([[1327],{1623:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"developer_guide/adapters","title":"Adapters","description":"Introduction","source":"@site/docs/developer_guide/adapters.md","sourceDirName":"developer_guide","slug":"/developer_guide/adapters","permalink":"/developer_guide/adapters","draft":false,"unlisted":false,"editUrl":"https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/developer_guide/adapters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Developer Guide","permalink":"/developer_guide/"},"next":{"title":"Benchmarking","permalink":"/developer_guide/benchmarking"}}');var t=s(7259),i=s(9087);const a={},o="Adapters",d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Structure of an adapter",id:"structure-of-an-adapter",level:2},{value:"Rust core (<code>crates/adapters/your_adapter/</code>)",id:"rust-core-cratesadaptersyour_adapter",level:3},{value:"Python layer (<code>nautilus_trader/adapters/your_adapter</code>)",id:"python-layer-nautilus_traderadaptersyour_adapter",level:3},{value:"Adapter implementation steps",id:"adapter-implementation-steps",level:2},{value:"Rust adapter patterns",id:"rust-adapter-patterns",level:2},{value:"HTTP client patterns",id:"http-client-patterns",level:2},{value:"Client structure",id:"client-structure",level:3},{value:"Parser functions",id:"parser-functions",level:3},{value:"Method naming and organization",id:"method-naming-and-organization",level:3},{value:"Query parameter builders",id:"query-parameter-builders",level:3},{value:"Request signing and authentication",id:"request-signing-and-authentication",level:3},{value:"Error handling and retry logic",id:"error-handling-and-retry-logic",level:3},{value:"Rate limiting",id:"rate-limiting",level:3},{value:"WebSocket client patterns",id:"websocket-client-patterns",level:2},{value:"Client structure",id:"client-structure-1",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Subscription management",id:"subscription-management",level:3},{value:"Subscription lifecycle",id:"subscription-lifecycle",level:4},{value:"Topic format patterns",id:"topic-format-patterns",level:4},{value:"Reconnection logic",id:"reconnection-logic",level:3},{value:"Ping/Pong handling",id:"pingpong-handling",level:3},{value:"Message routing",id:"message-routing",level:3},{value:"Error handling",id:"error-handling",level:3},{value:"Modeling venue payloads",id:"modeling-venue-payloads",level:2},{value:"REST models (<code>http::models</code> and <code>http::query</code>)",id:"rest-models-httpmodels-and-httpquery",level:3},{value:"WebSocket messages (<code>websocket::messages</code>)",id:"websocket-messages-websocketmessages",level:3},{value:"Testing",id:"testing",level:2},{value:"Rust testing",id:"rust-testing",level:3},{value:"Layout",id:"layout",level:4},{value:"Unit tests",id:"unit-tests",level:4},{value:"Integration tests",id:"integration-tests",level:4},{value:"HTTP client integration coverage",id:"http-client-integration-coverage",level:5},{value:"WebSocket client integration coverage",id:"websocket-client-integration-coverage",level:5},{value:"Python testing",id:"python-testing",level:3},{value:"Python adapter layer",id:"python-adapter-layer",level:2},{value:"InstrumentProvider",id:"instrumentprovider",level:3},{value:"DataClient",id:"dataclient",level:3},{value:"MarketDataClient",id:"marketdataclient",level:3},{value:"ExecutionClient",id:"executionclient",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Common test scenarios",id:"common-test-scenarios",level:2},{value:"Product coverage",id:"product-coverage",level:3},{value:"Order flow",id:"order-flow",level:3},{value:"State management",id:"state-management",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"adapters",children:"Adapters"})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"This developer guide provides specifications and instructions on how to develop an integration adapter for the NautilusTrader platform.\nAdapters provide connectivity to trading venues and data providers\u2014translating raw venue APIs into Nautilus\u2019s unified interface and normalized domain model."}),"\n",(0,t.jsx)(n.h2,{id:"structure-of-an-adapter",children:"Structure of an adapter"}),"\n",(0,t.jsx)(n.p,{children:"NautilusTrader adapters follow a layered architecture pattern with:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rust core"})," for networking clients and performance-critical operations."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Python layer"})," (optional) for integrating into the legacy system."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Good references for consistent patterns are currently:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"BitMEX"}),"\n",(0,t.jsx)(n.li,{children:"Bybit"}),"\n",(0,t.jsx)(n.li,{children:"OKX"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"rust-core-cratesadaptersyour_adapter",children:["Rust core (",(0,t.jsx)(n.code,{children:"crates/adapters/your_adapter/"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"The Rust layer handles:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"HTTP client"}),": Raw API communication, request signing, rate limiting."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WebSocket client"}),": Low-latency streaming connections, message parsing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parsing"}),": Fast conversion of venue data to Nautilus domain models."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Python bindings"}),": PyO3 exports to make Rust functionality available to Python."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Typical Rust structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"crates/adapters/your_adapter/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 common/           # Shared types and utilities\n\u2502   \u2502   \u251c\u2500\u2500 consts.rs     # Venue constants / broker IDs\n\u2502   \u2502   \u251c\u2500\u2500 credential.rs # API key storage and signing helpers\n\u2502   \u2502   \u251c\u2500\u2500 enums.rs      # Venue enums mirrored in REST/WS payloads\n\u2502   \u2502   \u251c\u2500\u2500 urls.rs       # Environment & product aware base-url resolvers\n\u2502   \u2502   \u251c\u2500\u2500 parse.rs      # Shared parsing helpers\n\u2502   \u2502   \u2514\u2500\u2500 testing.rs    # Fixtures reused across unit tests\n\u2502   \u251c\u2500\u2500 http/             # HTTP client implementation\n\u2502   \u2502   \u251c\u2500\u2500 client.rs     # HTTP client with authentication\n\u2502   \u2502   \u251c\u2500\u2500 models.rs     # Structs for REST payloads\n\u2502   \u2502   \u251c\u2500\u2500 query.rs      # Request and query builders\n\u2502   \u2502   \u2514\u2500\u2500 parse.rs      # Response parsing functions\n\u2502   \u251c\u2500\u2500 websocket/        # WebSocket implementation\n\u2502   \u2502   \u251c\u2500\u2500 client.rs     # WebSocket client\n\u2502   \u2502   \u251c\u2500\u2500 messages.rs   # Structs for stream payloads\n\u2502   \u2502   \u2514\u2500\u2500 parse.rs      # Message parsing functions\n\u2502   \u251c\u2500\u2500 python/           # PyO3 Python bindings\n\u2502   \u251c\u2500\u2500 config.rs         # Configuration structures\n\u2502   \u2514\u2500\u2500 lib.rs            # Library entry point\n\u2514\u2500\u2500 tests/                # Integration tests with mock servers\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"python-layer-nautilus_traderadaptersyour_adapter",children:["Python layer (",(0,t.jsx)(n.code,{children:"nautilus_trader/adapters/your_adapter"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"The Python layer provides the integration interface through these components:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Instrument Provider"}),": Supplies instrument definitions via ",(0,t.jsx)(n.code,{children:"InstrumentProvider"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data Client"}),": Handles market data feeds and historical data requests via ",(0,t.jsx)(n.code,{children:"LiveDataClient"})," and ",(0,t.jsx)(n.code,{children:"LiveMarketDataClient"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Execution Client"}),": Manages order execution via ",(0,t.jsx)(n.code,{children:"LiveExecutionClient"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Factories"}),": Converts venue-specific data to Nautilus domain models."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration"}),": User-facing configuration classes for client settings."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Typical Python structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"nautilus_trader/adapters/your_adapter/\n\u251c\u2500\u2500 config.py     # Configuration classes\n\u251c\u2500\u2500 constants.py  # Adapter constants\n\u251c\u2500\u2500 data.py       # LiveDataClient/LiveMarketDataClient\n\u251c\u2500\u2500 execution.py  # LiveExecutionClient\n\u251c\u2500\u2500 factories.py  # Instrument factories\n\u251c\u2500\u2500 providers.py  # InstrumentProvider\n\u2514\u2500\u2500 __init__.py   # Package initialization\n"})}),"\n",(0,t.jsx)(n.h2,{id:"adapter-implementation-steps",children:"Adapter implementation steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a new Python subpackage for your adapter."}),"\n",(0,t.jsxs)(n.li,{children:["Implement the Instrument Provider by inheriting from ",(0,t.jsx)(n.code,{children:"InstrumentProvider"})," and implementing the necessary methods to load instruments."]}),"\n",(0,t.jsxs)(n.li,{children:["Implement the Data Client by inheriting from either the ",(0,t.jsx)(n.code,{children:"LiveDataClient"})," or ",(0,t.jsx)(n.code,{children:"LiveMarketDataClient"})," class as applicable, providing implementations for the required methods."]}),"\n",(0,t.jsxs)(n.li,{children:["Implement the Execution Client by inheriting from ",(0,t.jsx)(n.code,{children:"LiveExecutionClient"})," and providing implementations for the required methods."]}),"\n",(0,t.jsx)(n.li,{children:"Create configuration classes to hold your adapter\u2019s settings."}),"\n",(0,t.jsxs)(n.li,{children:["Test your adapter thoroughly to ensure all methods are correctly implemented and the adapter works as expected (see the ",(0,t.jsx)(n.a,{href:"/developer_guide/testing",children:"Testing Guide"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"rust-adapter-patterns",children:"Rust adapter patterns"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Common code (",(0,t.jsx)(n.code,{children:"common/"}),")"]}),": Group venue constants, credential helpers, enums, and reusable parsers under ",(0,t.jsx)(n.code,{children:"src/common"}),". Adapters such as OKX keep submodules like ",(0,t.jsx)(n.code,{children:"consts"}),", ",(0,t.jsx)(n.code,{children:"credential"}),", ",(0,t.jsx)(n.code,{children:"enums"}),", and ",(0,t.jsx)(n.code,{children:"urls"})," alongside a ",(0,t.jsx)(n.code,{children:"testing"})," module for fixtures, providing a single place for cross-cutting pieces. When an adapter has multiple environments or product categories, add a dedicated ",(0,t.jsx)(n.code,{children:"common::urls"})," helper so REST/WebSocket base URLs stay in sync with the Python layer."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Configurations (",(0,t.jsx)(n.code,{children:"config.rs"}),")"]}),": Expose typed config structs in ",(0,t.jsx)(n.code,{children:"src/config.rs"})," so Python callers toggle venue-specific behaviour (see how OKX wires demo URLs, retries, and channel flags). Keep defaults minimal and delegate URL selection to helpers in ",(0,t.jsx)(n.code,{children:"common::urls"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Error taxonomy (",(0,t.jsx)(n.code,{children:"error.rs"}),")"]}),": Centralise HTTP/WebSocket failure handling in an adapter-specific error enum. BitMEX, for example, separates retryable, non-retryable, and fatal variants while embedding the original transport error\u2014follow that shape so operational tooling can react consistently."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Python exports (",(0,t.jsx)(n.code,{children:"python/mod.rs"}),")"]}),": Mirror the Rust surface area through PyO3 modules by re-exporting clients, enums, and helper functions. When new functionality lands in Rust, add it to ",(0,t.jsx)(n.code,{children:"python/mod.rs"})," so the Python layer stays in sync (the OKX adapter is a good reference)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Python bindings (",(0,t.jsx)(n.code,{children:"python/"}),")"]}),": Expose Rust functionality to Python through PyO3. Mark venue-specific structs that need Python access with ",(0,t.jsx)(n.code,{children:"#[pyclass]"})," and implement ",(0,t.jsx)(n.code,{children:"#[pymethods]"})," blocks with ",(0,t.jsx)(n.code,{children:"#[getter]"})," attributes for field access. For async methods in the HTTP client, use ",(0,t.jsx)(n.code,{children:"pyo3_async_runtimes::tokio::future_into_py"})," to convert Rust futures into Python awaitables. When returning lists of custom types, map each item with ",(0,t.jsx)(n.code,{children:"Py::new(py, item)"})," before constructing the Python list. Register all exported classes and enums in ",(0,t.jsx)(n.code,{children:"python/mod.rs"})," using ",(0,t.jsx)(n.code,{children:"m.add_class::<YourType>()"})," so they're available to Python code. Follow the pattern established in other adapters: prefixing Python-facing methods with ",(0,t.jsx)(n.code,{children:"py_*"})," in Rust while using ",(0,t.jsx)(n.code,{children:'#[pyo3(name = "method_name")]'})," to expose them without the prefix."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"String interning"}),": Use ",(0,t.jsx)(n.code,{children:"ustr::Ustr"})," for any non-unique strings the platform stores repeatedly (venues, symbols, instrument IDs) to minimise allocations and comparisons."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Testing helpers (",(0,t.jsx)(n.code,{children:"common/testing.rs"}),")"]}),": Store shared fixtures and payload loaders in ",(0,t.jsx)(n.code,{children:"src/common/testing.rs"})," for use across HTTP and WebSocket unit tests. This keeps ",(0,t.jsx)(n.code,{children:"#[cfg(test)]"})," helpers out of production modules and encourages reuse."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"http-client-patterns",children:"HTTP client patterns"}),"\n",(0,t.jsx)(n.p,{children:"Adapters use a two-layer HTTP client structure to enable efficient cloning for Python bindings while keeping the actual HTTP logic in a single place."}),"\n",(0,t.jsx)(n.h3,{id:"client-structure",children:"Client structure"}),"\n",(0,t.jsxs)(n.p,{children:["Use an inner/outer client pattern with ",(0,t.jsx)(n.code,{children:"Arc"})," wrapping:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"use std::sync::Arc;\nuse nautilus_network::http::HttpClient;\n\n// Inner client - contains actual HTTP logic\npub struct MyHttpInnerClient {\n    base_url: String,\n    client: HttpClient,  // Use nautilus_network::http::HttpClient, not reqwest directly\n    credential: Option<Credential>,\n    retry_manager: RetryManager<MyHttpError>,\n    cancellation_token: CancellationToken,\n}\n\n// Outer client - wraps inner with Arc for cheap cloning (needed for Python)\npub struct MyHttpClient {\n    pub(crate) inner: Arc<MyHttpInnerClient>,\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key points"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Inner client (",(0,t.jsx)(n.code,{children:"*HttpInnerClient"}),") contains all HTTP logic and state."]}),"\n",(0,t.jsxs)(n.li,{children:["Outer client (",(0,t.jsx)(n.code,{children:"*HttpClient"}),") wraps the inner client in an ",(0,t.jsx)(n.code,{children:"Arc"})," for efficient cloning."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"nautilus_network::http::HttpClient"})," instead of ",(0,t.jsx)(n.code,{children:"reqwest::Client"})," directly - this provides rate limiting, retry logic, and consistent error handling."]}),"\n",(0,t.jsx)(n.li,{children:"The outer client delegates all methods to the inner client."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"parser-functions",children:"Parser functions"}),"\n",(0,t.jsxs)(n.p,{children:["Parser functions convert venue-specific data structures into Nautilus domain objects. These belong in ",(0,t.jsx)(n.code,{children:"common/parse.rs"})," for cross-cutting conversions (instruments, trades, bars) or ",(0,t.jsx)(n.code,{children:"http/parse.rs"})," for REST-specific transformations. Each parser takes venue data plus context (account IDs, timestamps, instrument references) and returns a Nautilus domain type wrapped in ",(0,t.jsx)(n.code,{children:"Result"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Standard patterns:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Handle string-to-numeric conversions with proper error context using ",(0,t.jsx)(n.code,{children:".parse::<f64>()"})," and ",(0,t.jsx)(n.code,{children:"anyhow::Context"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Check for empty strings before parsing optional fields - venues often return ",(0,t.jsx)(n.code,{children:'""'})," instead of omitting fields."]}),"\n",(0,t.jsxs)(n.li,{children:["Map venue enums to Nautilus enums explicitly with ",(0,t.jsx)(n.code,{children:"match"})," statements rather than implementing automatic conversions that could hide mapping errors."]}),"\n",(0,t.jsx)(n.li,{children:"Accept instrument references when precision or other metadata is required for constructing Nautilus types (quantities, prices)."}),"\n",(0,t.jsxs)(n.li,{children:["Use descriptive function names: ",(0,t.jsx)(n.code,{children:"parse_position_status_report"}),", ",(0,t.jsx)(n.code,{children:"parse_order_status_report"}),", ",(0,t.jsx)(n.code,{children:"parse_trade_tick"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Place parsing helpers (",(0,t.jsx)(n.code,{children:"parse_price_with_precision"}),", ",(0,t.jsx)(n.code,{children:"parse_timestamp"}),") in the same module as private functions when they're reused across multiple parsers."]}),"\n",(0,t.jsx)(n.h3,{id:"method-naming-and-organization",children:"Method naming and organization"}),"\n",(0,t.jsx)(n.p,{children:"Organize HTTP methods into two distinct sections:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Low-level direct API calls."}),"\n",(0,t.jsx)(n.li,{children:"High-level domain methods."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Naming conventions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Low-level API methods"}),": Prefix with ",(0,t.jsx)(n.code,{children:"http_"})," and place near the top of the impl block (e.g., ",(0,t.jsx)(n.code,{children:"http_get_instruments"}),", ",(0,t.jsx)(n.code,{children:"http_place_order"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High-level domain methods"}),": No prefix, placed in a separate section (e.g., ",(0,t.jsx)(n.code,{children:"submit_order"}),", ",(0,t.jsx)(n.code,{children:"cancel_order"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"Low-level methods take venue-specific types (builders, JSON values)."}),"\n",(0,t.jsx)(n.li,{children:"High-level methods take Nautilus domain objects (InstrumentId, ClientOrderId, OrderSide, etc.)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"High-level method flow:"})}),"\n",(0,t.jsxs)(n.p,{children:["High-level domain methods in the inner client follow a three-step pattern: build venue-specific parameters from Nautilus types, call the corresponding ",(0,t.jsx)(n.code,{children:"http_*"})," method, then parse or extract the response. For endpoints returning domain objects (positions, orders, trades), call parser functions from ",(0,t.jsx)(n.code,{children:"common/parse"}),". For endpoints returning raw venue data (fee rates, balances), extract the result directly from the response envelope. Methods prefixed with ",(0,t.jsx)(n.code,{children:"request_*"})," indicate they return domain data, while methods like ",(0,t.jsx)(n.code,{children:"submit_*"}),", ",(0,t.jsx)(n.code,{children:"cancel_*"}),", or ",(0,t.jsx)(n.code,{children:"modify_*"})," perform actions and return acknowledgments."]}),"\n",(0,t.jsxs)(n.p,{children:["The outer client delegates all methods directly to the inner client without additional logic - this separation exists solely to enable cheap cloning for Python bindings via ",(0,t.jsx)(n.code,{children:"Arc"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"query-parameter-builders",children:"Query parameter builders"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"derive_builder"})," crate with proper defaults and ergonomic Option handling:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'use derive_builder::Builder;\n\n#[derive(Clone, Debug, Deserialize, Serialize, Builder)]\n#[serde(rename_all = "camelCase")]\n#[builder(setter(into, strip_option), default)]\npub struct InstrumentsInfoParams {\n    pub category: ProductType,\n    #[serde(skip_serializing_if = "Option::is_none")]\n    pub symbol: Option<String>,\n    #[serde(skip_serializing_if = "Option::is_none")]\n    pub limit: Option<u32>,\n}\n\nimpl Default for InstrumentsInfoParams {\n    fn default() -> Self {\n        Self {\n            category: ProductType::Linear,\n            symbol: None,\n            limit: None,\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key attributes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"#[builder(setter(into, strip_option), default)]"})," - enables clean API: ",(0,t.jsx)(n.code,{children:'.symbol("BTCUSDT")'})," instead of ",(0,t.jsx)(n.code,{children:'.symbol(Some("BTCUSDT".to_string()))'}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'#[serde(skip_serializing_if = "Option::is_none")]'})," - omits optional fields from query strings."]}),"\n",(0,t.jsxs)(n.li,{children:["Always implement ",(0,t.jsx)(n.code,{children:"Default"})," for builder parameters."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"request-signing-and-authentication",children:"Request signing and authentication"}),"\n",(0,t.jsx)(n.p,{children:"Keep signing logic in the inner client."}),"\n",(0,t.jsx)(n.h3,{id:"error-handling-and-retry-logic",children:"Error handling and retry logic"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"RetryManager"})," from ",(0,t.jsx)(n.code,{children:"nautilus_network"})," for consistent retry behavior."]}),"\n",(0,t.jsx)(n.h3,{id:"rate-limiting",children:"Rate limiting"}),"\n",(0,t.jsxs)(n.p,{children:["Configure rate limiting through ",(0,t.jsx)(n.code,{children:"HttpClient"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"websocket-client-patterns",children:"WebSocket client patterns"}),"\n",(0,t.jsx)(n.p,{children:"WebSocket clients handle real-time streaming data and require careful management of connection state, authentication, subscriptions, and reconnection logic."}),"\n",(0,t.jsx)(n.h3,{id:"client-structure-1",children:"Client structure"}),"\n",(0,t.jsx)(n.p,{children:"WebSocket clients typically don't need the inner/outer pattern since they're not frequently cloned. Use a single struct with clear state management."}),"\n",(0,t.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Handle authentication separately from subscriptions."}),"\n",(0,t.jsx)(n.h3,{id:"subscription-management",children:"Subscription management"}),"\n",(0,t.jsx)(n.h4,{id:"subscription-lifecycle",children:"Subscription lifecycle"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"subscription"})," represents any topic in one of two states:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"State"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Pending"})}),(0,t.jsx)(n.td,{children:"Subscription request sent to venue, awaiting acknowledgment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Confirmed"})}),(0,t.jsx)(n.td,{children:"Venue acknowledged subscription and is actively streaming data"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"State transitions follow this lifecycle:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Trigger"}),(0,t.jsx)(n.th,{children:"Method Called"}),(0,t.jsx)(n.th,{children:"From State"}),(0,t.jsx)(n.th,{children:"To State"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"User subscribes"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mark_subscribe()"})}),(0,t.jsx)(n.td,{children:"\u2014"}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Topic added to pending set"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Venue confirms"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"confirm()"})}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Confirmed"}),(0,t.jsx)(n.td,{children:"Moved from pending to confirmed"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Venue rejects"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mark_failure()"})}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Stays pending for retry on reconnect"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"User unsubscribes"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"mark_unsubscribe()"})}),(0,t.jsx)(n.td,{children:"Confirmed"}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Temporarily pending until ack"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Unsubscribe ack"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"clear_pending()"})}),(0,t.jsx)(n.td,{children:"Pending"}),(0,t.jsx)(n.td,{children:"Removed"}),(0,t.jsx)(n.td,{children:"Topic fully removed"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key principles"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"subscription_count()"})," reports ",(0,t.jsx)(n.strong,{children:"only confirmed subscriptions"}),", not pending ones."]}),"\n",(0,t.jsx)(n.li,{children:"Failed subscriptions remain pending and are automatically retried on reconnect."}),"\n",(0,t.jsx)(n.li,{children:"Both confirmed and pending subscriptions are restored after reconnection."}),"\n",(0,t.jsxs)(n.li,{children:["Unsubscribe operations must check the ",(0,t.jsx)(n.code,{children:"op"})," field in acknowledgments to avoid re-confirming topics."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"topic-format-patterns",children:"Topic format patterns"}),"\n",(0,t.jsx)(n.p,{children:"Adapters use venue-specific delimiters to structure subscription topics:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Adapter"}),(0,t.jsx)(n.th,{children:"Delimiter"}),(0,t.jsx)(n.th,{children:"Example"}),(0,t.jsx)(n.th,{children:"Pattern"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"BitMEX"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:":"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trade:XBTUSD"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{channel}:{symbol}"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"OKX"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:":"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"trades:BTC-USDT-SWAP"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{channel}:{symbol}"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Bybit"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"."})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"orderbook.50.BTCUSDT"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{channel}.{depth}.{symbol}"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Parse topics using ",(0,t.jsx)(n.code,{children:"split_once()"})," with the appropriate delimiter to extract channel and symbol components."]}),"\n",(0,t.jsx)(n.h3,{id:"reconnection-logic",children:"Reconnection logic"}),"\n",(0,t.jsx)(n.p,{children:"On reconnection, restore authentication and public subscriptions, but skip private channels that were explicitly unsubscribed."}),"\n",(0,t.jsx)(n.h3,{id:"pingpong-handling",children:"Ping/Pong handling"}),"\n",(0,t.jsx)(n.p,{children:"Support both control frame pings and application-level pings."}),"\n",(0,t.jsx)(n.h3,{id:"message-routing",children:"Message routing"}),"\n",(0,t.jsx)(n.p,{children:"Route different message types to appropriate handlers."}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error handling"}),"\n",(0,t.jsx)(n.p,{children:"Classify errors to determine retry behavior:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'#[derive(Debug, thiserror::Error)]\npub enum WebSocketError {\n    #[error("Connection failed: {0}")]\n    ConnectionFailed(String),\n\n    #[error("Authentication failed: {0}")]\n    AuthenticationFailed(String),\n\n    #[error("Subscription failed: {0}")]\n    SubscriptionFailed(String),\n\n    #[error("Message parse error: {0}")]\n    ParseError(String),\n}\n\nimpl MyWebSocketClient {\n    fn should_reconnect(&self, error: &WebSocketError) -> bool {\n        matches!(\n            error,\n            WebSocketError::ConnectionFailed(_)\n        )\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"modeling-venue-payloads",children:"Modeling venue payloads"}),"\n",(0,t.jsx)(n.p,{children:"Use the following conventions when mirroring upstream schemas in Rust."}),"\n",(0,t.jsxs)(n.h3,{id:"rest-models-httpmodels-and-httpquery",children:["REST models (",(0,t.jsx)(n.code,{children:"http::models"})," and ",(0,t.jsx)(n.code,{children:"http::query"}),")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Put request and response representations in ",(0,t.jsx)(n.code,{children:"src/http/models.rs"})," and derive ",(0,t.jsx)(n.code,{children:"serde::Deserialize"})," (add ",(0,t.jsx)(n.code,{children:"serde::Serialize"})," when the adapter sends data back)."]}),"\n",(0,t.jsxs)(n.li,{children:["Mirror upstream payload names with blanket casing attributes such as ",(0,t.jsx)(n.code,{children:'#[serde(rename_all = "camelCase")]'})," or ",(0,t.jsx)(n.code,{children:'#[serde(rename_all = "snake_case")]'}),"; only add per-field renames when the upstream key would be an invalid Rust identifier or collide with a keyword (for example ",(0,t.jsx)(n.code,{children:'#[serde(rename = "type")] pub order_type: String'}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Keep helper structs for query parameters in ",(0,t.jsx)(n.code,{children:"src/http/query.rs"}),", deriving ",(0,t.jsx)(n.code,{children:"serde::Serialize"})," to remain type-safe and reusing constants from ",(0,t.jsx)(n.code,{children:"common::consts"})," instead of duplicating literals."]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"websocket-messages-websocketmessages",children:["WebSocket messages (",(0,t.jsx)(n.code,{children:"websocket::messages"}),")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Define streaming payload types in ",(0,t.jsx)(n.code,{children:"src/websocket/messages.rs"}),", giving each venue topic a struct or enum that mirrors the upstream JSON."]}),"\n",(0,t.jsxs)(n.li,{children:["Apply the same naming guidance as REST models: rely on blanket casing renames and keep field names aligned with the venue unless syntax forces a change; consider serde helpers such as ",(0,t.jsx)(n.code,{children:'#[serde(tag = "op")]'})," or ",(0,t.jsx)(n.code,{children:"#[serde(flatten)]"})," and document the choice."]}),"\n",(0,t.jsx)(n.li,{children:"Note any intentional deviations from the upstream schema in code comments and module docs so other contributors can follow the mapping quickly."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.p,{children:"Adapters should ship two layers of coverage: the Rust crate that talks to the venue and the Python glue that exposes it to the wider platform.\nKeep the suites deterministic and colocated with the production code they protect."}),"\n",(0,t.jsx)(n.h3,{id:"rust-testing",children:"Rust testing"}),"\n",(0,t.jsx)(n.h4,{id:"layout",children:"Layout"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"crates/adapters/your_adapter/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 http/\n\u2502   \u2502   \u251c\u2500\u2500 client.rs      # HTTP client + unit tests\n\u2502   \u2502   \u2514\u2500\u2500 parse.rs       # REST payload parsers + unit tests\n\u2502   \u2514\u2500\u2500 websocket/\n\u2502       \u251c\u2500\u2500 client.rs      # WebSocket client + unit tests\n\u2502       \u2514\u2500\u2500 parse.rs       # Streaming parsers + unit tests\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 http.rs            # Mock HTTP integration tests\n\u2502   \u2514\u2500\u2500 websocket.rs       # Mock WebSocket integration tests\n\u2514\u2500\u2500 test_data/             # Canonical venue payloads used by the suites\n    \u251c\u2500\u2500 http_get_{endpoint}.json  # Full venue responses with retCode/result/time\n    \u2514\u2500\u2500 ws_{message_type}.json    # WebSocket message samples\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Place unit tests next to the module they exercise (",(0,t.jsx)(n.code,{children:"#[cfg(test)]"})," blocks). Use ",(0,t.jsx)(n.code,{children:"src/common/testing.rs"})," (or an equivalent helper module) for shared fixtures so production files stay tidy."]}),"\n",(0,t.jsxs)(n.li,{children:["Keep Axum-based integration suites under ",(0,t.jsx)(n.code,{children:"crates/adapters/<adapter>/tests/"}),", mirroring the public APIs (HTTP client, WebSocket client, caches, reconnection flows)."]}),"\n",(0,t.jsxs)(n.li,{children:["Store upstream payload samples (snapshots, REST replies) under ",(0,t.jsx)(n.code,{children:"test_data/"})," and reference them from both unit and integration tests. Name test data files consistently: ",(0,t.jsx)(n.code,{children:"http_get_{endpoint_name}.json"})," for REST responses, ",(0,t.jsx)(n.code,{children:"ws_{message_type}.json"})," for WebSocket messages. Include complete venue response envelopes (status codes, timestamps, result wrappers) rather than just the data payload. Provide multiple realistic examples in each file - for instance, position data should include long, short, and flat positions to exercise all parser branches."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"unit-tests",children:"Unit tests"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Focus on pure logic: parsers, signing helpers, canonicalisers, and any business rules that do not require a live transport."}),"\n",(0,t.jsx)(n.li,{children:"Avoid duplicating coverage that the integration tests already provide."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"integration-tests",children:"Integration tests"}),"\n",(0,t.jsxs)(n.p,{children:["Exercise the public API against Axum mock servers. At a minimum, mirror the BitMEX test surface (see\n",(0,t.jsx)(n.code,{children:"crates/adapters/bitmex/tests/"}),") so every adapter proves the same behaviours."]}),"\n",(0,t.jsx)(n.h5,{id:"http-client-integration-coverage",children:"HTTP client integration coverage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Happy paths"})," \u2013 fetch a representative public resource (e.g., instruments or mark price) and ensure the\nresponse is converted into Nautilus domain models."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Credential guard"})," \u2013 call a private endpoint without credentials and assert a structured error; repeat with\ncredentials to prove success."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rate limiting / retry mapping"})," \u2013 surface venue-specific rate-limit responses and assert the adapter produces\nthe correct ",(0,t.jsx)(n.code,{children:"OkxError"}),"/",(0,t.jsx)(n.code,{children:"BitmexHttpError"})," variant so the retry policy can react."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Query builders"})," \u2013 exercise builders for paginated/time-bounded endpoints (historical trades, candles) and\nassert the emitted query string matches the venue specification (",(0,t.jsx)(n.code,{children:"after"}),", ",(0,t.jsx)(n.code,{children:"before"}),", ",(0,t.jsx)(n.code,{children:"limit"}),", etc.)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error translation"})," \u2013 verify non-2xx upstream responses map to adapter error enums with the original code/message attached."]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"websocket-client-integration-coverage",children:"WebSocket client integration coverage"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Login handshake"})," \u2013 confirm a successful login flips the internal auth state and test failure cases where the\nserver returns a non-zero code; the client should surface an error and avoid marking itself as authenticated."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Ping/Pong"})," \u2013 prove both text-based and control-frame pings trigger immediate pong responses."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Subscription lifecycle"})," \u2013 assert subscription requests/acks are emitted for public and private channels, and that\nunsubscribe calls remove entries from the cached subscription sets."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Reconnect behaviour"})," \u2013 simulate a disconnect and ensure the client re-authenticates, restores public channels,\nand skips private channels that were explicitly unsubscribed pre-disconnect."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Message routing"})," \u2013 feed representative data/ack/error payloads through the socket and assert they arrive on the\npublic stream as the correct ",(0,t.jsx)(n.code,{children:"NautilusWsMessage"})," variant."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Quota tagging"})," \u2013 (optional but recommended) validate that order/cancel/amend operations are tagged with the\nappropriate quota label so rate limiting can be enforced independently of subscription traffic."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Prefer event-driven assertions with shared state (for example, collect ",(0,t.jsx)(n.code,{children:"subscription_events"}),", track\npending/confirmed topics, wait for ",(0,t.jsx)(n.code,{children:"connection_count"})," transitions) instead of arbitrary ",(0,t.jsx)(n.code,{children:"sleep"})," calls."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:'Use adapter-specific helpers to gate on explicit signals such as "auth confirmed" or "reconnection finished" so\nsuites remain deterministic under load.'}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"python-testing",children:"Python testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Exercise the adapter\u2019s Python surface (instrument providers, data/execution clients, factories) inside ",(0,t.jsx)(n.code,{children:"tests/integration_tests/adapters/<adapter>/"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Mock the PyO3 boundary (",(0,t.jsx)(n.code,{children:"nautilus_pyo3"})," shims, stubbed Rust clients) so tests stay fast while verifying that configuration, factory wiring, and error handling match the exported Rust API."]}),"\n",(0,t.jsx)(n.li,{children:"Mirror the Rust integration coverage: when the Rust suite adds a new behaviour (e.g., reconnection replay, error\npropagation), assert the Python layer performs the same sequence (connect/disconnect, submit/amend/cancel\ntranslations, venue ID hand-off, failure handling). BitMEX\u2019s Python tests provide the target level of detail."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"python-adapter-layer",children:"Python adapter layer"}),"\n",(0,t.jsx)(n.p,{children:"Below is a step-by-step guide to building an adapter for a new data provider using the provided template."}),"\n",(0,t.jsx)(n.h3,{id:"instrumentprovider",children:"InstrumentProvider"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"InstrumentProvider"})," supplies instrument definitions available on the venue. This\nincludes loading all available instruments, specific instruments by ID, and applying filters to the\ninstrument list."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.common.providers import InstrumentProvider\nfrom nautilus_trader.model import InstrumentId\n\n\nclass TemplateInstrumentProvider(InstrumentProvider):\n    """Example `InstrumentProvider` showing the minimal overrides required for a complete integration."""\n\n    async def load_all_async(self, filters: dict | None = None) -> None:\n        raise NotImplementedError("implement `load_all_async` in your adapter subclass")\n\n    async def load_ids_async(self, instrument_ids: list[InstrumentId], filters: dict | None = None) -> None:\n        raise NotImplementedError("implement `load_ids_async` in your adapter subclass")\n\n    async def load_async(self, instrument_id: InstrumentId, filters: dict | None = None) -> None:\n        raise NotImplementedError("implement `load_async` in your adapter subclass")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key methods"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"load_all_async"}),": Loads all instruments asynchronously, optionally applying filters."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"load_ids_async"}),": Loads specific instruments by their IDs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"load_async"}),": Loads a single instrument by its ID."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dataclient",children:"DataClient"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"LiveDataClient"})," handles the subscription and management of data feeds that are not specifically\nrelated to market data. This might include news feeds, custom data streams, or other data sources\nthat enhance trading strategies but do not directly represent market activity."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.data.messages import RequestData\nfrom nautilus_trader.data.messages import SubscribeData\nfrom nautilus_trader.data.messages import UnsubscribeData\nfrom nautilus_trader.live.data_client import LiveDataClient\nfrom nautilus_trader.model import DataType\n\n\nclass TemplateLiveDataClient(LiveDataClient):\n    """Example `LiveDataClient` showing the overridable abstract methods."""\n\n    async def _connect(self) -> None:\n        raise NotImplementedError("implement `_connect` in your adapter subclass")\n\n    async def _disconnect(self) -> None:\n        raise NotImplementedError("implement `_disconnect` in your adapter subclass")\n\n    async def _subscribe(self, command: SubscribeData) -> None:\n        raise NotImplementedError("implement `_subscribe` in your adapter subclass")\n\n    async def _unsubscribe(self, command: UnsubscribeData) -> None:\n        raise NotImplementedError("implement `_unsubscribe` in your adapter subclass")\n\n    async def _request(self, request: RequestData) -> None:\n        raise NotImplementedError("implement `_request` in your adapter subclass")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key methods"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_connect"}),": Establishes a connection to the data provider."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_disconnect"}),": Closes the connection to the data provider."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe"}),": Subscribes to a specific data type."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe"}),": Unsubscribes from a specific data type."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request"}),": Requests data from the provider."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"marketdataclient",children:"MarketDataClient"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"MarketDataClient"})," handles market-specific data such as order books, top-of-book quotes and trades,\nand instrument status updates. It focuses on providing historical and real-time market data that is essential for\ntrading operations."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.data.messages import RequestBars\nfrom nautilus_trader.data.messages import RequestData\nfrom nautilus_trader.data.messages import RequestInstrument\nfrom nautilus_trader.data.messages import RequestInstruments\nfrom nautilus_trader.data.messages import RequestOrderBookSnapshot\nfrom nautilus_trader.data.messages import RequestQuoteTicks\nfrom nautilus_trader.data.messages import RequestTradeTicks\nfrom nautilus_trader.data.messages import SubscribeBars\nfrom nautilus_trader.data.messages import SubscribeData\nfrom nautilus_trader.data.messages import SubscribeFundingRates\nfrom nautilus_trader.data.messages import SubscribeIndexPrices\nfrom nautilus_trader.data.messages import SubscribeInstrument\nfrom nautilus_trader.data.messages import SubscribeInstrumentClose\nfrom nautilus_trader.data.messages import SubscribeInstruments\nfrom nautilus_trader.data.messages import SubscribeInstrumentStatus\nfrom nautilus_trader.data.messages import SubscribeMarkPrices\nfrom nautilus_trader.data.messages import SubscribeOrderBook\nfrom nautilus_trader.data.messages import SubscribeQuoteTicks\nfrom nautilus_trader.data.messages import SubscribeTradeTicks\nfrom nautilus_trader.data.messages import UnsubscribeBars\nfrom nautilus_trader.data.messages import UnsubscribeData\nfrom nautilus_trader.data.messages import UnsubscribeFundingRates\nfrom nautilus_trader.data.messages import UnsubscribeIndexPrices\nfrom nautilus_trader.data.messages import UnsubscribeInstrument\nfrom nautilus_trader.data.messages import UnsubscribeInstrumentClose\nfrom nautilus_trader.data.messages import UnsubscribeInstruments\nfrom nautilus_trader.data.messages import UnsubscribeInstrumentStatus\nfrom nautilus_trader.data.messages import UnsubscribeMarkPrices\nfrom nautilus_trader.data.messages import UnsubscribeOrderBook\nfrom nautilus_trader.data.messages import UnsubscribeQuoteTicks\nfrom nautilus_trader.data.messages import UnsubscribeTradeTicks\nfrom nautilus_trader.live.data_client import LiveMarketDataClient\n\n\nclass TemplateLiveMarketDataClient(LiveMarketDataClient):\n    """Example `LiveMarketDataClient` showing the overridable abstract methods."""\n\n    async def _connect(self) -> None:\n        raise NotImplementedError("implement `_connect` in your adapter subclass")\n\n    async def _disconnect(self) -> None:\n        raise NotImplementedError("implement `_disconnect` in your adapter subclass")\n\n    async def _subscribe(self, command: SubscribeData) -> None:\n        raise NotImplementedError("implement `_subscribe` in your adapter subclass")\n\n    async def _unsubscribe(self, command: UnsubscribeData) -> None:\n        raise NotImplementedError("implement `_unsubscribe` in your adapter subclass")\n\n    async def _request(self, request: RequestData) -> None:\n        raise NotImplementedError("implement `_request` in your adapter subclass")\n\n    async def _subscribe_instruments(self, command: SubscribeInstruments) -> None:\n        raise NotImplementedError("implement `_subscribe_instruments` in your adapter subclass")\n\n    async def _unsubscribe_instruments(self, command: UnsubscribeInstruments) -> None:\n        raise NotImplementedError("implement `_unsubscribe_instruments` in your adapter subclass")\n\n    async def _subscribe_instrument(self, command: SubscribeInstrument) -> None:\n        raise NotImplementedError("implement `_subscribe_instrument` in your adapter subclass")\n\n    async def _unsubscribe_instrument(self, command: UnsubscribeInstrument) -> None:\n        raise NotImplementedError("implement `_unsubscribe_instrument` in your adapter subclass")\n\n    async def _subscribe_order_book_deltas(self, command: SubscribeOrderBook) -> None:\n        raise NotImplementedError("implement `_subscribe_order_book_deltas` in your adapter subclass")\n\n    async def _unsubscribe_order_book_deltas(self, command: UnsubscribeOrderBook) -> None:\n        raise NotImplementedError("implement `_unsubscribe_order_book_deltas` in your adapter subclass")\n\n    async def _subscribe_order_book_snapshots(self, command: SubscribeOrderBook) -> None:\n        raise NotImplementedError("implement `_subscribe_order_book_snapshots` in your adapter subclass")\n\n    async def _unsubscribe_order_book_snapshots(self, command: UnsubscribeOrderBook) -> None:\n        raise NotImplementedError("implement `_unsubscribe_order_book_snapshots` in your adapter subclass")\n\n    async def _subscribe_quote_ticks(self, command: SubscribeQuoteTicks) -> None:\n        raise NotImplementedError("implement `_subscribe_quote_ticks` in your adapter subclass")\n\n    async def _unsubscribe_quote_ticks(self, command: UnsubscribeQuoteTicks) -> None:\n        raise NotImplementedError("implement `_unsubscribe_quote_ticks` in your adapter subclass")\n\n    async def _subscribe_trade_ticks(self, command: SubscribeTradeTicks) -> None:\n        raise NotImplementedError("implement `_subscribe_trade_ticks` in your adapter subclass")\n\n    async def _unsubscribe_trade_ticks(self, command: UnsubscribeTradeTicks) -> None:\n        raise NotImplementedError("implement `_unsubscribe_trade_ticks` in your adapter subclass")\n\n    async def _subscribe_mark_prices(self, command: SubscribeMarkPrices) -> None:\n        raise NotImplementedError("implement `_subscribe_mark_prices` in your adapter subclass")\n\n    async def _unsubscribe_mark_prices(self, command: UnsubscribeMarkPrices) -> None:\n        raise NotImplementedError("implement `_unsubscribe_mark_prices` in your adapter subclass")\n\n    async def _subscribe_index_prices(self, command: SubscribeIndexPrices) -> None:\n        raise NotImplementedError("implement `_subscribe_index_prices` in your adapter subclass")\n\n    async def _unsubscribe_index_prices(self, command: UnsubscribeIndexPrices) -> None:\n        raise NotImplementedError("implement `_unsubscribe_index_prices` in your adapter subclass")\n\n    async def _subscribe_funding_rates(self, command: SubscribeFundingRates) -> None:\n        raise NotImplementedError("implement `_subscribe_funding_rates` in your adapter subclass")\n\n    async def _unsubscribe_funding_rates(self, command: UnsubscribeFundingRates) -> None:\n        raise NotImplementedError("implement `_unsubscribe_funding_rates` in your adapter subclass")\n\n    async def _subscribe_bars(self, command: SubscribeBars) -> None:\n        raise NotImplementedError("implement `_subscribe_bars` in your adapter subclass")\n\n    async def _unsubscribe_bars(self, command: UnsubscribeBars) -> None:\n        raise NotImplementedError("implement `_unsubscribe_bars` in your adapter subclass")\n\n    async def _subscribe_instrument_status(self, command: SubscribeInstrumentStatus) -> None:\n        raise NotImplementedError("implement `_subscribe_instrument_status` in your adapter subclass")\n\n    async def _unsubscribe_instrument_status(self, command: UnsubscribeInstrumentStatus) -> None:\n        raise NotImplementedError("implement `_unsubscribe_instrument_status` in your adapter subclass")\n\n    async def _subscribe_instrument_close(self, command: SubscribeInstrumentClose) -> None:\n        raise NotImplementedError("implement `_subscribe_instrument_close` in your adapter subclass")\n\n    async def _unsubscribe_instrument_close(self, command: UnsubscribeInstrumentClose) -> None:\n        raise NotImplementedError("implement `_unsubscribe_instrument_close` in your adapter subclass")\n\n    async def _request_instrument(self, request: RequestInstrument) -> None:\n        raise NotImplementedError("implement `_request_instrument` in your adapter subclass")\n\n    async def _request_instruments(self, request: RequestInstruments) -> None:\n        raise NotImplementedError("implement `_request_instruments` in your adapter subclass")\n\n    async def _request_quote_ticks(self, request: RequestQuoteTicks) -> None:\n        raise NotImplementedError("implement `_request_quote_ticks` in your adapter subclass")\n\n    async def _request_trade_ticks(self, request: RequestTradeTicks) -> None:\n        raise NotImplementedError("implement `_request_trade_ticks` in your adapter subclass")\n\n    async def _request_bars(self, request: RequestBars) -> None:\n        raise NotImplementedError("implement `_request_bars` in your adapter subclass")\n\n    async def _request_order_book_snapshot(self, request: RequestOrderBookSnapshot) -> None:\n        raise NotImplementedError("implement `_request_order_book_snapshot` in your adapter subclass")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key methods"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_connect"}),": Establishes a connection to the venue APIs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_disconnect"}),": Closes the connection to the venue APIs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe"}),": Subscribes to generic data (base method for custom data types)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe"}),": Unsubscribes from generic data (base method for custom data types)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request"}),": Requests generic data (base method for custom data types)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_instruments"}),": Subscribes to market data for multiple instruments."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_instruments"}),": Unsubscribes from market data for multiple instruments."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_instrument"}),": Subscribes to market data for a single instrument."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_instrument"}),": Unsubscribes from market data for a single instrument."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_order_book_deltas"}),": Subscribes to order book delta updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_order_book_deltas"}),": Unsubscribes from order book delta updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_order_book_snapshots"}),": Subscribes to order book snapshot updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_order_book_snapshots"}),": Unsubscribes from order book snapshot updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_quote_ticks"}),": Subscribes to top-of-book quote updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_quote_ticks"}),": Unsubscribes from quote tick updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_trade_ticks"}),": Subscribes to trade tick updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_trade_ticks"}),": Unsubscribes from trade tick updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_mark_prices"}),": Subscribes to mark price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_mark_prices"}),": Unsubscribes from mark price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_index_prices"}),": Subscribes to index price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_index_prices"}),": Unsubscribes from index price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_funding_rates"}),": Subscribes to funding rate updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_funding_rates"}),": Unsubscribes from funding rate updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_bars"}),": Subscribes to bar/candlestick updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_bars"}),": Unsubscribes from bar updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_instrument_status"}),": Subscribes to instrument status updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_instrument_status"}),": Unsubscribes from instrument status updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_subscribe_instrument_close"}),": Subscribes to instrument close price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_unsubscribe_instrument_close"}),": Unsubscribes from instrument close price updates."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_instrument"}),": Requests historical data for a single instrument."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_instruments"}),": Requests historical data for multiple instruments."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_quote_ticks"}),": Requests historical quote tick data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_trade_ticks"}),": Requests historical trade tick data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_bars"}),": Requests historical bar data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_request_order_book_snapshot"}),": Requests an order book snapshot."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"executionclient",children:"ExecutionClient"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ExecutionClient"})," is responsible for order management, including submission, modification, and\ncancellation of orders. It is a crucial component of the adapter that interacts with the venue\ntrading system to manage and execute trades."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.execution.messages import BatchCancelOrders\nfrom nautilus_trader.execution.messages import CancelAllOrders\nfrom nautilus_trader.execution.messages import CancelOrder\nfrom nautilus_trader.execution.messages import GenerateFillReports\nfrom nautilus_trader.execution.messages import GenerateOrderStatusReport\nfrom nautilus_trader.execution.messages import GenerateOrderStatusReports\nfrom nautilus_trader.execution.messages import GeneratePositionStatusReports\nfrom nautilus_trader.execution.messages import ModifyOrder\nfrom nautilus_trader.execution.messages import SubmitOrder\nfrom nautilus_trader.execution.messages import SubmitOrderList\nfrom nautilus_trader.execution.reports import FillReport\nfrom nautilus_trader.execution.reports import OrderStatusReport\nfrom nautilus_trader.execution.reports import PositionStatusReport\nfrom nautilus_trader.live.execution_client import LiveExecutionClient\n\n\nclass TemplateLiveExecutionClient(LiveExecutionClient):\n    """Example `LiveExecutionClient` outlining the required overrides."""\n\n    async def _connect(self) -> None:\n        raise NotImplementedError("implement `_connect` in your adapter subclass")\n\n    async def _disconnect(self) -> None:\n        raise NotImplementedError("implement `_disconnect` in your adapter subclass")\n\n    async def _submit_order(self, command: SubmitOrder) -> None:\n        raise NotImplementedError("implement `_submit_order` in your adapter subclass")\n\n    async def _submit_order_list(self, command: SubmitOrderList) -> None:\n        raise NotImplementedError("implement `_submit_order_list` in your adapter subclass")\n\n    async def _modify_order(self, command: ModifyOrder) -> None:\n        raise NotImplementedError("implement `_modify_order` in your adapter subclass")\n\n    async def _cancel_order(self, command: CancelOrder) -> None:\n        raise NotImplementedError("implement `_cancel_order` in your adapter subclass")\n\n    async def _cancel_all_orders(self, command: CancelAllOrders) -> None:\n        raise NotImplementedError("implement `_cancel_all_orders` in your adapter subclass")\n\n    async def _batch_cancel_orders(self, command: BatchCancelOrders) -> None:\n        raise NotImplementedError("implement `_batch_cancel_orders` in your adapter subclass")\n\n    async def generate_order_status_report(\n        self,\n        command: GenerateOrderStatusReport,\n    ) -> OrderStatusReport | None:\n        raise NotImplementedError("method `generate_order_status_report` must be implemented in the subclass")\n\n    async def generate_order_status_reports(\n        self,\n        command: GenerateOrderStatusReports,\n    ) -> list[OrderStatusReport]:\n        raise NotImplementedError("method `generate_order_status_reports` must be implemented in the subclass")\n\n    async def generate_fill_reports(\n        self,\n        command: GenerateFillReports,\n    ) -> list[FillReport]:\n        raise NotImplementedError("method `generate_fill_reports` must be implemented in the subclass")\n\n    async def generate_position_status_reports(\n        self,\n        command: GeneratePositionStatusReports,\n    ) -> list[PositionStatusReport]:\n        raise NotImplementedError("method `generate_position_status_reports` must be implemented in the subclass")\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key methods"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_connect"}),": Establishes a connection to the venue APIs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_disconnect"}),": Closes the connection to the venue APIs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_submit_order"}),": Submits a new order to the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_submit_order_list"}),": Submits a list of orders to the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_modify_order"}),": Modifies an existing order on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_cancel_order"}),": Cancels a specific order on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_cancel_all_orders"}),": Cancels all orders for an instrument on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"_batch_cancel_orders"}),": Cancels a batch of orders for an instrument on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"generate_order_status_report"}),": Generates a report for a specific order on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"generate_order_status_reports"}),": Generates reports for all orders on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"generate_fill_reports"}),": Generates reports for filled orders on the venue."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"generate_position_status_reports"}),": Generates reports for position status on the venue."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The configuration file defines settings specific to the adapter, such as API keys and connection\ndetails. These settings are essential for initializing and managing the adapter\u2019s connection to the\ndata provider."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.config import LiveDataClientConfig\nfrom nautilus_trader.config import LiveExecClientConfig\n\n\nclass TemplateDataClientConfig(LiveDataClientConfig):\n    """Configuration for `TemplateDataClient` instances."""\n\n    api_key: str\n    api_secret: str\n    base_url: str\n\n\nclass TemplateExecClientConfig(LiveExecClientConfig):\n    """Configuration for `TemplateExecClient` instances."""\n\n    api_key: str\n    api_secret: str\n    base_url: str\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key attributes"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"api_key"}),": The API key for authenticating with the data provider."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"api_secret"}),": The API secret for authenticating with the data provider."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"base_url"}),": The base URL for connecting to the data provider's API."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-test-scenarios",children:"Common test scenarios"}),"\n",(0,t.jsx)(n.p,{children:"Exercise adapters across every venue behaviour they claim to support. Incorporate these scenarios into the Rust and Python suites."}),"\n",(0,t.jsx)(n.h3,{id:"product-coverage",children:"Product coverage"}),"\n",(0,t.jsx)(n.p,{children:"Ensure each supported product family is tested."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Spot instruments"}),"\n",(0,t.jsx)(n.li,{children:"Derivatives (perpetuals, futures, swaps)"}),"\n",(0,t.jsx)(n.li,{children:"Options and structured products"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"order-flow",children:"Order flow"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cover each supported order type (limit, market, stop, conditional, etc.) under every venue time-in-force option, expiries, and rejection handling."}),"\n",(0,t.jsx)(n.li,{children:"Submit buy and sell market orders and assert balance, position, and average-price updates align with venue responses."}),"\n",(0,t.jsx)(n.li,{children:"Submit representative buy and sell limit orders, verifying acknowledgements, execution reports, full and partial fills, and cancel flows."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"state-management",children:"State management"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Start sessions with existing open orders to ensure the adapter reconciles state on connect before issuing new commands."}),"\n",(0,t.jsx)(n.li,{children:"Seed preloaded positions and confirm position snapshots, valuation, and PnL agree with the venue prior to trading."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9087:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var r=s(6363);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunknautilus_trader=globalThis.webpackChunknautilus_trader||[]).push([[6520],{6803:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"concepts/data","title":"\u6570\u636e","description":"NautilusTrader \u63d0\u4f9b\u4e86\u4e00\u7ec4\u5185\u7f6e\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u4ea4\u6613\u9886\u57df\u4e2d\u7684\u5e38\u89c1\u6570\u636e\u7ed3\u6784\u3002","source":"@site/docs/concepts/data.md","sourceDirName":"concepts","slug":"/concepts/data","permalink":"/concepts/data","draft":false,"unlisted":false,"editUrl":"https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/concepts/data.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cache","permalink":"/concepts/cache"},"next":{"title":"\u6267\u884c","permalink":"/concepts/execution"}}');var l=s(7259),t=s(9087);const i={},a="\u6570\u636e",d={},c=[{value:"\u8ba2\u5355\u7c3f\uff08Order books\uff09",id:"\u8ba2\u5355\u7c3forder-books",level:2},{value:"\u5408\u7ea6/\u54c1\u79cd\uff08Instruments\uff09",id:"\u5408\u7ea6\u54c1\u79cdinstruments",level:2},{value:"K \u7ebf\u4e0e\u805a\u5408\uff08Bars and aggregation\uff09",id:"k-\u7ebf\u4e0e\u805a\u5408bars-and-aggregation",level:2},{value:"K \u7ebf\u7b80\u4ecb",id:"k-\u7ebf\u7b80\u4ecb",level:3},{value:"\u805a\u5408\u7684\u76ee\u7684",id:"\u805a\u5408\u7684\u76ee\u7684",level:3},{value:"\u805a\u5408\u65b9\u6cd5",id:"\u805a\u5408\u65b9\u6cd5",level:3},{value:"\u805a\u5408\u7c7b\u578b",id:"\u805a\u5408\u7c7b\u578b",level:3},{value:"Bar \u7c7b\u578b",id:"bar-\u7c7b\u578b",level:3},{value:"\u805a\u5408\u6765\u6e90\uff08Aggregation sources\uff09",id:"\u805a\u5408\u6765\u6e90aggregation-sources",level:3},{value:"\u4f7f\u7528\u5b57\u7b26\u4e32\u8bed\u6cd5\u5b9a\u4e49 BarType",id:"\u4f7f\u7528\u5b57\u7b26\u4e32\u8bed\u6cd5\u5b9a\u4e49-bartype",level:3},{value:"\u6807\u51c6 Bar",id:"\u6807\u51c6-bar",level:4},{value:"\u590d\u5408 Bar",id:"\u590d\u5408-bar",level:4},{value:"\u805a\u5408\u8bed\u6cd5\u793a\u4f8b",id:"\u805a\u5408\u8bed\u6cd5\u793a\u4f8b",level:3},{value:"Trade-to-bar \u793a\u4f8b",id:"trade-to-bar-\u793a\u4f8b",level:4},{value:"Quote-to-bar \u793a\u4f8b",id:"quote-to-bar-\u793a\u4f8b",level:4},{value:"Bar-to-bar \u793a\u4f8b",id:"bar-to-bar-\u793a\u4f8b",level:4},{value:"\u9ad8\u7ea7 Bar-to-bar \u793a\u4f8b",id:"\u9ad8\u7ea7-bar-to-bar-\u793a\u4f8b",level:4},{value:"\u4f7f\u7528 Bars\uff1arequest \u4e0e subscribe \u7684\u533a\u522b",id:"\u4f7f\u7528-barsrequest-\u4e0e-subscribe-\u7684\u533a\u522b",level:3},{value:"\u5e26\u805a\u5408\u7684\u5386\u53f2\u6570\u636e\u8bf7\u6c42",id:"\u5e26\u805a\u5408\u7684\u5386\u53f2\u6570\u636e\u8bf7\u6c42",level:3},{value:"\u5e38\u89c1\u9677\u9631",id:"\u5e38\u89c1\u9677\u9631",level:3},{value:"\u65f6\u95f4\u6233\uff08Timestamps\uff09",id:"\u65f6\u95f4\u6233timestamps",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u5ef6\u8fdf\u5206\u6790\uff08Latency analysis\uff09",id:"\u5ef6\u8fdf\u5206\u6790latency-analysis",level:3},{value:"\u4e0d\u540c\u73af\u5883\u4e0b\u7684\u884c\u4e3a",id:"\u4e0d\u540c\u73af\u5883\u4e0b\u7684\u884c\u4e3a",level:3},{value:"\u56de\u6d4b\u73af\u5883",id:"\u56de\u6d4b\u73af\u5883",level:4},{value:"\u5b9e\u76d8\u73af\u5883",id:"\u5b9e\u76d8\u73af\u5883",level:4},{value:"\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",id:"\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",level:3},{value:"\u6301\u4e45\u5316\u6570\u636e",id:"\u6301\u4e45\u5316\u6570\u636e",level:4},{value:"\u6570\u636e\u6d41\uff08Data flow\uff09",id:"\u6570\u636e\u6d41data-flow",level:2},{value:"\u6570\u636e\u52a0\u8f7d\uff08Loading data\uff09",id:"\u6570\u636e\u52a0\u8f7dloading-data",level:2},{value:"Data loaders",id:"data-loaders",level:3},{value:"Data wranglers",id:"data-wranglers",level:3},{value:"\u8f6c\u6362\u7ba1\u7ebf\uff08Transformation pipeline\uff09",id:"\u8f6c\u6362\u7ba1\u7ebftransformation-pipeline",level:3},{value:"\u6570\u636e\u76ee\u5f55\uff08Data catalog\uff09",id:"\u6570\u636e\u76ee\u5f55data-catalog",level:2},{value:"\u6982\u89c8\u4e0e\u67b6\u6784",id:"\u6982\u89c8\u4e0e\u67b6\u6784",level:3},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316",level:3},{value:"\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\u4e0e\u5b58\u50a8\u9009\u9879",id:"\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\u4e0e\u5b58\u50a8\u9009\u9879",level:3},{value:"\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae",id:"\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae",level:4},{value:"\u57fa\u4e8e URI \u7684\u521d\u59cb\u5316",id:"\u57fa\u4e8e-uri-\u7684\u521d\u59cb\u5316",level:4},{value:"\u5199\u5165\u6570\u636e",id:"\u5199\u5165\u6570\u636e",level:3},{value:"\u6587\u4ef6\u547d\u540d\u4e0e\u6570\u636e\u7ec4\u7ec7",id:"\u6587\u4ef6\u547d\u540d\u4e0e\u6570\u636e\u7ec4\u7ec7",level:3},{value:"\u8bfb\u53d6\u6570\u636e",id:"\u8bfb\u53d6\u6570\u636e",level:3},{value:"<code>BacktestDataConfig</code> \u2014\u2014 \u56de\u6d4b\u7684\u6570\u636e\u89c4\u8303",id:"backtestdataconfig--\u56de\u6d4b\u7684\u6570\u636e\u89c4\u8303",level:3},{value:"\u6838\u5fc3\u53c2\u6570",id:"\u6838\u5fc3\u53c2\u6570",level:4},{value:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b",id:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b",level:4},{value:"\u9ad8\u7ea7\u914d\u7f6e\u793a\u4f8b",id:"\u9ad8\u7ea7\u914d\u7f6e\u793a\u4f8b",level:4},{value:"\u4e0e BacktestRunConfig \u7684\u96c6\u6210",id:"\u4e0e-backtestrunconfig-\u7684\u96c6\u6210",level:4},{value:"\u6570\u636e\u52a0\u8f7d\u6d41\u7a0b",id:"\u6570\u636e\u52a0\u8f7d\u6d41\u7a0b",level:4},{value:"DataCatalogConfig \u2014\u2014 \u5373\u65f6\uff08on-the-fly\uff09\u6570\u636e\u52a0\u8f7d",id:"datacatalogconfig--\u5373\u65f6on-the-fly\u6570\u636e\u52a0\u8f7d",level:3},{value:"\u6838\u5fc3\u53c2\u6570",id:"\u6838\u5fc3\u53c2\u6570-1",level:4},{value:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b",id:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b-1",level:4},{value:"\u5728\u5b9e\u76d8\uff08live trading\uff09\u4e2d\u7684\u96c6\u6210",id:"\u5728\u5b9e\u76d8live-trading\u4e2d\u7684\u96c6\u6210",level:4},{value:"\u6d41\u5f0f\uff08streaming\uff09\u914d\u7f6e",id:"\u6d41\u5f0fstreaming\u914d\u7f6e",level:4},{value:"\u5e38\u89c1\u7528\u4f8b",id:"\u5e38\u89c1\u7528\u4f8b",level:4},{value:"\u67e5\u8be2\u7cfb\u7edf\u4e0e\u53cc\u540e\u7aef\uff08dual backend\uff09\u67b6\u6784",id:"\u67e5\u8be2\u7cfb\u7edf\u4e0e\u53cc\u540e\u7aefdual-backend\u67b6\u6784",level:3},{value:"\u540e\u7aef\u9009\u62e9\u903b\u8f91",id:"\u540e\u7aef\u9009\u62e9\u903b\u8f91",level:4},{value:"\u67e5\u8be2\u65b9\u6cd5\u4e0e\u53c2\u6570",id:"\u67e5\u8be2\u65b9\u6cd5\u4e0e\u53c2\u6570",level:4},{value:"Catalog \u64cd\u4f5c",id:"catalog-\u64cd\u4f5c",level:3},{value:"\u91cd\u8bbe\u6587\u4ef6\u540d\uff08Reset file names\uff09",id:"\u91cd\u8bbe\u6587\u4ef6\u540dreset-file-names",level:4},{value:"\u5408\u5e76\uff08Consolidate catalog\uff09",id:"\u5408\u5e76consolidate-catalog",level:4},{value:"\u6309\u5468\u671f\u5408\u5e76\uff08Consolidate by period\uff09",id:"\u6309\u5468\u671f\u5408\u5e76consolidate-by-period",level:4},{value:"\u5220\u9664\u6570\u636e\u533a\u95f4\uff08Delete data range\uff09",id:"\u5220\u9664\u6570\u636e\u533a\u95f4delete-data-range",level:4},{value:"Feather \u6d41\u5f0f\u4e0e\u683c\u5f0f\u8f6c\u6362",id:"feather-\u6d41\u5f0f\u4e0e\u683c\u5f0f\u8f6c\u6362",level:3},{value:"Catalog \u6458\u8981",id:"catalog-\u6458\u8981",level:3},{value:"\u6570\u636e\u8fc1\u79fb\uff08Data migrations\uff09",id:"\u6570\u636e\u8fc1\u79fbdata-migrations",level:2},{value:"\u8fc1\u79fb\u5de5\u5177",id:"\u8fc1\u79fb\u5de5\u5177",level:3},{value:"<code>to_json</code>",id:"to_json",level:4},{value:"<code>to_parquet</code>",id:"to_parquet",level:4},{value:"\u8fc1\u79fb\u6d41\u7a0b",id:"\u8fc1\u79fb\u6d41\u7a0b",level:3},{value:"\u4ece\u6807\u51c6\u7cbe\u5ea6\uff0864-bit\uff09\u8fc1\u79fb\u5230\u9ad8\u7cbe\u5ea6\uff08128-bit\uff09",id:"\u4ece\u6807\u51c6\u7cbe\u5ea664-bit\u8fc1\u79fb\u5230\u9ad8\u7cbe\u5ea6128-bit",level:4},{value:"\u8fc1\u79fb schema \u7248\u672c",id:"\u8fc1\u79fb-schema-\u7248\u672c",level:4},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u81ea\u5b9a\u4e49\u6570\u636e\uff08Custom data\uff09",id:"\u81ea\u5b9a\u4e49\u6570\u636ecustom-data",level:2},{value:"\u53d1\u5e03\u4e0e\u63a5\u6536\u4fe1\u53f7\u6570\u636e\uff08signals\uff09",id:"\u53d1\u5e03\u4e0e\u63a5\u6536\u4fe1\u53f7\u6570\u636esignals",level:3},{value:"\u671f\u6743 Greeks \u793a\u4f8b",id:"\u671f\u6743-greeks-\u793a\u4f8b",level:3},{value:"\u53d1\u5e03\u4e0e\u63a5\u6536\u6570\u636e\u793a\u4f8b",id:"\u53d1\u5e03\u4e0e\u63a5\u6536\u6570\u636e\u793a\u4f8b",level:4},{value:"\u4f7f\u7528 Cache \u5199\u5165\u4e0e\u8bfb\u53d6\u6570\u636e",id:"\u4f7f\u7528-cache-\u5199\u5165\u4e0e\u8bfb\u53d6\u6570\u636e",level:4},{value:"\u4f7f\u7528 catalog \u5199\u5165\u4e0e\u8bfb\u53d6\u81ea\u5b9a\u4e49\u6570\u636e",id:"\u4f7f\u7528-catalog-\u5199\u5165\u4e0e\u8bfb\u53d6\u81ea\u5b9a\u4e49\u6570\u636e",level:4},{value:"\u81ea\u52a8\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b",id:"\u81ea\u52a8\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b",level:3},{value:"\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u7c7b\u578b\u5b58\u6839\uff08stub\uff09",id:"\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u7c7b\u578b\u5b58\u6839stub",level:4}];function o(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u6570\u636e",children:"\u6570\u636e"})}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u63d0\u4f9b\u4e86\u4e00\u7ec4\u5185\u7f6e\u7684\u6570\u636e\u7c7b\u578b\uff0c\u7528\u4e8e\u8868\u793a\u4ea4\u6613\u9886\u57df\u4e2d\u7684\u5e38\u89c1\u6570\u636e\u7ed3\u6784\u3002\n\u8fd9\u4e9b\u6570\u636e\u7c7b\u578b\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDelta"}),"\uff08L1/L2/L3\uff09\uff1a\u8868\u793a\u6700\u7ec6\u7c92\u5ea6\u7684\u8ba2\u5355\u7c3f\u66f4\u65b0\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDeltas"}),"\uff08L1/L2/L3\uff09\uff1a\u5c06\u591a\u4e2a ",(0,l.jsx)(n.code,{children:"OrderBookDelta"})," \u6279\u91cf\u6253\u5305\u4ee5\u63d0\u9ad8\u5904\u7406\u6548\u7387\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDepth10"}),"\uff1a\u805a\u5408\u7684\u8ba2\u5355\u7c3f\u5feb\u7167\uff08\u6bcf\u4fa7\u6700\u591a 10 \u4e2a\u6863\u4f4d\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QuoteTick"}),"\uff1a\u9876\u7ea7\u76d8\u53e3\uff08top-of-book\uff09\u7684\u6700\u4f18\u4e70\u5356\u4ef7\u53ca\u5176\u91cf\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TradeTick"}),"\uff1a\u4e00\u6b21\u6210\u4ea4/\u5339\u914d\u4e8b\u4ef6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Bar"}),"\uff1aOHLCV\uff08\u5f00\u3001\u9ad8\u3001\u4f4e\u3001\u6536\u3001\u91cf\uff09K \u7ebf\uff0c\u6309\u6307\u5b9a\u7684\u805a\u5408\u65b9\u6cd5\uff08aggregation method\uff09\u751f\u6210\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MarkPriceUpdate"}),"\uff1a\u5408\u7ea6\u7684\u6807\u8bb0\u4ef7\u683c\uff08\u901a\u5e38\u7528\u4e8e\u884d\u751f\u54c1\u4ea4\u6613\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"IndexPriceUpdate"}),"\uff1a\u7528\u4e8e\u8ba1\u7b97\u6807\u8bb0\u4ef7\u7684\u6307\u6570\u4ef7\u683c\uff08underlying index price\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FundingRateUpdate"}),"\uff1a\u6c38\u7eed\u5408\u7ea6\u7684\u8d44\u91d1\u8d39\u7387\uff08\u591a\u7a7a\u4e4b\u95f4\u7684\u5468\u671f\u6027\u652f\u4ed8\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"InstrumentStatus"}),"\uff1a\u54c1\u79cd\u7ea7\u522b\u7684\u72b6\u6001\u4e8b\u4ef6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"InstrumentClose"}),"\uff1a\u54c1\u79cd\u7684\u6536\u76d8\u4ef7\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u7684\u8bbe\u8ba1\u4ee5\u5904\u7406\u7ec6\u7c92\u5ea6\u8ba2\u5355\u7c3f\u6570\u636e\u4e3a\u4e3b\uff0c\u8fd9\u80fd\u5728\u56de\u6d4b\u4e2d\u63d0\u4f9b\u6700\u63a5\u8fd1\u5b9e\u76d8\u7684\u6267\u884c\u4eff\u771f\u3002\n\u5f53\u7136\uff0c\u6839\u636e\u4eff\u771f\u7684\u9700\u6c42\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u53d7\u652f\u6301\u7684\u5e02\u573a\u6570\u636e\u7c7b\u578b\u8fdb\u884c\u56de\u6d4b\uff0c\u7075\u6d3b\u9009\u62e9\u6a21\u62df\u7cbe\u5ea6\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u8ba2\u5355\u7c3forder-books",children:"\u8ba2\u5355\u7c3f\uff08Order books\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u7cfb\u7edf\u5185\u7f6e\u4e86\u4e00\u4e2a\u7528 Rust \u5b9e\u73b0\u7684\u9ad8\u6027\u80fd\u8ba2\u5355\u7c3f\uff0c\u7528\u6765\u6839\u636e\u8f93\u5165\u6570\u636e\u7ef4\u62a4\u8ba2\u5355\u7c3f\u72b6\u6001\u3002"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"OrderBook"})," \u5b9e\u4f8b\u6309\u5408\u7ea6\u7ef4\u62a4\uff0c\u65e2\u53ef\u7528\u4e8e\u56de\u6d4b\u4e5f\u53ef\u7528\u4e8e\u5b9e\u76d8\uff0c\u652f\u6301\u4ee5\u4e0b\u7c7b\u578b\u7684\u8ba2\u5355\u7c3f\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"L3_MBO"}),"\uff1aMarket by order\uff08MBO\uff0cL3\uff09\uff0c\u4f7f\u7528\u6bcf\u4e00\u7b14\u6309\u8ba2\u5355 ID \u7f16\u5740\u7684\u4e8b\u4ef6\uff0c\u4fdd\u7559\u6bcf\u4e2a\u4ef7\u683c\u7ea7\u522b\u7684\u6240\u6709\u8ba2\u5355\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"L2_MBP"}),"\uff1aMarket by price\uff08MBP\uff0cL2\uff09\uff0c\u6309\u4ef7\u683c\u7ea7\u522b\u805a\u5408\u8ba2\u5355\u7c3f\u4e8b\u4ef6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"L1_MBP"}),"\uff1aMarket by price\uff08MBP\uff0cL1\uff09\uff0c\u4e5f\u79f0\u4e3a BBO\uff08best bid and offer\uff09\uff0c\u53ea\u6355\u83b7\u9876\u5c42\u66f4\u65b0\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["\u9876\u5c42\u6570\u636e\uff08\u5982 ",(0,l.jsx)(n.code,{children:"QuoteTick"}),"\u3001",(0,l.jsx)(n.code,{children:"TradeTick"})," \u548c ",(0,l.jsx)(n.code,{children:"Bar"}),"\uff09\u4e5f\u53ef\u7528\u4e8e\u56de\u6d4b\uff0c\u5bf9\u4e8e\u4ee5 ",(0,l.jsx)(n.code,{children:"L1_MBP"})," \u4e3a\u4e66\u7c4d\u7c7b\u578b\u7684\u5e02\u573a\u5c24\u5176\u5e38\u89c1\u3002"]})}),"\n",(0,l.jsx)(n.h2,{id:"\u5408\u7ea6\u54c1\u79cdinstruments",children:"\u5408\u7ea6/\u54c1\u79cd\uff08Instruments\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u652f\u6301\u7684\u5408\u7ea6\u7c7b\u578b\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Betting"}),"\uff1a\u535a\u5f69\u5e02\u573a\u4e2d\u7684\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BinaryOption"}),"\uff1a\u4e8c\u5143\u671f\u6743\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Cfd"}),"\uff1a\u5dee\u4ef7\u5408\u7ea6\uff08CFD\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Commodity"}),"\uff1a\u73b0\u8d27/\u73b0\u91d1\u5e02\u573a\u7684\u5546\u54c1\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CryptoFuture"}),"\uff1a\u53ef\u4ea4\u5272\u7684\u52a0\u5bc6\u8d27\u5e01\u671f\u8d27\u5408\u7ea6\uff08\u4ee5\u52a0\u5bc6\u8d44\u4ea7\u4e3a\u6807\u7684\u5e76\u4ee5\u5176\u7ed3\u7b97\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CryptoPerpetual"}),"\uff1a\u52a0\u5bc6\u6c38\u7eed\u5408\u7ea6\uff08perpetual swap\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CurrencyPair"}),"\uff1a\u73b0\u8d27/\u73b0\u91d1\u5e02\u573a\u7684\u8d27\u5e01\u5bf9\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Equity"}),"\uff1a\u80a1\u7968\u7c7b\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FuturesContract"}),"\uff1a\u53ef\u4ea4\u5272\u671f\u8d27\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"FuturesSpread"}),"\uff1a\u671f\u8d27\u4ef7\u5dee\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Index"}),"\uff1a\u6307\u6570\u7c7b\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OptionContract"}),"\uff1a\u671f\u6743\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OptionSpread"}),"\uff1a\u671f\u6743\u4ef7\u5dee\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Synthetic"}),"\uff1a\u7531\u82e5\u5e72\u7ec4\u4ef6\u5408\u7ea6\u6309\u516c\u5f0f\u5408\u6210\u7684\u5408\u6210\u54c1\u79cd\uff08synthetic\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"k-\u7ebf\u4e0e\u805a\u5408bars-and-aggregation",children:"K \u7ebf\u4e0e\u805a\u5408\uff08Bars and aggregation\uff09"}),"\n",(0,l.jsx)(n.h3,{id:"k-\u7ebf\u7b80\u4ecb",children:"K \u7ebf\u7b80\u4ecb"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.em,{children:"Bar"}),"\uff08\u6709\u65f6\u79f0\u4e3a candle\u3001candlestick \u6216 kline\uff09\u662f\u4e00\u79cd\u8868\u793a\u5728\u7279\u5b9a\u65f6\u95f4\u6bb5\u5185\u4ef7\u683c\u548c\u6210\u4ea4\u91cf\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u901a\u5e38\u5305\u542b\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5f00\u76d8\u4ef7"}),"\n",(0,l.jsx)(n.li,{children:"\u6700\u9ad8\u4ef7"}),"\n",(0,l.jsx)(n.li,{children:"\u6700\u4f4e\u4ef7"}),"\n",(0,l.jsx)(n.li,{children:"\u6536\u76d8\u4ef7"}),"\n",(0,l.jsx)(n.li,{children:"\u6210\u4ea4\u91cf\uff08\u6216\u7528 ticks \u8ba1\u6570\u4f5c\u4e3a\u6210\u4ea4\u91cf\u7684\u8fd1\u4f3c\uff09"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7cfb\u7edf\u901a\u8fc7\u6307\u5b9a\u7684\u805a\u5408\u65b9\u6cd5\uff08aggregation method\uff09\u5c06\u5e95\u5c42\u5e02\u573a\u6570\u636e\u5206\u7ec4\u5e76\u751f\u6210 K \u7ebf\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u805a\u5408\u7684\u76ee\u7684",children:"\u805a\u5408\u7684\u76ee\u7684"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 NautilusTrader \u4e2d\u8fdb\u884c\u6570\u636e\u805a\u5408\u7684\u539f\u56e0\u5305\u62ec\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4e3a\u6280\u672f\u6307\u6807\u548c\u7b56\u7565\u5f00\u53d1\u63d0\u4f9b\u6570\u636e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8bb8\u591a\u7b56\u7565\u5bf9\u65f6\u95f4\u805a\u5408\u6570\u636e\uff08\u5982\u5206\u949f\u7ebf\uff09\u5df2\u8db3\u591f\uff0c\u65e0\u9700\u4f7f\u7528\u9ad8\u9891 L1/L2/L3 \u6570\u636e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u76f8\u6bd4\u9ad8\u9891\u539f\u59cb\u6570\u636e\uff0c\u805a\u5408\u53ef\u4ee5\u964d\u4f4e\u5b58\u50a8\u4e0e\u5904\u7406\u6210\u672c\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u805a\u5408\u65b9\u6cd5",children:"\u805a\u5408\u65b9\u6cd5"}),"\n",(0,l.jsx)(n.p,{children:"\u5e73\u53f0\u5b9e\u73b0\u4e86\u591a\u79cd\u805a\u5408\u65b9\u6cd5\uff1a"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u540d\u79f0"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u63cf\u8ff0"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u7c7b\u522b"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"TICK"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u4e00\u5b9a\u6570\u91cf\u7684 ticks \u8fdb\u884c\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"TICK_IMBALANCE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309 ticks \u7684\u4e70/\u5356\u4e0d\u5e73\u8861\u8fdb\u884c\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"TICK_RUNS"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u8fde\u7eed\u7684\u4e70/\u5356\u5e8f\u5217\uff08runs\uff09\u805a\u5408 ticks\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Information"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VOLUME"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u4ea4\u6613\u91cf\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VOLUME_IMBALANCE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u6210\u4ea4\u91cf\u7684\u4e70/\u5356\u4e0d\u5e73\u8861\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VOLUME_RUNS"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u6210\u4ea4\u91cf\u7684\u8fde\u7eed\u4e70/\u5356\u5e8f\u5217\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Information"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VALUE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u6210\u4ea4\u9762\u503c\uff08notional value\uff0c\u4e5f\u79f0\u4e3a\u201cDollar bars\u201d\uff09\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VALUE_IMBALANCE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u6309\u9762\u503c\u8ba1\u7b97\u7684\u4e70/\u5356\u4e0d\u5e73\u8861\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Information"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"VALUE_RUNS"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6309\u6309\u9762\u503c\u8ba1\u7b97\u7684\u8fde\u7eed\u4e70/\u5356\u5e8f\u5217\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"RENKO"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u57fa\u4e8e\u56fa\u5b9a\u4ef7\u683c\u53d8\u52a8\uff08\u4ee5 ticks \u4e3a\u7816\u5757\u5927\u5c0f\uff09\u7684\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Threshold"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"MILLISECOND"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u6beb\u79d2\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"SECOND"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u79d2\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"MINUTE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u5206\u949f\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"HOUR"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u5c0f\u65f6\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"DAY"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u65e5\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"WEEK"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u5468\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"MONTH"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u6708\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"YEAR"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ee5\u5e74\u4e3a\u7c92\u5ea6\u7684\u65f6\u95f4\u7a97\u53e3\u805a\u5408\u3002"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Time"})]})]})]}),"\n",(0,l.jsxs)(n.admonition,{type:"note",children:[(0,l.jsx)(n.p,{children:"\u4ee5\u4e0b\u805a\u5408\u65b9\u6cd5\u5f53\u524d\u5c1a\u672a\u5b9e\u73b0\uff1a"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VOLUME_IMBALANCE"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VOLUME_RUNS"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VALUE_IMBALANCE"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"VALUE_RUNS"})}),"\n"]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u805a\u5408\u7c7b\u578b",children:"\u805a\u5408\u7c7b\u578b"}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u5b9e\u73b0\u4e86\u4e09\u7c7b\u4e3b\u8981\u7684\u805a\u5408\u65b9\u5f0f\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Trade-to-bar\uff08\u6210\u4ea4\u5230 K \u7ebf\uff09"}),"\uff1a\u7531 ",(0,l.jsx)(n.code,{children:"TradeTick"}),"\uff08\u6210\u4ea4\u6570\u636e\uff09\u751f\u6210 K \u7ebf\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u9002\u7528\u573a\u666f\uff1a\u5206\u6790\u6210\u4ea4\u4ef7\u683c\u6216\u76f4\u63a5\u4ee5\u6210\u4ea4\u6570\u636e\u4e3a\u8f93\u5165\u7684\u7b56\u7565\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u5728 Bar \u89c4\u8303\u4e2d\u59cb\u7ec8\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"LAST"})," \u4f5c\u4e3a price_type\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Quote-to-bar\uff08\u76d8\u53e3\u5230 K \u7ebf\uff09"}),"\uff1a\u7531 ",(0,l.jsx)(n.code,{children:"QuoteTick"}),"\uff08\u4e70/\u5356\u6863\uff09\u751f\u6210 K \u7ebf\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u9002\u7528\u573a\u666f\uff1a\u5173\u6ce8\u4e70\u5356\u4ef7\u5dee\u6216\u5e02\u573a\u6df1\u5ea6\u7684\u7b56\u7565\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u5728 Bar \u89c4\u8303\u4e2d\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"BID"}),"\u3001",(0,l.jsx)(n.code,{children:"ASK"})," \u6216 ",(0,l.jsx)(n.code,{children:"MID"})," \u4f5c\u4e3a price_type\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Bar-to-bar\uff08K \u7ebf\u5230 K \u7ebf\uff09"}),"\uff1a\u7531\u8f83\u5c0f\u5468\u671f\u7684 ",(0,l.jsx)(n.code,{children:"Bar"})," \u751f\u6210\u66f4\u5927\u5468\u671f\u7684 ",(0,l.jsx)(n.code,{children:"Bar"}),"\u3002"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u9002\u7528\u573a\u666f\uff1a\u5bf9\u5df2\u6709\u7684\u5c0f\u5468\u671f K \u7ebf\uff08\u4f8b\u5982 1 \u5206\u949f\uff09\u505a\u91cd\u91c7\u6837\u5f97\u5230 5 \u5206\u949f\u6216\u5c0f\u65f6\u7ebf\u7b49\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u8fd9\u79cd\u65b9\u5f0f\u5728\u89c4\u8303\u4e2d\u9700\u8981\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"@"})," \u7b26\u53f7\u6765\u6807\u6ce8\u6765\u6e90\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"bar-\u7c7b\u578b",children:"Bar \u7c7b\u578b"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"BarType"}),"\uff08Bar \u7c7b\u578b\uff09\u7531\u4ee5\u4e0b\u51e0\u4e2a\u8981\u7d20\u7ec4\u6210\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Instrument ID"}),"\uff08",(0,l.jsx)(n.code,{children:"InstrumentId"}),"\uff09\uff1a\u6307\u5b9a\u8be5 Bar \u6240\u5c5e\u7684\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Bar Specification"}),"\uff08",(0,l.jsx)(n.code,{children:"BarSpecification"}),"\uff09\uff1a","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"step"}),"\uff1a\u5b9a\u4e49 Bar \u7684\u65f6\u95f4\u95f4\u9694\u6216\u9891\u7387\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"aggregation"}),"\uff1a\u6307\u5b9a\u4f7f\u7528\u7684\u805a\u5408\u65b9\u6cd5\uff08\u53c2\u89c1\u4e0a\u8868\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"price_type"}),"\uff1a\u6307\u5b9a Bar \u7684\u4ef7\u683c\u57fa\u51c6\uff08\u5982 bid\u3001ask\u3001mid\u3001last\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Aggregation Source"}),"\uff08",(0,l.jsx)(n.code,{children:"AggregationSource"}),"\uff09\uff1a\u6807\u660e Bar \u662f\u5728\u672c\u5730\uff08INTERNAL\uff09\u8fd8\u662f\u7531\u5916\u90e8\uff08EXTERNAL\uff09\u805a\u5408\u5f97\u5230\u7684\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["BarType \u8fd8\u53ef\u4ee5\u5206\u4e3a ",(0,l.jsx)(n.em,{children:"standard"}),"\uff08\u6807\u51c6\uff09\u6216 ",(0,l.jsx)(n.em,{children:"composite"}),"\uff08\u590d\u5408\uff09\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6807\u51c6\uff08Standard\uff09"}),"\uff1a\u7531\u539f\u59cb\u5e02\u573a\u6570\u636e\uff08quote-ticks\u3001trade-ticks\uff09\u76f4\u63a5\u751f\u6210\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u590d\u5408\uff08Composite\uff09"}),"\uff1a\u7531\u66f4\u9ad8\u7c92\u5ea6\u7684 Bar \u901a\u8fc7\u5b50\u62bd\u6837\uff08subsampling\uff09\u5f97\u5230\uff08\u4f8b\u5982 5 \u5206\u949f Bar \u4ece 1 \u5206\u949f Bar \u805a\u5408\u800c\u6765\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u805a\u5408\u6765\u6e90aggregation-sources",children:"\u805a\u5408\u6765\u6e90\uff08Aggregation sources\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u805a\u5408\u6765\u6e90\u53ef\u4e3a\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"INTERNAL"}),"\uff1a\u5728\u672c\u5730 Nautilus \u7cfb\u7edf\u5185\u5b8c\u6210\u805a\u5408\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"EXTERNAL"}),"\uff1a\u7531\u573a\u5916\u6216\u6570\u636e\u63d0\u4f9b\u65b9\u5728\u7cfb\u7edf\u5916\u5b8c\u6210\u805a\u5408\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5bf9\u4e8e bar-to-bar\uff08K \u7ebf\u5230 K \u7ebf\uff09\u805a\u5408\uff0c\u76ee\u6807 BarType \u603b\u662f ",(0,l.jsx)(n.code,{children:"INTERNAL"}),"\uff08\u56e0\u4e3a\u805a\u5408\u5728 Nautilus \u5185\u90e8\u5b8c\u6210\uff09\uff0c\u4f46\u6765\u6e90 Bar \u53ef\u4ee5\u662f ",(0,l.jsx)(n.code,{children:"INTERNAL"})," \u6216 ",(0,l.jsx)(n.code,{children:"EXTERNAL"}),"\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u4f7f\u7528\u5b57\u7b26\u4e32\u8bed\u6cd5\u5b9a\u4e49-bartype",children:"\u4f7f\u7528\u5b57\u7b26\u4e32\u8bed\u6cd5\u5b9a\u4e49 BarType"}),"\n",(0,l.jsx)(n.h4,{id:"\u6807\u51c6-bar",children:"\u6807\u51c6 Bar"}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u7528\u5982\u4e0b\u683c\u5f0f\u4ece\u5b57\u7b26\u4e32\u5b9a\u4e49\u6807\u51c6 BarType\uff1a"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{instrument_id}-{step}-{aggregation}-{price_type}-{INTERNAL | EXTERNAL}"})}),"\n",(0,l.jsx)(n.p,{children:"\u4f8b\u5982\uff1a\u5728 Nasdaq\uff08XNAS\uff09\u4e0a\u4e3a AAPL \u5b9a\u4e49\u4e00\u4e2a 5 \u5206\u949f\u3001\u57fa\u4e8e\u6210\u4ea4\u4ef7\uff08LAST\uff09\u4e14\u5728\u672c\u5730\u805a\u5408\u7684 BarType\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'bar_type = BarType.from_str("AAPL.XNAS-5-MINUTE-LAST-INTERNAL")\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u590d\u5408-bar",children:"\u590d\u5408 Bar"}),"\n",(0,l.jsx)(n.p,{children:"\u590d\u5408 Bar \u7684\u5b9a\u4e49\u683c\u5f0f\u4e3a\uff1a"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"{instrument_id}-{step}-{aggregation}-{price_type}-INTERNAL@{step}-{aggregation}-{INTERNAL | EXTERNAL}"})}),"\n",(0,l.jsx)(n.p,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u6d3e\u751f\uff08derived\uff09\u7684 BarType \u5fc5\u987b\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"INTERNAL"})," \u4f5c\u4e3a\u805a\u5408\u6765\u6e90\uff08\u56e0\u4e3a\u805a\u5408\u5728\u672c\u5730\u5b8c\u6210\uff09\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u88ab\u91c7\u6837\u7684 BarType \u5fc5\u987b\u5177\u6709\u6bd4\u6d3e\u751f Bar \u66f4\u9ad8\u7684\u7c92\u5ea6\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u88ab\u91c7\u6837\u7684 instrument_id \u4f1a\u88ab\u63a8\u65ad\u4e3a\u4e0e\u6d3e\u751f BarType \u76f8\u540c\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u590d\u5408 Bar \u53ef\u4ece ",(0,l.jsx)(n.code,{children:"INTERNAL"})," \u6216 ",(0,l.jsx)(n.code,{children:"EXTERNAL"})," \u7684\u6765\u6e90\u8fdb\u884c\u805a\u5408\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4f8b\u5982\uff1a\u4ece\u5916\u90e8\u63d0\u4f9b\u7684 1 \u5206\u949f Bar \u805a\u5408\u4e3a\u5728\u672c\u5730\u751f\u6210\u7684 AAPL 5 \u5206\u949f\u6210\u4ea4\u4ef7 Bar\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'bar_type = BarType.from_str("AAPL.XNAS-5-MINUTE-LAST-INTERNAL@1-MINUTE-EXTERNAL")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u805a\u5408\u8bed\u6cd5\u793a\u4f8b",children:"\u805a\u5408\u8bed\u6cd5\u793a\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"BarType"})," \u5b57\u7b26\u4e32\u683c\u5f0f\u540c\u65f6\u7f16\u7801\u76ee\u6807 BarType \u548c\u53ef\u9009\u7684\u6765\u6e90\u6570\u636e\u7c7b\u578b\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-txt",children:"{instrument_id}-{step}-{aggregation}-{price_type}-{source}@{step}-{aggregation}-{source}\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"@"})," \u4e4b\u540e\u7684\u90e8\u5206\u662f\u53ef\u9009\u7684\uff0c\u4ec5\u7528\u4e8e bar-to-bar \u805a\u5408\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["\u65e0 ",(0,l.jsx)(n.code,{children:"@"})]}),"\uff1a\u5f53 price_type \u4e3a ",(0,l.jsx)(n.code,{children:"LAST"})," \u65f6\u4ece ",(0,l.jsx)(n.code,{children:"TradeTick"})," \u805a\u5408\uff1b\u5f53 price_type \u4e3a ",(0,l.jsx)(n.code,{children:"BID"}),"/",(0,l.jsx)(n.code,{children:"ASK"}),"/",(0,l.jsx)(n.code,{children:"MID"})," \u65f6\u4ece ",(0,l.jsx)(n.code,{children:"QuoteTick"})," \u805a\u5408\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["\u6709 ",(0,l.jsx)(n.code,{children:"@"})]}),"\uff1a\u4ece\u5df2\u6709\u7684 ",(0,l.jsx)(n.code,{children:"Bar"})," \u5bf9\u8c61\u805a\u5408\uff08\u6307\u5b9a\u6765\u6e90 BarType\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"trade-to-bar-\u793a\u4f8b",children:"Trade-to-bar \u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def on_start(self) -> None:\n    # \u5b9a\u4e49\u4e00\u4e2a\u4ece TradeTick \u805a\u5408\u7684 BarType\n    # \u4f7f\u7528 price_type=LAST \u8868\u793a\u4ee5 TradeTick \u4e3a\u6570\u636e\u6e90\n    bar_type = BarType.from_str("6EH4.XCME-50-VOLUME-LAST-INTERNAL")\n\n    # \u8bf7\u6c42\u5386\u53f2\u6570\u636e\uff08\u5c06\u5728 on_historical_data \u56de\u8c03\u6536\u5230 bars\uff09\n    self.request_bars(bar_type)\n\n    # \u8ba2\u9605\u5b9e\u65f6\u6570\u636e\uff08\u5c06\u5728 on_bar \u56de\u8c03\u6536\u5230 bars\uff09\n    self.subscribe_bars(bar_type)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"quote-to-bar-\u793a\u4f8b",children:"Quote-to-bar \u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def on_start(self) -> None:\n    # \u4ece ASK \u4ef7\u751f\u6210 1 \u5206\u949f Bar\n    bar_type_ask = BarType.from_str("6EH4.XCME-1-MINUTE-ASK-INTERNAL")\n\n    # \u4ece BID \u4ef7\u751f\u6210 1 \u5206\u949f Bar\n    bar_type_bid = BarType.from_str("6EH4.XCME-1-MINUTE-BID-INTERNAL")\n\n    # \u4ece MID \u4ef7\u751f\u6210 1 \u5206\u949f Bar\uff08MID \u4e3a BID \u4e0e ASK \u7684\u4e2d\u95f4\u4ef7\uff09\n    bar_type_mid = BarType.from_str("6EH4.XCME-1-MINUTE-MID-INTERNAL")\n\n    # \u8bf7\u6c42\u5386\u53f2\u5e76\u8ba2\u9605\u5b9e\u65f6\n    self.request_bars(bar_type_ask)    # \u5386\u53f2\u6570\u636e\u5728 on_historical_data \u4e2d\u5904\u7406\n    self.subscribe_bars(bar_type_ask)  # \u5b9e\u65f6\u6570\u636e\u5728 on_bar \u4e2d\u5904\u7406\n'})}),"\n",(0,l.jsx)(n.h4,{id:"bar-to-bar-\u793a\u4f8b",children:"Bar-to-bar \u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def on_start(self) -> None:\n    # \u4ece 1 \u5206\u949f Bar \u751f\u6210 5 \u5206\u949f Bar\uff08\u683c\u5f0f\uff1atarget_bar_type@source_bar_type\uff09\n    # \u6ce8\u610f\uff1a\u5de6\u4fa7\u76ee\u6807\u7684 price_type\uff08\u5982 LAST\uff09\u9700\u8981\u6307\u5b9a\uff0c\u6765\u6e90\u4fa7\u65e0\u9700 price_type\n    bar_type = BarType.from_str("6EH4.XCME-5-MINUTE-LAST-INTERNAL@1-MINUTE-EXTERNAL")\n\n    # \u8bf7\u6c42\u5386\u53f2\u6570\u636e\uff08\u5c06\u5728 on_historical_data(...) \u5904\u7406\uff09\n    self.request_bars(bar_type)\n\n    # \u8ba2\u9605\u5b9e\u65f6\u66f4\u65b0\uff08\u5c06\u5728 on_bar(...) \u5904\u7406\uff09\n    self.subscribe_bars(bar_type)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u9ad8\u7ea7-bar-to-bar-\u793a\u4f8b",children:"\u9ad8\u7ea7 Bar-to-bar \u793a\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u4ee5\u6784\u5efa\u591a\u7ea7\u7684\u805a\u5408\u94fe\u6761\uff0c\u4f8b\u5982\uff1a\u5148\u4ece TradeTick \u751f\u6210 1 \u5206\u949f Bar\uff0c\u518d\u4ece 1 \u5206\u949f Bar \u751f\u6210 5 \u5206\u949f Bar\uff0c\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5148\u4ece TradeTick \u751f\u6210 1 \u5206\u949f Bar\uff08LAST \u8868\u793a TradeTick \u6765\u6e90\uff09\nprimary_bar_type = BarType.from_str("6EH4.XCME-1-MINUTE-LAST-INTERNAL")\n\n# \u518d\u4ece 1 \u5206\u949f Bar \u751f\u6210 5 \u5206\u949f Bar\n# \u6ce8\u610f @1-MINUTE-INTERNAL \u6307\u660e\u4e86\u6765\u6e90 Bar\nintermediate_bar_type = BarType.from_str("6EH4.XCME-5-MINUTE-LAST-INTERNAL@1-MINUTE-INTERNAL")\n\n# \u6700\u540e\u4ece 5 \u5206\u949f Bar \u751f\u6210\u5c0f\u65f6\u7ebf\n# \u6ce8\u610f @5-MINUTE-INTERNAL \u6307\u660e\u4e86\u6765\u6e90 Bar\nhourly_bar_type = BarType.from_str("6EH4.XCME-1-HOUR-LAST-INTERNAL@5-MINUTE-INTERNAL")\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u4f7f\u7528-barsrequest-\u4e0e-subscribe-\u7684\u533a\u522b",children:"\u4f7f\u7528 Bars\uff1arequest \u4e0e subscribe \u7684\u533a\u522b"}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u63d0\u4f9b\u4e24\u79cd\u4e0e Bar \u4ea4\u4e92\u7684\u64cd\u4f5c\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"request_bars()"})}),"\uff1a\u8bf7\u6c42\u5386\u53f2\u6570\u636e\uff0c\u7531 ",(0,l.jsx)(n.code,{children:"on_historical_data()"})," \u56de\u8c03\u5904\u7406\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"subscribe_bars()"})}),"\uff1a\u8ba2\u9605\u5b9e\u65f6\u6570\u636e\u6d41\uff0c\u7531 ",(0,l.jsx)(n.code,{children:"on_bar()"})," \u56de\u8c03\u5904\u7406\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u5178\u578b\u6d41\u7a0b\u4e3a\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5148\u7528 ",(0,l.jsx)(n.code,{children:"request_bars()"})," \u52a0\u8f7d\u5386\u53f2\u6570\u636e\u4ee5\u521d\u59cb\u5316\u6307\u6807\u6216\u7b56\u7565\u72b6\u6001\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u518d\u7528 ",(0,l.jsx)(n.code,{children:"subscribe_bars()"})," \u4fdd\u8bc1\u7b56\u7565\u5728\u5b9e\u65f6\u5f62\u6210\u65b0 Bar \u65f6\u80fd\u6301\u7eed\u63a5\u6536\u66f4\u65b0\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u793a\u4f8b\uff08\u5728 ",(0,l.jsx)(n.code,{children:"on_start()"})," \u4e2d\uff09\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def on_start(self) -> None:\n    # \u5b9a\u4e49 BarType\n    bar_type = BarType.from_str("6EH4.XCME-5-MINUTE-LAST-INTERNAL")\n\n    # \u8bf7\u6c42\u5386\u53f2\u6570\u636e\u7528\u4e8e\u521d\u59cb\u5316\u6307\u6807\n    # \u8fd9\u4e9b Bar \u4f1a\u5728\u7b56\u7565\u7684 on_historical_data(...) \u56de\u8c03\u4e2d\u6536\u5230\n    self.request_bars(bar_type)\n\n    # \u8ba2\u9605\u5b9e\u65f6\u66f4\u65b0\n    # \u65b0\u751f\u6210\u7684 Bar \u4f1a\u5728\u7b56\u7565\u7684 on_bar(...) \u56de\u8c03\u4e2d\u6536\u5230\n    self.subscribe_bars(bar_type)\n\n    # \u6ce8\u518c\u6307\u6807\u4ee5\u63a5\u6536 Bar \u66f4\u65b0\uff08\u6307\u6807\u4f1a\u81ea\u52a8\u7528\u5386\u53f2\u6570\u636e\u548c\u540e\u7eed\u5b9e\u65f6\u6570\u636e\u8fdb\u884c\u66f4\u65b0\uff09\n    self.register_indicator_for_bars(bar_type, self.my_indicator)\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u7b56\u7565\u9700\u8981\u5b9e\u73b0\u7684\u56de\u8c03\u4ee5\u63a5\u6536\u6570\u636e\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def on_historical_data(self, data):\n    # \u5904\u7406\u7531 request_bars() \u8fd4\u56de\u7684\u5386\u53f2 Bar \u6279\u91cf\n    # \u6ce8\u610f\uff1a\u901a\u8fc7 register_indicator_for_bars \u6ce8\u518c\u7684\u6307\u6807\u4f1a\u81ea\u52a8\u88ab\u5386\u53f2\u6570\u636e\u66f4\u65b0\n    pass\n\ndef on_bar(self, bar):\n    # \u5904\u7406 subscribe_bars() \u63a8\u9001\u7684\u5b9e\u65f6\u5355\u6761 Bar\n    # \u76f8\u5173\u6307\u6807\u4f1a\u5728\u6b64\u56de\u8c03\u4e4b\u524d\u5b8c\u6210\u66f4\u65b0\n    pass\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5e26\u805a\u5408\u7684\u5386\u53f2\u6570\u636e\u8bf7\u6c42",children:"\u5e26\u805a\u5408\u7684\u5386\u53f2\u6570\u636e\u8bf7\u6c42"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728\u8bf7\u6c42\u7528\u4e8e\u56de\u6d4b\u6216\u521d\u59cb\u5316\u6307\u6807\u7684\u5386\u53f2 Bar \u65f6\uff0c",(0,l.jsx)(n.code,{children:"request_bars()"})," \u652f\u6301\u76f4\u63a5\u8bf7\u6c42\u6216\u57fa\u4e8e\u66f4\u4f4e\u7ea7\u522b\u6570\u636e\u7684\u805a\u5408\u8bf7\u6c42\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u8bf7\u6c42\u539f\u59cb\u7684 1 \u5206\u949f Bar\uff08\u4ece TradeTick \u805a\u5408\uff0cprice_type=LAST\uff09\nself.request_bars(BarType.from_str("6EH4.XCME-1-MINUTE-LAST-EXTERNAL"))\n\n# \u8bf7\u6c42\u4ece 1 \u5206\u949f Bar \u805a\u5408\u5f97\u5230\u7684 5 \u5206\u949f Bar\nself.request_bars(BarType.from_str("6EH4.XCME-5-MINUTE-LAST-INTERNAL@1-MINUTE-EXTERNAL"))\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679c\u9700\u8981\u4e13\u95e8\u8bf7\u6c42\u5df2\u805a\u5408\u7684\u5386\u53f2 Bar\uff0c\u53ef\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"request_aggregated_bars()"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u8bf7\u6c42\u4ece\u5386\u53f2\u6210\u4ea4 ticks \u805a\u5408\u5f97\u5230\u7684 Bar\nself.request_aggregated_bars([BarType.from_str("6EH4.XCME-100-VOLUME-LAST-INTERNAL")])\n\n# \u8bf7\u6c42\u4ece\u5176\u4ed6 Bar \u805a\u5408\u5f97\u5230\u7684 Bar\nself.request_aggregated_bars([BarType.from_str("6EH4.XCME-5-MINUTE-LAST-INTERNAL@1-MINUTE-EXTERNAL")])\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5e38\u89c1\u9677\u9631",children:"\u5e38\u89c1\u9677\u9631"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5728\u8bf7\u6c42\u5386\u53f2\u6570\u636e\u524d\u5148\u6ce8\u518c\u6307\u6807"}),"\uff1a\u786e\u4fdd\u5728\u8bf7\u6c42\u5386\u53f2\u6570\u636e\u524d\u5b8c\u6210\u6307\u6807\u6ce8\u518c\uff0c\u5426\u5219\u6307\u6807\u4e0d\u4f1a\u7528\u5386\u53f2\u6570\u636e\u8fdb\u884c\u521d\u59cb\u5316\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u6b63\u786e\u987a\u5e8f\nself.register_indicator_for_bars(bar_type, self.ema)\nself.request_bars(bar_type)\n\n# \u9519\u8bef\u987a\u5e8f\nself.request_bars(bar_type)  # \u6307\u6807\u4e0d\u4f1a\u6536\u5230\u5386\u53f2\u6570\u636e\nself.register_indicator_for_bars(bar_type, self.ema)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u65f6\u95f4\u6233timestamps",children:"\u65f6\u95f4\u6233\uff08Timestamps\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u5e73\u53f0\u4f7f\u7528\u4e24\u4e2a\u6838\u5fc3\u65f6\u95f4\u6233\u5b57\u6bb5\uff0c\u51fa\u73b0\u5728\u4f17\u591a\u5bf9\u8c61\uff08\u5e02\u573a\u6570\u636e\u3001\u8ba2\u5355\u548c\u4e8b\u4ef6\uff09\u4e2d\uff1a\n\u8fd9\u4e9b\u5b57\u6bb5\u7528\u9014\u4e0d\u540c\uff0c\u6709\u52a9\u4e8e\u5728\u7cfb\u7edf\u4e2d\u4fdd\u6301\u7cbe\u786e\u7684\u65f6\u95f4\u8bed\u4e49\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ts_event"}),"\uff1aUNIX \u65f6\u95f4\u6233\uff08\u7eb3\u79d2\uff09\uff0c\u8868\u793a\u4e8b\u4ef6\u5728\u5916\u90e8\u771f\u5b9e\u53d1\u751f\u7684\u65f6\u95f4\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ts_init"}),"\uff1aUNIX \u65f6\u95f4\u6233\uff08\u7eb3\u79d2\uff09\uff0c\u8868\u793a Nautilus \u5728\u5185\u90e8\u521b\u5efa\u8868\u793a\u8be5\u4e8b\u4ef6\u5bf9\u8c61\u7684\u65f6\u95f4\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:"\u4e8b\u4ef6\u7c7b\u578b"})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"ts_event"})})}),(0,l.jsx)(n.th,{children:(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"ts_init"})})})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"TradeTick"})}),(0,l.jsx)(n.td,{children:"\u4ea4\u6613\u5728\u4ea4\u6613\u6240\u5b9e\u9645\u53d1\u751f\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u63a5\u6536\u5230\u8be5\u6210\u4ea4\u6570\u636e\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"QuoteTick"})}),(0,l.jsx)(n.td,{children:"\u62a5\u4ef7\u5728\u4ea4\u6613\u6240\u53d1\u751f\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u63a5\u6536\u5230\u8be5\u62a5\u4ef7\u6570\u636e\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"OrderBookDelta"})}),(0,l.jsx)(n.td,{children:"\u8ba2\u5355\u7c3f\u66f4\u65b0\u5728\u4ea4\u6613\u6240\u53d1\u751f\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u63a5\u6536\u5230\u8ba2\u5355\u7c3f\u66f4\u65b0\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Bar"})}),(0,l.jsx)(n.td,{children:"Bar \u7684\u6536\u76d8\u65f6\u95f4\uff08\u7cbe\u786e\u5230\u5206/\u5c0f\u65f6\uff09\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u5728\u672c\u5730\u751f\u6210\uff08\u9488\u5bf9 INTERNAL \u6761\u4ef6\uff09\u6216\u63a5\u6536\u5230\u8be5 Bar\uff08\u9488\u5bf9 EXTERNAL \u6761\u4ef6\uff09\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"OrderFilled"})}),(0,l.jsx)(n.td,{children:"\u8ba2\u5355\u5728\u4ea4\u6613\u6240\u88ab\u6210\u4ea4\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u63a5\u6536\u5230\u5e76\u5904\u7406\u6210\u4ea4\u56de\u6267\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"OrderCanceled"})}),(0,l.jsx)(n.td,{children:"\u53d6\u6d88\u5728\u4ea4\u6613\u6240\u88ab\u5904\u7406\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"Nautilus \u63a5\u6536\u5230\u5e76\u5904\u7406\u53d6\u6d88\u786e\u8ba4\u7684\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"NewsEvent"})}),(0,l.jsx)(n.td,{children:"\u65b0\u95fb\u53d1\u5e03\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"\u5982\u679c\u662f\u5185\u90e8\u4e8b\u4ef6\u5219\u4e3a\u5bf9\u8c61\u521b\u5efa\u65f6\u95f4\uff1b\u5982\u679c\u662f\u5916\u90e8\u4e8b\u4ef6\u5219\u4e3a\u63a5\u6536\u65f6\u95f4\u3002"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u81ea\u5b9a\u4e49\u4e8b\u4ef6"}),(0,l.jsx)(n.td,{children:"\u4e8b\u4ef6\u6761\u4ef6\u5b9e\u9645\u53d1\u751f\u7684\u65f6\u95f4\u3002"}),(0,l.jsx)(n.td,{children:"\u5982\u679c\u662f\u5185\u90e8\u4e8b\u4ef6\u5219\u4e3a\u5bf9\u8c61\u521b\u5efa\u65f6\u95f4\uff1b\u5982\u679c\u662f\u5916\u90e8\u4e8b\u4ef6\u5219\u4e3a\u63a5\u6536\u65f6\u95f4\u3002"})]})]})]}),"\n",(0,l.jsxs)(n.admonition,{type:"note",children:[(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ts_init"})," \u7684\u6982\u5ff5\u6bd4\u7b80\u5355\u7684\u201c\u63a5\u6536\u65f6\u95f4\u201d\u66f4\u5e7f\u6cdb\u3002\n\u5b83\u8868\u793a\u67d0\u4e2a\u5bf9\u8c61\uff08\u6570\u636e\u70b9\u6216\u547d\u4ee4\uff09\u5728 Nautilus \u5185\u90e8\u88ab\u521d\u59cb\u5316\u7684\u65f6\u95f4\u3002\n\u56e0\u6b64 ",(0,l.jsx)(n.code,{children:"ts_init"})," \u5e76\u4e0d\u9650\u4e8e\u201c\u63a5\u6536\u5230\u7684\u5916\u90e8\u4e8b\u4ef6\u201d\uff0c\u4e5f\u9002\u7528\u4e8e\u6240\u6709\u5185\u90e8\u521d\u59cb\u5316\u7684\u573a\u666f\u3002"]}),(0,l.jsxs)(n.p,{children:["\u4f8b\u5982\uff0c\u547d\u4ee4\uff08command\uff09\u4e5f\u4f1a\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"ts_init"})," \u5b57\u6bb5\uff0c\u6b64\u65f6\u201c\u63a5\u6536\u201d\u6982\u5ff5\u5e76\u4e0d\u9002\u7528\u3002\n\u8fd9\u4e00\u66f4\u5e7f\u6cdb\u7684\u5b9a\u4e49\u53ef\u786e\u4fdd\u4e0d\u540c\u5bf9\u8c61\u7c7b\u578b\u5728\u65f6\u95f4\u6233\u5904\u7406\u4e0a\u7684\u4e00\u81f4\u6027\u3002"]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u5ef6\u8fdf\u5206\u6790latency-analysis",children:"\u5ef6\u8fdf\u5206\u6790\uff08Latency analysis\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u91c7\u7528\u53cc\u65f6\u95f4\u6233\u673a\u5236\u540e\u53ef\u4ee5\u65b9\u4fbf\u5728\u5e73\u53f0\u5185\u8fdb\u884c\u5ef6\u8fdf\u5206\u6790\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5ef6\u8fdf\u53ef\u6309 ",(0,l.jsx)(n.code,{children:"ts_init - ts_event"})," \u8ba1\u7b97\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u8be5\u5dee\u503c\u4ee3\u8868\u4e86\u7cfb\u7edf\u7aef\u5230\u7aef\u7684\u5ef6\u8fdf\uff0c\u5305\u62ec\u7f51\u7edc\u4f20\u8f93\u3001\u5904\u7406\u5f00\u9500\u548c\u6392\u961f\u65f6\u95f4\u7b49\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6ce8\u610f\uff1a\u751f\u6210\u8fd9\u4e9b\u65f6\u95f4\u6233\u7684\u65f6\u949f\u53ef\u80fd\u5e76\u672a\u540c\u6b65\uff0c\u56e0\u6b64\u76f4\u63a5\u6bd4\u8f83\u65f6\u9700\u8c28\u614e\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u4e0d\u540c\u73af\u5883\u4e0b\u7684\u884c\u4e3a",children:"\u4e0d\u540c\u73af\u5883\u4e0b\u7684\u884c\u4e3a"}),"\n",(0,l.jsx)(n.h4,{id:"\u56de\u6d4b\u73af\u5883",children:"\u56de\u6d4b\u73af\u5883"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u6570\u636e\u6309 ",(0,l.jsx)(n.code,{children:"ts_init"})," \u8fdb\u884c\u7a33\u5b9a\u6392\u5e8f\uff08stable sort\uff09\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u786e\u5b9a\u6027\u7684\u5904\u7406\u987a\u5e8f\uff0c\u5e76\u5728\u56de\u6d4b\u4e2d\u6a21\u62df\u5408\u7406\u7684\u7cfb\u7edf\u5ef6\u8fdf\u884c\u4e3a\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u5b9e\u76d8\u73af\u5883",children:"\u5b9e\u76d8\u73af\u5883"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u7cfb\u7edf\u6309\u6570\u636e\u5230\u8fbe\u987a\u5e8f\u5904\u7406\uff0c\u4ee5\u6700\u5c0f\u5316\u7aef\u5230\u7aef\u5ef6\u8fdf\u5e76\u652f\u6301\u5b9e\u65f6\u51b3\u7b56\u3002","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ts_init"})," \u8bb0\u5f55\u6570\u636e\u88ab Nautilus \u5b9e\u65f6\u63a5\u6536\u7684\u7cbe\u786e\u65f6\u523b\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ts_event"})," \u53cd\u6620\u5916\u90e8\u4e8b\u4ef6\u53d1\u751f\u7684\u65f6\u95f4\uff0c\u4fbf\u4e8e\u5bf9\u6bd4\u5916\u90e8\u4e8b\u4ef6\u65f6\u95f4\u4e0e\u7cfb\u7edf\u63a5\u6536\u65f6\u95f4\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u6211\u4eec\u53ef\u4ee5\u7528 ",(0,l.jsx)(n.code,{children:"ts_init - ts_event"})," \u7684\u5dee\u503c\u6765\u68c0\u6d4b\u7f51\u7edc\u6216\u5904\u7406\u7684\u5ef6\u8fdf\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",children:"\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5bf9\u4e8e\u6765\u81ea\u5916\u90e8\u7684\u6570\u636e\uff0c",(0,l.jsx)(n.code,{children:"ts_init"})," \u603b\u662f\u7b49\u4e8e\u6216\u665a\u4e8e ",(0,l.jsx)(n.code,{children:"ts_event"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5bf9\u4e8e Nautilus \u5185\u90e8\u521b\u5efa\u7684\u6570\u636e\uff0c",(0,l.jsx)(n.code,{children:"ts_init"})," \u4e0e ",(0,l.jsx)(n.code,{children:"ts_event"})," \u53ef\u80fd\u76f8\u540c\uff0c\u56e0\u4e3a\u5bf9\u8c61\u662f\u5728\u4e8b\u4ef6\u53d1\u751f\u65f6\u7acb\u5373\u521d\u59cb\u5316\u7684\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5e76\u975e\u6240\u6709\u5e26\u6709 ",(0,l.jsx)(n.code,{children:"ts_init"})," \u5b57\u6bb5\u7684\u7c7b\u578b\u90fd\u5fc5\u987b\u5305\u542b ",(0,l.jsx)(n.code,{children:"ts_event"})," \u5b57\u6bb5\uff1a","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f8b\u5982\u5bf9\u8c61\u521d\u59cb\u5316\u65f6\u95f4\u4e0e\u4e8b\u4ef6\u53d1\u751f\u65f6\u95f4\u76f8\u540c\uff0c\u6216\u6839\u672c\u4e0d\u5b58\u5728\u5916\u90e8\u4e8b\u4ef6\u65f6\u95f4\u7684\u6982\u5ff5\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u6301\u4e45\u5316\u6570\u636e",children:"\u6301\u4e45\u5316\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ts_init"})," \u5b57\u6bb5\u4e5f\u7528\u6765\u6307\u793a\u6d88\u606f\u6700\u521d\u88ab\u63a5\u6536\u7684\u65f6\u95f4\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u6d41data-flow",children:"\u6570\u636e\u6d41\uff08Data flow\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u5e73\u53f0\u901a\u8fc7\u76f8\u540c\u7684\u6570\u636e\u901a\u8def\u5728\u6240\u6709\u8fd0\u884c\u73af\u5883\uff08\u53c2\u89c1 ",(0,l.jsx)(n.a,{href:"/concepts/architecture#environment-contexts",children:"environment contexts"}),"\uff09\u4e2d\u4fdd\u8bc1\u4e00\u81f4\u6027\uff08\u4f8b\u5982 ",(0,l.jsx)(n.code,{children:"backtest"}),"\u3001",(0,l.jsx)(n.code,{children:"sandbox"}),"\u3001",(0,l.jsx)(n.code,{children:"live"}),"\uff09\u3002\n\u6570\u636e\u4e3b\u8981\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"MessageBus"})," \u6d41\u5411 ",(0,l.jsx)(n.code,{children:"DataEngine"}),"\uff0c\u7136\u540e\u5206\u53d1\u5230\u5df2\u8ba2\u9605\u6216\u6ce8\u518c\u7684\u5904\u7406\u5668\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5bf9\u4e8e\u9700\u8981\u66f4\u591a\u7075\u6d3b\u6027\u7684\u7528\u6237\uff0c\u5e73\u53f0\u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u521b\u5efa\u3002\u5173\u4e8e\u5982\u4f55\u5b9e\u73b0\u7528\u6237\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u53c2\u89c1\u4e0b\u6587\u7684 ",(0,l.jsx)(n.a,{href:"#custom-data",children:"Custom Data"})," \u90e8\u5206\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u52a0\u8f7dloading-data",children:"\u6570\u636e\u52a0\u8f7d\uff08Loading data\uff09"}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u652f\u6301\u4e09\u7c7b\u4e3b\u8981\u7684\u7528\u4f8b\u4e0b\u7684\u6570\u636e\u52a0\u8f7d\u548c\u683c\u5f0f\u8f6c\u6362\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4e3a ",(0,l.jsx)(n.code,{children:"BacktestEngine"})," \u63d0\u4f9b\u56de\u6d4b\u6240\u9700\u7684\u6570\u636e\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"ParquetDataCatalog.write_data(...)"})," \u5c06\u6570\u636e\u4ee5 Nautilus \u7279\u5b9a\u7684 Parquet \u683c\u5f0f\u6301\u4e45\u5316\uff0c\u4f9b ",(0,l.jsx)(n.code,{children:"BacktestNode"})," \u540e\u7eed\u4f7f\u7528\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u7528\u4e8e\u7814\u7a76\u7528\u9014\uff0c\u786e\u4fdd\u7814\u7a76\u4e0e\u56de\u6d4b\u95f4\u7684\u6570\u636e\u4e00\u81f4\u6027\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u65e0\u8bba\u76ee\u6807\u4e3a\u4f55\uff0c\u6d41\u7a0b\u90fd\u662f\u5c06\u4e0d\u540c\u7684\u5916\u90e8\u6570\u636e\u683c\u5f0f\u8f6c\u6362\u4e3a Nautilus \u6240\u4f7f\u7528\u7684\u6570\u636e\u7ed3\u6784\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4e3a\u6b64\u901a\u5e38\u9700\u8981\u4e24\u4e2a\u7ec4\u4ef6\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4e00\u7c7b DataLoader\uff08\u901a\u5e38\u9488\u5bf9\u539f\u59cb\u6765\u6e90/\u683c\u5f0f\u5b9e\u73b0\uff09\uff0c\u8be5\u7ec4\u4ef6\u8bfb\u53d6\u6570\u636e\u5e76\u8fd4\u56de\u7b26\u5408\u76ee\u6807 Nautilus \u5bf9\u8c61 schema \u7684 ",(0,l.jsx)(n.code,{children:"pd.DataFrame"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4e00\u7c7b DataWrangler\uff08\u9488\u5bf9\u5177\u4f53\u6570\u636e\u7c7b\u578b\u5b9e\u73b0\uff09\uff0c\u5b83\u5c06 ",(0,l.jsx)(n.code,{children:"pd.DataFrame"})," \u8f6c\u6362\u4e3a Nautilus \u5bf9\u8c61\u6784\u6210\u7684 ",(0,l.jsx)(n.code,{children:"list[Data]"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"data-loaders",children:"Data loaders"}),"\n",(0,l.jsxs)(n.p,{children:["DataLoader \u901a\u5e38\u9488\u5bf9\u5177\u4f53\u7684\u539f\u59cb\u6765\u6e90/\u683c\u5f0f\u5b9e\u73b0\u3002\u4f8b\u5982\uff0cBinance \u7684\u8ba2\u5355\u7c3f\u539f\u59cb CSV \u6587\u4ef6\u4e0e ",(0,l.jsx)(n.a,{href:"https://databento.com/docs/knowledge-base/new-users/dbn-encoding/getting-started-with-dbn",children:"Databento Binary Encoding (DBN)"})," \u7684\u6587\u4ef6\u683c\u5f0f\u5b8c\u5168\u4e0d\u540c\uff0c\u9700\u8981\u4e0d\u540c\u7684 loader\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"data-wranglers",children:"Data wranglers"}),"\n",(0,l.jsxs)(n.p,{children:["DataWrangler \u6309 Nautilus \u7684\u6570\u636e\u7c7b\u578b\u5b9e\u73b0\uff0c\u53ef\u5728 ",(0,l.jsx)(n.code,{children:"nautilus_trader.persistence.wranglers"})," \u6a21\u5757\u4e2d\u627e\u5230\u3002\u76ee\u524d\u5305\u542b\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"OrderBookDeltaDataWrangler"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"OrderBookDepth10DataWrangler"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"QuoteTickDataWrangler"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"TradeTickDataWrangler"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"BarDataWrangler"})}),"\n"]}),"\n",(0,l.jsxs)(n.admonition,{type:"warning",children:[(0,l.jsxs)(n.p,{children:["\u5b58\u5728\u4e00\u4e9b ",(0,l.jsx)(n.strong,{children:"DataWrangler v2"})," \u7ec4\u4ef6\uff0c\u5b83\u4eec\u63a5\u6536\u901a\u5e38\u5177\u6709\u4e0d\u540c\u5b9a\u5bbd Nautilus Arrow v2 schema \u7684 ",(0,l.jsx)(n.code,{children:"pd.DataFrame"}),"\uff0c\u5e76\u8f93\u51fa\u57fa\u4e8e PyO3 \u7684 Nautilus \u5bf9\u8c61\uff0c\n\u8fd9\u4e9b\u5bf9\u8c61\u53ea\u517c\u5bb9\u6b63\u5728\u5f00\u53d1\u4e2d\u7684\u65b0\u7248 Nautilus core\u3002"]}),(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u8fd9\u4e9b PyO3 \u63d0\u4f9b\u7684\u6570\u636e\u5bf9\u8c61\u4e0e\u5f53\u524d\u4ecd\u5728\u4f7f\u7528\u7684\u65e7\u7248 Cython \u5bf9\u8c61\u4e0d\u517c\u5bb9\uff08\u4f8b\u5982\u4e0d\u80fd\u76f4\u63a5\u6dfb\u52a0\u5230\u73b0\u6709\u7684 ",(0,l.jsx)(n.code,{children:"BacktestEngine"}),"\uff09\u3002"]})})]}),"\n",(0,l.jsx)(n.h3,{id:"\u8f6c\u6362\u7ba1\u7ebftransformation-pipeline",children:"\u8f6c\u6362\u7ba1\u7ebf\uff08Transformation pipeline\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u6d41\u7a0b\u6982\u89c8\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u539f\u59cb\u6570\u636e\uff08\u4f8b\u5982 CSV\uff09\u4f5c\u4e3a\u8f93\u5165\u8fdb\u5165\u7ba1\u7ebf\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["DataLoader \u5904\u7406\u539f\u59cb\u6570\u636e\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a ",(0,l.jsx)(n.code,{children:"pd.DataFrame"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["DataWrangler \u8fdb\u4e00\u6b65\u5904\u7406 ",(0,l.jsx)(n.code,{children:"pd.DataFrame"}),"\uff0c\u8f93\u51fa Nautilus \u5bf9\u8c61\u7684\u5217\u8868\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["Nautilus \u7684 ",(0,l.jsx)(n.code,{children:"list[Data]"})," \u5373\u4e3a\u6570\u636e\u52a0\u8f7d\u6d41\u7a0b\u7684\u6700\u7ec8\u8f93\u51fa\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e0b\u56fe\u793a\u610f\u4e86\u539f\u59cb\u6570\u636e\u5982\u4f55\u88ab\u8f6c\u6362\u4e3a Nautilus \u6570\u636e\u7ed3\u6784\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-graph",children:"  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502          \u2502    \u2502                      \u2502                  \u2502                      \u2502\n  \u2502          \u2502    \u2502                      \u2502                  \u2502                      \u2502\n  \u2502 Raw data \u2502    \u2502                      \u2502  `pd.DataFrame`  \u2502                      \u2502\n  \u2502 (CSV)    \u251c\u2500\u2500\u2500\u25ba\u2502      DataLoader      \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502     DataWrangler     \u251c\u2500\u2500\u2500\u25ba Nautilus `list[Data]`\n  \u2502          \u2502    \u2502                      \u2502                  \u2502                      \u2502\n  \u2502          \u2502    \u2502                      \u2502                  \u2502                      \u2502\n  \u2502          \u2502    \u2502                      \u2502                  \u2502                      \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u5177\u4f53\u4f8b\u5b50\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"BinanceOrderBookDeltaDataLoader.load(...)"})," \u8bfb\u53d6\u78c1\u76d8\u4e0a\u7684 Binance CSV \u6587\u4ef6\u5e76\u8fd4\u56de ",(0,l.jsx)(n.code,{children:"pd.DataFrame"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDeltaDataWrangler.process(...)"})," \u63a5\u6536\u8be5 ",(0,l.jsx)(n.code,{children:"pd.DataFrame"})," \u5e76\u8fd4\u56de ",(0,l.jsx)(n.code,{children:"list[OrderBookDelta]"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e0b\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5728 Python \u4e2d\u5b8c\u6210\u4e0a\u8ff0\u64cd\u4f5c\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader import TEST_DATA_DIR\nfrom nautilus_trader.adapters.binance.loaders import BinanceOrderBookDeltaDataLoader\nfrom nautilus_trader.persistence.wranglers import OrderBookDeltaDataWrangler\nfrom nautilus_trader.test_kit.providers import TestInstrumentProvider\n\n\n# \u52a0\u8f7d\u539f\u59cb\u6570\u636e\ndata_path = TEST_DATA_DIR / "binance" / "btcusdt-depth-snap.csv"\ndf = BinanceOrderBookDeltaDataLoader.load(data_path)\n\n# \u8bbe\u7f6e\u4e00\u4e2a wrangler\ninstrument = TestInstrumentProvider.btcusdt_binance()\nwrangler = OrderBookDeltaDataWrangler(instrument)\n\n# \u5904\u7406\u5e76\u5f97\u5230 Nautilus \u7684 `OrderBookDelta` \u5bf9\u8c61\u5217\u8868\ndeltas = wrangler.process(df)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u76ee\u5f55data-catalog",children:"\u6570\u636e\u76ee\u5f55\uff08Data catalog\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u6570\u636e\u76ee\u5f55\u662f Nautilus \u6570\u636e\u7684\u96c6\u4e2d\u5b58\u50a8\uff0c\u4f7f\u7528 ",(0,l.jsx)(n.a,{href:"https://parquet.apache.org",children:"Parquet"})," \u683c\u5f0f\u6301\u4e45\u5316\u3002\u5b83\u662f\u56de\u6d4b\u548c\u5b9e\u76d8\u573a\u666f\u4e0b\u7684\u4e3b\u8981\u6570\u636e\u7ba1\u7406\u7cfb\u7edf\uff0c\u63d0\u4f9b\u9ad8\u6548\u7684\u5b58\u50a8\u3001\u68c0\u7d22\u548c\u6d41\u5f0f\u80fd\u529b\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u6982\u89c8\u4e0e\u67b6\u6784",children:"\u6982\u89c8\u4e0e\u67b6\u6784"}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u7684\u6570\u636e\u76ee\u5f55\u91c7\u7528\u53cc\u540e\u7aef\u67b6\u6784\uff0c\u517c\u987e Rust \u7684\u6027\u80fd\u548c Python \u7684\u7075\u6d3b\u6027\uff1a"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u6838\u5fc3\u7ec4\u4ef6\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"ParquetDataCatalog"}),"\uff1a\u4e3b\u8981\u7684 Python \u63a5\u53e3\uff0c\u7528\u4e8e\u6570\u636e\u64cd\u4f5c\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Rust backend"}),"\uff1a\u9488\u5bf9\u6838\u5fc3\u6570\u636e\u7c7b\u578b\uff08OrderBookDelta\u3001QuoteTick\u3001TradeTick\u3001Bar\u3001MarkPriceUpdate\uff09\u7684\u9ad8\u6027\u80fd\u67e5\u8be2\u5f15\u64ce\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"PyArrow backend"}),"\uff1a\u7528\u4e8e\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u548c\u590d\u6742\u8fc7\u6ee4\u7684\u7075\u6d3b\u540e\u5907\u5b9e\u73b0\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"fsspec \u96c6\u6210"}),"\uff1a\u652f\u6301\u672c\u5730\u548c\u4e91\u5b58\u50a8\uff08S3\u3001GCS\u3001Azure \u7b49\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u4e3b\u8981\u4f18\u52bf\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6027\u80fd"}),"\uff1aRust \u540e\u7aef\u4e3a\u6838\u5fc3\u5e02\u573a\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4f18\u5316\u67e5\u8be2\u6027\u80fd\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7075\u6d3b\u6027"}),"\uff1aPyArrow \u540e\u7aef\u9002\u914d\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u53ca\u590d\u6742\u8fc7\u6ee4\u573a\u666f\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u53ef\u6269\u5c55\u6027"}),"\uff1a\u9ad8\u6548\u7684\u538b\u7f29\u548c\u5217\u5f0f\u5b58\u50a8\u964d\u4f4e\u5b58\u50a8\u6210\u672c\u5e76\u63d0\u5347 I/O \u6027\u80fd\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4e91\u539f\u751f"}),"\uff1a\u901a\u8fc7 fsspec \u5185\u7f6e\u5bf9\u4e91\u5b58\u50a8\u7684\u652f\u6301\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u65e0\u5916\u90e8\u4f9d\u8d56"}),"\uff1a\u81ea\u5305\u542b\u7684\u65b9\u6848\uff0c\u65e0\u9700\u989d\u5916\u6570\u636e\u5e93\u6216\u670d\u52a1\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5b58\u50a8\u683c\u5f0f\u4f18\u52bf\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u76f8\u8f83\u4e8e CSV/JSON/HDF5\uff0cParquet \u5728\u538b\u7f29\u7387\u548c\u8bfb\u53d6\u6027\u80fd\u4e0a\u66f4\u4f18\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5217\u5f0f\u5b58\u50a8\u4fbf\u4e8e\u9ad8\u6548\u8fc7\u6ee4\u4e0e\u805a\u5408\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301 schema \u6f14\u5316\uff0c\u4fbf\u4e8e\u6570\u636e\u6a21\u578b\u5347\u7ea7\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8de8\u8bed\u8a00\u517c\u5bb9\uff08Python\u3001Rust\u3001Java\u3001C++ \u7b49\uff09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u7528\u4e8e Parquet \u7684 Arrow schema \u4e3b\u8981\u7edf\u4e00\u6765\u6e90\u4e8e core \u7684 ",(0,l.jsx)(n.code,{children:"persistence"})," Rust crate\uff0c\u90e8\u5206\u9057\u7559 schema \u5b58\u5728\u4e8e ",(0,l.jsx)(n.code,{children:"/serialization/arrow/schema.py"})," \u6a21\u5757\u4e2d\u3002"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:"\u5f53\u524d\u8ba1\u5212\u662f\u9010\u6b65\u6dd8\u6c70 Python \u7aef\u7684 schema \u6a21\u5757\uff0c\u628a schema \u5355\u4e00\u6765\u6e90\u8fc1\u79fb\u5230 Rust core\uff0c\u4ee5\u63d0\u9ad8\u4e00\u81f4\u6027\u548c\u6027\u80fd\u3002"})}),"\n",(0,l.jsx)(n.h3,{id:"\u521d\u59cb\u5316",children:"\u521d\u59cb\u5316"}),"\n",(0,l.jsxs)(n.p,{children:["\u6570\u636e\u76ee\u5f55\u53ef\u4ee5\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"NAUTILUS_PATH"})," \u73af\u5883\u53d8\u91cf\u521d\u59cb\u5316\uff0c\u6216\u663e\u5f0f\u4f20\u5165\u8def\u5f84\u5bf9\u8c61\u8fdb\u884c\u521b\u5efa\u3002"]}),"\n",(0,l.jsxs)(n.admonition,{title:"NAUTILUS_PATH environment variable",type:"note",children:[(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"NAUTILUS_PATH"})," \u5e94\u5f53\u6307\u5411\u5305\u542b Nautilus \u6570\u636e\u7684\u6839\u76ee\u5f55\uff0c\u76ee\u5f55\u4e0b\u4f1a\u81ea\u52a8\u8ffd\u52a0 ",(0,l.jsx)(n.code,{children:"/catalog"})," \u4f5c\u4e3a\u6570\u636e\u76ee\u5f55\u3002"]}),(0,l.jsx)(n.p,{children:"\u4f8b\u5982\uff1a"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u82e5 ",(0,l.jsx)(n.code,{children:"NAUTILUS_PATH=/home/user/trading_data"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5219\u76ee\u5f55\u4f4d\u4e8e ",(0,l.jsx)(n.code,{children:"/home/user/trading_data/catalog"}),"\u3002"]}),"\n"]}),(0,l.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"ParquetDataCatalog.from_env()"})," \u65f6\u8bf7\u786e\u4fdd ",(0,l.jsx)(n.code,{children:"NAUTILUS_PATH"})," \u6307\u5411\u7236\u76ee\u5f55\u800c\u975e catalog \u76ee\u5f55\u672c\u8eab\u3002"]})]}),"\n",(0,l.jsx)(n.p,{children:"\u4e0b\u9762\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5728\u5df2\u6709\u6570\u636e\u7684\u8def\u5f84\u4e0a\u521d\u59cb\u5316\u6570\u636e\u76ee\u5f55\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from pathlib import Path\nfrom nautilus_trader.persistence.catalog import ParquetDataCatalog\n\n\nCATALOG_PATH = Path.cwd() / "catalog"\n\n# \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 catalog \u5b9e\u4f8b\ncatalog = ParquetDataCatalog(CATALOG_PATH)\n\n# \u6216\u8005\uff1a\u57fa\u4e8e\u73af\u5883\u53d8\u91cf\u521d\u59cb\u5316\ncatalog = ParquetDataCatalog.from_env()  # \u4f7f\u7528 NAUTILUS_PATH \u73af\u5883\u53d8\u91cf\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\u4e0e\u5b58\u50a8\u9009\u9879",children:"\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\u4e0e\u5b58\u50a8\u9009\u9879"}),"\n",(0,l.jsx)(n.p,{children:"\u76ee\u5f55\u901a\u8fc7 fsspec \u652f\u6301\u591a\u79cd\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff0c\u4fbf\u4e8e\u5728\u672c\u5730\u4e0e\u4e91\u4e4b\u95f4\u65e0\u7f1d\u5207\u6362\u3002"}),"\n",(0,l.jsx)(n.h4,{id:"\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae",children:"\u652f\u6301\u7684\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\uff08",(0,l.jsx)(n.code,{children:"file"}),"\uff09\uff1a"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog = ParquetDataCatalog(\n    path="/path/to/catalog",\n    fs_protocol="file",  # \u9ed8\u8ba4\u534f\u8bae\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["Amazon S3\uff08",(0,l.jsx)(n.code,{children:"s3"}),"\uff09\uff1a"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog = ParquetDataCatalog(\n    path="s3://my-bucket/nautilus-data/",\n    fs_protocol="s3",\n    fs_storage_options={\n        "key": "your-access-key-id",\n        "secret": "your-secret-access-key",\n        "region": "us-east-1",\n        "endpoint_url": "https://s3.amazonaws.com",  # \u53ef\u9009\u81ea\u5b9a\u4e49 endpoint\n    }\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["Google Cloud Storage\uff08",(0,l.jsx)(n.code,{children:"gcs"}),"\uff09\uff1a"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog = ParquetDataCatalog(\n    path="gcs://my-bucket/nautilus-data/",\n    fs_protocol="gcs",\n    fs_storage_options={\n        "project": "my-project-id",\n        "token": "/path/to/service-account.json",  # \u6216\u4f7f\u7528 "cloud" \u4ee5\u4f7f\u7528\u9ed8\u8ba4\u51ed\u8bc1\n    }\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["Azure Blob Storage\uff08",(0,l.jsx)(n.code,{children:"abfs"}),"\uff09\uff1a"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog = ParquetDataCatalog(\n    path="abfs://container@account.dfs.core.windows.net/nautilus-data/",\n    fs_protocol="abfs",\n    fs_storage_options={\n        "account_name": "your-storage-account",\n        "account_key": "your-account-key",\n        # \u6216\u4f7f\u7528 SAS token\uff1a "sas_token": "your-sas-token"\n    }\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u57fa\u4e8e-uri-\u7684\u521d\u59cb\u5316",children:"\u57fa\u4e8e URI \u7684\u521d\u59cb\u5316"}),"\n",(0,l.jsx)(n.p,{children:"\u4e3a\u65b9\u4fbf\u8d77\u89c1\uff0c\u53ef\u4f7f\u7528 URI \u5b57\u7b26\u4e32\u81ea\u52a8\u89e3\u6790\u534f\u8bae\u548c\u5b58\u50a8\u9009\u9879\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u672c\u5730\u6587\u4ef6\u7cfb\u7edf\ncatalog = ParquetDataCatalog.from_uri("/path/to/catalog")\n\n# S3 \u5b58\u50a8\ncatalog = ParquetDataCatalog.from_uri("s3://my-bucket/nautilus-data/")\n\n# \u5e26\u5b58\u50a8\u9009\u9879\u7684\u793a\u4f8b\ncatalog = ParquetDataCatalog.from_uri(\n    "s3://my-bucket/nautilus-data/",\n    storage_options={\n        "region": "us-east-1",\n        "access_key_id": "your-key",\n        "secret_access_key": "your-secret"\n    }\n)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5199\u5165\u6570\u636e",children:"\u5199\u5165\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"write_data()"})," \u65b9\u6cd5\u5c06\u6570\u636e\u5199\u5165 catalog\u3002\u6240\u6709 Nautilus \u5185\u7f6e\u7684 ",(0,l.jsx)(n.code,{children:"Data"})," \u5bf9\u8c61\u4ee5\u53ca\u7ee7\u627f\u81ea ",(0,l.jsx)(n.code,{children:"Data"})," \u7684\u5bf9\u8c61\u5747\u53d7\u652f\u6301\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u5199\u5165\u4e00\u4e2a\u6570\u636e\u5bf9\u8c61\u5217\u8868\ncatalog.write_data(quote_ticks)\n\n# \u6307\u5b9a\u65f6\u95f4\u6233\u8303\u56f4\u5199\u5165\ncatalog.write_data(\n    trade_ticks,\n    start=1704067200000000000,  # \u53ef\u9009\u7684\u8d77\u59cb\u65f6\u95f4\u8986\u76d6\uff08UNIX \u7eb3\u79d2\uff09\n    end=1704153600000000000,    # \u53ef\u9009\u7684\u7ed3\u675f\u65f6\u95f4\u8986\u76d6\uff08UNIX \u7eb3\u79d2\uff09\n)\n\n# \u5728\u8986\u76d6/\u91cd\u53e0\u6570\u636e\u65f6\u8df3\u8fc7 disjoint \u68c0\u67e5\ncatalog.write_data(bars, skip_disjoint_check=True)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6587\u4ef6\u547d\u540d\u4e0e\u6570\u636e\u7ec4\u7ec7",children:"\u6587\u4ef6\u547d\u540d\u4e0e\u6570\u636e\u7ec4\u7ec7"}),"\n",(0,l.jsxs)(n.p,{children:["catalog \u4f1a\u6839\u636e\u5199\u5165\u6570\u636e\u7684\u65f6\u95f4\u8303\u56f4\u81ea\u52a8\u751f\u6210\u6587\u4ef6\u540d\uff0c\u91c7\u7528 ",(0,l.jsx)(n.code,{children:"{start_timestamp}_{end_timestamp}.parquet"})," \u7684\u547d\u540d\u89c4\u5219\uff0c\u65f6\u95f4\u6233\u4f7f\u7528 ISO \u683c\u5f0f\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u6570\u636e\u6309\u6570\u636e\u7c7b\u578b\u548c instrument id \u5206\u76ee\u5f55\u5b58\u653e\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tree",children:"catalog/\n\u251c\u2500\u2500 data/\n\u2502   \u251c\u2500\u2500 quote_ticks/\n\u2502   \u2502   \u2514\u2500\u2500 eurusd.sim/\n\u2502   \u2502       \u2514\u2500\u2500 20240101T000000000000000_20240101T235959999999999.parquet\n\u2502   \u2514\u2500\u2500 trade_ticks/\n\u2502       \u2514\u2500\u2500 btcusd.binance/\n\u2502           \u2514\u2500\u2500 20240101T000000000000000_20240101T235959999999999.parquet\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Rust backend \u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\uff08\u6027\u80fd\u589e\u5f3a\uff09\uff1a"})}),"\n",(0,l.jsx)(n.p,{children:"\u4e0b\u5217\u6570\u636e\u7c7b\u578b\u5728 Rust \u7aef\u6709\u4f18\u5316\u5b9e\u73b0\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDelta"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDeltas"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDepth10"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QuoteTick"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TradeTick"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Bar"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MarkPriceUpdate"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u91cd\u53e0\u6570\u636e\u4f1a\u89e6\u53d1\u65ad\u8a00\u9519\u8bef\u4ee5\u4fdd\u8bc1\u6570\u636e\u5b8c\u6574\u6027\u3002\u5982\u9700\u7ed5\u8fc7\u6b64\u68c0\u67e5\uff0c\u53ef\u5728 ",(0,l.jsx)(n.code,{children:"write_data()"})," \u4e2d\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"skip_disjoint_check=True"}),"\u3002"]})}),"\n",(0,l.jsx)(n.h3,{id:"\u8bfb\u53d6\u6570\u636e",children:"\u8bfb\u53d6\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"query()"})," \u65b9\u6cd5\u4ece catalog \u4e2d\u8bfb\u53d6\u6570\u636e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.model import QuoteTick, TradeTick\n\n# \u67e5\u8be2\u67d0\u5408\u7ea6\u5728\u65f6\u95f4\u533a\u95f4\u5185\u7684 quote ticks\nquotes = catalog.query(\n    data_cls=QuoteTick,\n    identifiers=["EUR/USD.SIM"],\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-02T00:00:00Z"\n)\n\n# \u5e26\u8fc7\u6ee4\u6761\u4ef6\u7684 trade ticks \u67e5\u8be2\ntrades = catalog.query(\n    data_cls=TradeTick,\n    identifiers=["BTC/USD.BINANCE"],\n    start="2024-01-01",\n    end="2024-01-02",\n    where="price > 50000"\n)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"backtestdataconfig--\u56de\u6d4b\u7684\u6570\u636e\u89c4\u8303",children:[(0,l.jsx)(n.code,{children:"BacktestDataConfig"})," \u2014\u2014 \u56de\u6d4b\u7684\u6570\u636e\u89c4\u8303"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"BacktestDataConfig"})," \u7c7b\u662f\u56de\u6d4b\u542f\u52a8\u524d\u6307\u5b9a\u6570\u636e\u9700\u6c42\u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u5b83\u5b9a\u4e49\u4e86\u56de\u6d4b\u6267\u884c\u671f\u95f4\u5e94\u4ece catalog \u52a0\u8f7d\u54ea\u4e9b\u6570\u636e\uff0c\u4ee5\u53ca\u5982\u4f55\u8fc7\u6ee4\u4e0e\u5904\u7406\u8fd9\u4e9b\u6570\u636e\u3002"]}),"\n",(0,l.jsx)(n.h4,{id:"\u6838\u5fc3\u53c2\u6570",children:"\u6838\u5fc3\u53c2\u6570"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5fc5\u9700\u53c2\u6570\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"catalog_path"}),"\uff1a\u6570\u636e\u76ee\u5f55\u7684\u8def\u5f84\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"data_cls"}),"\uff1a\u6570\u636e\u7c7b\u578b\u7c7b\uff08\u4f8b\u5982 QuoteTick\u3001TradeTick\u3001OrderBookDelta\u3001Bar\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53ef\u9009\u53c2\u6570\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"catalog_fs_protocol"}),"\uff1a\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff08'file'\u3001's3'\u3001'gcs' \u7b49\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"catalog_fs_storage_options"}),"\uff1a\u5b58\u50a8\u76f8\u5173\u9009\u9879\uff08\u51ed\u8bc1\u3001\u533a\u57df\u7b49\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"instrument_id"}),"\uff1a\u8981\u52a0\u8f7d\u7684\u5355\u4e2a\u5408\u7ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"instrument_ids"}),"\uff1a\u5408\u7ea6\u5217\u8868\uff08\u53ef\u66ff\u4ee3\u5355\u4e00\u7684 instrument_id\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"start_time"}),"\uff1a\u6570\u636e\u7b5b\u9009\u8d77\u59cb\u65f6\u95f4\uff08ISO \u5b57\u7b26\u4e32\u6216 UNIX \u7eb3\u79d2\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"end_time"}),"\uff1a\u6570\u636e\u7b5b\u9009\u7ed3\u675f\u65f6\u95f4\uff08ISO \u5b57\u7b26\u4e32\u6216 UNIX \u7eb3\u79d2\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"filter_expr"}),"\uff1a\u989d\u5916\u7684 PyArrow \u8fc7\u6ee4\u8868\u8fbe\u5f0f\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"client_id"}),"\uff1a\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u5ba2\u6237\u7aef ID\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"metadata"}),"\uff1a\u67e5\u8be2\u65f6\u9644\u52a0\u7684\u5143\u6570\u636e\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"bar_spec"}),'\uff1aBar \u6570\u636e\u7684\u89c4\u8303\uff08\u4f8b\u5982 "1-MINUTE-LAST"\uff09\u3002']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"bar_types"}),"\uff1aBarType \u5217\u8868\uff08\u53ef\u66ff\u4ee3 bar_spec\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b",children:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u52a0\u8f7d quote ticks\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.config import BacktestDataConfig\nfrom nautilus_trader.model import QuoteTick, InstrumentId\n\ndata_config = BacktestDataConfig(\n    catalog_path="/path/to/catalog",\n    data_cls=QuoteTick,\n    instrument_id=InstrumentId.from_str("EUR/USD.SIM"),\n    start_time="2024-01-01T00:00:00Z",\n    end_time="2024-01-02T00:00:00Z",\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u52a0\u8f7d\u591a\u4e2a\u5408\u7ea6\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'data_config = BacktestDataConfig(\n    catalog_path="/path/to/catalog",\n    data_cls=TradeTick,\n    instrument_ids=["BTC/USD.BINANCE", "ETH/USD.BINANCE"],\n    start_time="2024-01-01T00:00:00Z",\n    end_time="2024-01-02T00:00:00Z",\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u52a0\u8f7d Bar \u6570\u636e\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'data_config = BacktestDataConfig(\n    catalog_path="/path/to/catalog",\n    data_cls=Bar,\n    instrument_id=InstrumentId.from_str("AAPL.NASDAQ"),\n    bar_spec="5-MINUTE-LAST",\n    start_time="2024-01-01",\n    end_time="2024-01-31",\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u9ad8\u7ea7\u914d\u7f6e\u793a\u4f8b",children:"\u9ad8\u7ea7\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5e26\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u7684\u4e91\u5b58\u50a8\u793a\u4f8b\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'data_config = BacktestDataConfig(\n    catalog_path="s3://my-bucket/nautilus-data/",\n    catalog_fs_protocol="s3",\n    catalog_fs_storage_options={\n        "key": "your-access-key",\n        "secret": "your-secret-key",\n        "region": "us-east-1"\n    },\n    data_cls=OrderBookDelta,\n    instrument_id=InstrumentId.from_str("BTC/USD.COINBASE"),\n    start_time="2024-01-01T09:30:00Z",\n    end_time="2024-01-01T16:00:00Z",\n    filter_expr="side == \'BUY\'",  # Only buy-side deltas\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5e26 Client ID \u7684\u81ea\u5b9a\u4e49\u6570\u636e\u793a\u4f8b\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'data_config = BacktestDataConfig(\n    catalog_path="/path/to/catalog",\n    data_cls="my_package.data.NewsEventData",\n    client_id="NewsClient",\n    metadata={"source": "reuters", "category": "earnings"},\n    start_time="2024-01-01",\n    end_time="2024-01-31",\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u4e0e-backtestrunconfig-\u7684\u96c6\u6210",children:"\u4e0e BacktestRunConfig \u7684\u96c6\u6210"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"BacktestDataConfig"})," \u5bf9\u8c61\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"BacktestRunConfig"})," \u96c6\u6210\u8fdb\u56de\u6d4b\u6846\u67b6\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.config import BacktestRunConfig, BacktestVenueConfig\n\n# \u5b9a\u4e49\u591a\u4e2a\u6570\u636e\u914d\u7f6e\ndata_configs = [\n    BacktestDataConfig(\n        catalog_path="/path/to/catalog",\n        data_cls=QuoteTick,\n        instrument_id="EUR/USD.SIM",\n        start_time="2024-01-01",\n        end_time="2024-01-02",\n    ),\n    BacktestDataConfig(\n        catalog_path="/path/to/catalog",\n        data_cls=TradeTick,\n        instrument_id="EUR/USD.SIM",\n        start_time="2024-01-01",\n        end_time="2024-01-02",\n    ),\n]\n\n# \u521b\u5efa\u56de\u6d4b\u8fd0\u884c\u914d\u7f6e\nrun_config = BacktestRunConfig(\n    venues=[BacktestVenueConfig(name="SIM", oms_type="HEDGING")],\n    data=data_configs,  # \u6570\u636e\u914d\u7f6e\u5217\u8868\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-02T00:00:00Z",\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u6570\u636e\u52a0\u8f7d\u6d41\u7a0b",children:"\u6570\u636e\u52a0\u8f7d\u6d41\u7a0b"}),"\n",(0,l.jsxs)(n.p,{children:["\u5f53\u56de\u6d4b\u8fd0\u884c\u65f6\uff0c",(0,l.jsx)(n.code,{children:"BacktestNode"})," \u4f1a\u4f9d\u6b21\u5904\u7406\u6bcf\u4e2a ",(0,l.jsx)(n.code,{children:"BacktestDataConfig"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Catalog \u52a0\u8f7d\uff1a\u6839\u636e\u914d\u7f6e\u521b\u5efa ",(0,l.jsx)(n.code,{children:"ParquetDataCatalog"})," \u5b9e\u4f8b\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u67e5\u8be2\u6784\u5efa\uff1a\u4ece\u914d\u7f6e\u5c5e\u6027\u6784\u5efa\u67e5\u8be2\u53c2\u6570\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u68c0\u7d22\uff1a\u4f7f\u7528\u5408\u9002\u7684\u540e\u7aef\u6267\u884c catalog \u67e5\u8be2\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5408\u7ea6/\u5408\u7ea6\u5b9a\u4e49\u52a0\u8f7d\uff08Instrument Loading\uff09\uff1a\u5982\u9700\u5219\u52a0\u8f7d\u6807\u7684\u5b9a\u4e49\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5f15\u64ce\u96c6\u6210\uff1a\u6309\u6b63\u786e\u987a\u5e8f\u5c06\u6570\u636e\u52a0\u5165\u56de\u6d4b\u5f15\u64ce\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5904\u7406\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Instrument ID \u7684\u89e3\u6790\u4e0e\u9a8c\u8bc1\uff08\u4fdd\u7559\u82f1\u6587\u672f\u8bed Instrument ID\uff09\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u7c7b\u578b\u7684\u9a8c\u8bc1\u4e0e\u8f6c\u6362\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5bf9\u5927\u6570\u636e\u96c6\u7684\u5185\u5b58\u9ad8\u6548\u6d41\u5f0f\u5904\u7406\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u9519\u8bef\u5904\u7406\u4e0e\u65e5\u5fd7\u8bb0\u5f55\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"datacatalogconfig--\u5373\u65f6on-the-fly\u6570\u636e\u52a0\u8f7d",children:"DataCatalogConfig \u2014\u2014 \u5373\u65f6\uff08on-the-fly\uff09\u6570\u636e\u52a0\u8f7d"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"DataCatalogConfig"})," \u7c7b\u7528\u4e8e\u914d\u7f6e\u8fd0\u884c\u65f6\u7684\u6309\u9700\uff08on-the-fly\uff09\u6570\u636e\u52a0\u8f7d\u573a\u666f\uff0c\u7279\u522b\u9002\u7528\u4e8e\u6807\u7684\u6570\u91cf\u5de8\u5927\u4e14\u65e0\u6cd5\u5728\u56de\u6d4b\u524d\u5168\u90e8\u5217\u4e3e\u7684\u60c5\u51b5\u3002\n\u4e0e\u4e8b\u5148\u4e3a\u56de\u6d4b\u6307\u5b9a\u6570\u636e\u7684 ",(0,l.jsx)(n.code,{children:"BacktestDataConfig"})," \u4e0d\u540c\uff0c",(0,l.jsx)(n.code,{children:"DataCatalogConfig"})," \u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u7075\u6d3b\u8bbf\u95ee catalog\u3002\n\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u7684 catalog \u540c\u6837\u53ef\u4ee5\u7528\u4e8e\u5386\u53f2\u6570\u636e\u8bf7\u6c42\u3002"]}),"\n",(0,l.jsx)(n.h4,{id:"\u6838\u5fc3\u53c2\u6570-1",children:"\u6838\u5fc3\u53c2\u6570"}),"\n",(0,l.jsx)(n.p,{children:"\u5fc5\u586b\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"path"}),"\uff1a\u6570\u636e catalog \u7684\u76ee\u5f55\u8def\u5f84\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u9009\u53c2\u6570\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"fs_protocol"}),"\uff1a\u6587\u4ef6\u7cfb\u7edf\u534f\u8bae\uff08\u5982 'file'\u3001's3'\u3001'gcs'\u3001'azure' \u7b49\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"fs_storage_options"}),"\uff1a\u534f\u8bae\u76f8\u5173\u7684\u5b58\u50a8\u9009\u9879\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"name"}),"\uff1a\u53ef\u9009\u7684 catalog \u914d\u7f6e\u6807\u8bc6\u540d\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b-1",children:"\u57fa\u672c\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u672c\u5730 catalog \u914d\u7f6e\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.persistence.config import DataCatalogConfig\n\ncatalog_config = DataCatalogConfig(\n    path="/path/to/catalog",\n    fs_protocol="file",\n    name="local_market_data"\n)\n\n# \u8f6c\u6362\u4e3a catalog \u5b9e\u4f8b\ncatalog = catalog_config.as_catalog()\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u4e91\u5b58\u50a8\u914d\u7f6e\u793a\u4f8b\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog_config = DataCatalogConfig(\n    path="s3://my-bucket/market-data/",\n    fs_protocol="s3",\n    fs_storage_options={\n        "key": "your-access-key",\n        "secret": "your-secret-key",\n        "region": "us-west-2",\n        "endpoint_url": "https://s3.us-west-2.amazonaws.com"\n    },\n    name="cloud_market_data"\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u5728\u5b9e\u76d8live-trading\u4e2d\u7684\u96c6\u6210",children:"\u5728\u5b9e\u76d8\uff08live trading\uff09\u4e2d\u7684\u96c6\u6210"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"DataCatalogConfig"})," \u5e38\u7528\u4e8e\u5b9e\u76d8\u7cfb\u7edf\u4e2d\u4ee5\u4fbf\u8bbf\u95ee\u5386\u53f2\u6570\u636e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.config import TradingNodeConfig\nfrom nautilus_trader.persistence.config import DataCatalogConfig\n\n# \u4e3a\u5b9e\u76d8\u7cfb\u7edf\u914d\u7f6e catalog\ncatalog_config = DataCatalogConfig(\n    path="/data/nautilus/catalog",\n    fs_protocol="file",\n    name="historical_data"\n)\n\n# \u5728\u4ea4\u6613\u8282\u70b9\u914d\u7f6e\u4e2d\u4f7f\u7528\nnode_config = TradingNodeConfig(\n    # ... \u5176\u4ed6\u914d\u7f6e\n    catalog=catalog_config,  # \u542f\u7528\u5386\u53f2\u6570\u636e\u8bbf\u95ee\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u6d41\u5f0fstreaming\u914d\u7f6e",children:"\u6d41\u5f0f\uff08streaming\uff09\u914d\u7f6e"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728\u5b9e\u76d8\u6216\u56de\u6d4b\u671f\u95f4\u5c06\u6570\u636e\u6d41\u5f0f\u5199\u5165 catalog \u65f6\uff0c\u53ef\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"StreamingConfig"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.persistence.config import StreamingConfig, RotationMode\nimport pandas as pd\n\nstreaming_config = StreamingConfig(\n    catalog_path="/path/to/streaming/catalog",\n    fs_protocol="file",\n    flush_interval_ms=1000,  # \u6bcf\u79d2 flush\n    replace_existing=False,\n    rotation_mode=RotationMode.DAILY,\n    rotation_interval=pd.Timedelta(hours=1),\n    max_file_size=1024 * 1024 * 100,  # \u6700\u5927 100MB\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u5e38\u89c1\u7528\u4f8b",children:"\u5e38\u89c1\u7528\u4f8b"}),"\n",(0,l.jsx)(n.p,{children:"\u5386\u53f2\u6570\u636e\u5206\u6790\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5728\u5b9e\u76d8\u671f\u95f4\u52a0\u8f7d\u5386\u53f2\u6570\u636e\u4ee5\u4f9b\u7b56\u7565\u8ba1\u7b97\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8bbf\u95ee\u53c2\u8003\u6570\u636e\u4ee5\u8fdb\u884c\u6807\u7684\u67e5\u627e\uff08instrument lookup\uff09\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u68c0\u7d22\u5386\u53f2\u8868\u73b0\u6307\u6807\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u52a8\u6001\u6570\u636e\u52a0\u8f7d\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6839\u636e\u8fd0\u884c\u65f6\u6761\u4ef6\u6309\u9700\u52a0\u8f7d\u6570\u636e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u6570\u636e\u52a0\u8f7d\u7b56\u7565\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u591a\u4e2a catalog \u6e90\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7814\u53d1\u4e0e\u7814\u7a76\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5728 Jupyter \u7b14\u8bb0\u672c\u4e2d\u8fdb\u884c\u4ea4\u4e92\u5f0f\u6570\u636e\u63a2\u7d22\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5373\u5e2d\u5206\u6790\u4e0e\u56de\u6d4b\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u8d28\u91cf\u9a8c\u8bc1\u4e0e\u76d1\u63a7\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u67e5\u8be2\u7cfb\u7edf\u4e0e\u53cc\u540e\u7aefdual-backend\u67b6\u6784",children:"\u67e5\u8be2\u7cfb\u7edf\u4e0e\u53cc\u540e\u7aef\uff08dual backend\uff09\u67b6\u6784"}),"\n",(0,l.jsx)(n.p,{children:"catalog \u7684\u67e5\u8be2\u7cfb\u7edf\u91c7\u7528\u53cc\u540e\u7aef\u67b6\u6784\uff0c\u4f1a\u6839\u636e\u6570\u636e\u7c7b\u578b\u548c\u67e5\u8be2\u53c2\u6570\u81ea\u52a8\u9009\u62e9\u6700\u5408\u9002\u7684\u67e5\u8be2\u5f15\u64ce\u3002"}),"\n",(0,l.jsx)(n.h4,{id:"\u540e\u7aef\u9009\u62e9\u903b\u8f91",children:"\u540e\u7aef\u9009\u62e9\u903b\u8f91"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Rust \u540e\u7aef\uff08\u9ad8\u6027\u80fd\uff09\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u7c7b\u578b\uff08Supported Types\uff09\uff1aOrderBookDelta\u3001OrderBookDeltas\u3001OrderBookDepth10\u3001QuoteTick\u3001TradeTick\u3001Bar\u3001MarkPriceUpdate\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u4f7f\u7528\u6761\u4ef6\uff1a\u5f53 ",(0,l.jsx)(n.code,{children:"files"})," \u53c2\u6570\u4e3a None\uff08\u81ea\u52a8\u53d1\u73b0\u6587\u4ef6\uff09\u65f6\u4f7f\u7528\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u4f18\u70b9\uff1a\u6027\u80fd\u4e0e\u5185\u5b58\u6548\u7387\u4f18\u5316\uff0c\u539f\u751f Arrow \u96c6\u6210\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"PyArrow \u540e\u7aef\uff08\u7075\u6d3b\uff09\uff1a"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u7c7b\u578b\uff1a\u5305\u542b\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u5728\u5185\u7684\u6240\u6709\u6570\u636e\u7c7b\u578b\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u4f7f\u7528\u6761\u4ef6\uff1a\u7528\u4e8e\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u6216\u5f53\u6307\u5b9a ",(0,l.jsx)(n.code,{children:"files"})," \u53c2\u6570\u65f6\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u4f18\u70b9\uff1a\u9ad8\u7ea7\u8fc7\u6ee4\u3001\u81ea\u5b9a\u4e49\u6570\u636e\u652f\u6301\u3001\u590d\u6742\u67e5\u8be2\u8868\u8fbe\u5f0f\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u67e5\u8be2\u65b9\u6cd5\u4e0e\u53c2\u6570",children:"\u67e5\u8be2\u65b9\u6cd5\u4e0e\u53c2\u6570"}),"\n",(0,l.jsx)(n.p,{children:"\u6838\u5fc3\u67e5\u8be2\u53c2\u6570\u793a\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'catalog.query(\n    data_cls=QuoteTick,                    # \u8981\u67e5\u8be2\u7684\u6570\u636e\u7c7b\u578b\n    identifiers=["EUR/USD.SIM"],         # \u6807\u7684\u6807\u8bc6\u5217\u8868\n    start="2024-01-01T00:00:00Z",        # \u8d77\u59cb\u65f6\u95f4\uff08\u652f\u6301\u591a\u79cd\u683c\u5f0f\uff09\n    end="2024-01-02T00:00:00Z",          # \u7ed3\u675f\u65f6\u95f4\n    where="bid > 1.1000",               # PyArrow \u8fc7\u6ee4\u8868\u8fbe\u5f0f\n    files=None,                            # \u6307\u5b9a\u6587\u4ef6\u4f1a\u5f3a\u5236\u4f7f\u7528 PyArrow \u540e\u7aef\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u65f6\u95f4\u683c\u5f0f\u652f\u6301\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["ISO 8601 \u5b57\u7b26\u4e32\uff1a",(0,l.jsx)(n.code,{children:'"2024-01-01T00:00:00Z"'}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["UNIX \u7eb3\u79d2\uff08UNIX nanoseconds\uff09\uff1a",(0,l.jsx)(n.code,{children:"1704067200000000000"}),"\uff08\u6216\u4f7f\u7528 ISO \u5b57\u7b26\u4e32\uff09\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["Pandas Timestamp\uff1a",(0,l.jsx)(n.code,{children:'pd.Timestamp("2024-01-01", tz="UTC")'}),"\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"Python datetime \u5bf9\u8c61\uff08\u5efa\u8bae\u4f7f\u7528\u5e26\u65f6\u533a\uff09\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u9ad8\u7ea7\u8fc7\u6ee4\u793a\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u590d\u6742\u7684 PyArrow \u8868\u8fbe\u5f0f\ncatalog.query(\n    data_cls=TradeTick,\n    identifiers=["BTC/USD.BINANCE"],\n    where="price > 50000 AND size > 1.0",\n    start="2024-01-01",\n    end="2024-01-02",\n)\n\n# \u591a\u4e2a\u6807\u7684\u5e76\u6309 metadata \u8fc7\u6ee4\ncatalog.query(\n    data_cls=Bar,\n    identifiers=["AAPL.NASDAQ", "MSFT.NASDAQ"],\n    where="volume > 1000000",\n    metadata={"bar_type": "1-MINUTE-LAST"},\n)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"catalog-\u64cd\u4f5c",children:"Catalog \u64cd\u4f5c"}),"\n",(0,l.jsx)(n.p,{children:"catalog \u63d0\u4f9b\u82e5\u5e72\u7ef4\u62a4\u548c\u7ec4\u7ec7\u6570\u636e\u6587\u4ef6\u7684\u64cd\u4f5c\u51fd\u6570\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u80fd\u4f18\u5316\u5b58\u50a8\u3001\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u5e76\u4fdd\u8bc1\u6570\u636e\u5b8c\u6574\u6027\u3002"}),"\n",(0,l.jsx)(n.h4,{id:"\u91cd\u8bbe\u6587\u4ef6\u540dreset-file-names",children:"\u91cd\u8bbe\u6587\u4ef6\u540d\uff08Reset file names\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u5c06 parquet \u6587\u4ef6\u540d\u91cd\u7f6e\u4e3a\u5339\u914d\u5b9e\u9645\u5185\u5bb9\u7684\u65f6\u95f4\u6233\uff0c\u786e\u4fdd\u57fa\u4e8e\u6587\u4ef6\u540d\u7684\u8fc7\u6ee4\u6b63\u5e38\u5de5\u4f5c\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u91cd\u7f6e catalog \u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# \u91cd\u7f6e catalog \u4e2d\u6240\u6709 parquet \u6587\u4ef6\u7684\u6587\u4ef6\u540d\ncatalog.reset_all_file_names()\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u91cd\u7f6e\u7279\u5b9a\u6570\u636e\u7c7b\u578b\u7684\u6587\u4ef6\u540d\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u91cd\u7f6e\u6240\u6709 quote tick \u6587\u4ef6\u540d\ncatalog.reset_data_file_names(QuoteTick)\n\n# \u91cd\u7f6e\u7279\u5b9a\u6807\u7684\u7684 trade \u6587\u4ef6\u540d\ncatalog.reset_data_file_names(TradeTick, "BTC/USD.BINANCE")\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u5408\u5e76consolidate-catalog",children:"\u5408\u5e76\uff08Consolidate catalog\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u5c06\u591a\u4e2a\u5c0f\u7684 parquet \u6587\u4ef6\u5408\u5e76\u6210\u66f4\u5927\u7684\u6587\u4ef6\uff0c\u4ee5\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u5e76\u51cf\u5c11\u5b58\u50a8\u5f00\u9500\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5408\u5e76\u6574\u4e2a catalog\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5408\u5e76 catalog \u4e2d\u7684\u6240\u6709\u6587\u4ef6\ncatalog.consolidate_catalog()\n\n# \u5728\u6307\u5b9a\u65f6\u95f4\u8303\u56f4\u5185\u5408\u5e76\u6587\u4ef6\ncatalog.consolidate_catalog(\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-02T00:00:00Z",\n    ensure_contiguous_files=True\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5408\u5e76\u7279\u5b9a\u6570\u636e\u7c7b\u578b\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5408\u5e76\u6240\u6709 quote tick \u6587\u4ef6\ncatalog.consolidate_data(QuoteTick)\n\n# \u5408\u5e76\u7279\u5b9a\u6807\u7684\u7684\u6587\u4ef6\ncatalog.consolidate_data(\n    TradeTick,\n    identifier="BTC/USD.BINANCE",\n    start="2024-01-01",\n    end="2024-01-31"\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u6309\u5468\u671f\u5408\u5e76consolidate-by-period",children:"\u6309\u5468\u671f\u5408\u5e76\uff08Consolidate by period\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u6309\u56fa\u5b9a\u65f6\u95f4\u5468\u671f\u62c6\u5206/\u5408\u5e76\u6570\u636e\u6587\u4ef6\uff0c\u4ee5\u5b9e\u73b0\u6807\u51c6\u5316\u7684\u6587\u4ef6\u7ec4\u7ec7\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u6309\u5468\u671f\u5408\u5e76\u6574\u4e2a catalog\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import pandas as pd\n\n# \u5c06\u6240\u6709\u6587\u4ef6\u6309\u5929\uff081-day\uff09\u5408\u5e76\ncatalog.consolidate_catalog_by_period(\n    period=pd.Timedelta(days=1)\n)\n\n# \u5728\u65f6\u95f4\u8303\u56f4\u5185\u6309\u5c0f\u65f6\uff081-hour\uff09\u5408\u5e76\ncatalog.consolidate_catalog_by_period(\n    period=pd.Timedelta(hours=1),\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-02T00:00:00Z"\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u6309\u5468\u671f\u5408\u5e76\u7279\u5b9a\u6570\u636e\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5c06 quote \u6570\u636e\u6309 4 \u5c0f\u65f6\u5408\u5e76\ncatalog.consolidate_data_by_period(\n    data_cls=QuoteTick,\n    period=pd.Timedelta(hours=4)\n)\n\n# \u5c06\u7279\u5b9a\u6807\u7684\u6309 30 \u5206\u949f\u5408\u5e76\ncatalog.consolidate_data_by_period(\n    data_cls=TradeTick,\n    identifier="EUR/USD.SIM",\n    period=pd.Timedelta(minutes=30),\n    start="2024-01-01",\n    end="2024-01-31"\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u5220\u9664\u6570\u636e\u533a\u95f4delete-data-range",children:"\u5220\u9664\u6570\u636e\u533a\u95f4\uff08Delete data range\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u5220\u9664\u6307\u5b9a\u65f6\u95f4\u8303\u56f4\u5185\u7684\u67d0\u7c7b\u6570\u636e\u6216\u67d0\u4e2a\u6807\u7684\u7684\u6570\u636e\u3002\u6b64\u64cd\u4f5c\u4f1a\u6c38\u4e45\u5220\u9664\u6570\u636e\uff0c\u5e76\u4f1a\u667a\u80fd\u5904\u7406\u4e0e\u4e4b\u76f8\u4ea4\u7684\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5220\u9664\u6574\u4e2a catalog \u7684\u65f6\u95f4\u533a\u95f4\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5220\u9664\u6574\u4e2a catalog \u4e2d\u67d0\u4e00\u65f6\u95f4\u6bb5\u7684\u6570\u636e\ncatalog.delete_catalog_range(\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-02T00:00:00Z"\n)\n\n# \u5220\u9664\u4ece\u5f00\u59cb\u5230\u6307\u5b9a\u65f6\u95f4\u70b9\u4e4b\u524d\u7684\u6240\u6709\u6570\u636e\ncatalog.delete_catalog_range(end="2024-01-01T00:00:00Z")\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u5220\u9664\u7279\u5b9a\u6570\u636e\u7c7b\u578b\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# \u5220\u9664\u7279\u5b9a\u6807\u7684\u7684\u6240\u6709 quote tick \u6570\u636e\ncatalog.delete_data_range(\n    data_cls=QuoteTick,\n    identifier="BTC/USD.BINANCE"\n)\n\n# \u5220\u9664\u67d0\u65f6\u95f4\u6bb5\u5185\u7684 trade \u6570\u636e\ncatalog.delete_data_range(\n    data_cls=TradeTick,\n    identifier="EUR/USD.SIM",\n    start="2024-01-01T00:00:00Z",\n    end="2024-01-31T23:59:59Z"\n)\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"\u5220\u9664\u64cd\u4f5c\u4f1a\u6c38\u4e45\u79fb\u9664\u6570\u636e\uff0c\u4e14\u4e0d\u53ef\u64a4\u9500\u3002\u4e0e\u5220\u9664\u533a\u95f4\u90e8\u5206\u91cd\u53e0\u7684\u6587\u4ef6\u4f1a\u88ab\u62c6\u5206\u4ee5\u4fdd\u7559\u533a\u95f4\u5916\u7684\u6570\u636e\u3002"})}),"\n",(0,l.jsx)(n.h3,{id:"feather-\u6d41\u5f0f\u4e0e\u683c\u5f0f\u8f6c\u6362",children:"Feather \u6d41\u5f0f\u4e0e\u683c\u5f0f\u8f6c\u6362"}),"\n",(0,l.jsx)(n.p,{children:"catalog \u652f\u6301\u5728\u56de\u6d4b\u671f\u95f4\u5c06\u6570\u636e\u6d41\u5f0f\u5199\u5165\u4e34\u65f6\u7684 feather \u6587\u4ef6\uff0c\u968f\u540e\u518d\u8f6c\u6362\u4e3a\u9ad8\u6548\u67e5\u8be2\u7684 parquet \u683c\u5f0f\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a\u671f\u6743 Greeks \u7684\u6d41\u5f0f\u5904\u7406"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from option_trader.greeks import GreeksData\nfrom nautilus_trader.persistence.config import StreamingConfig\n\n# 1. \u4e3a\u81ea\u5b9a\u4e49\u6570\u636e\u914d\u7f6e\u6d41\u5f0f\u5199\u5165\nstreaming = StreamingConfig(\n    catalog_path=catalog.path,\n    include_types=[GreeksData],\n    flush_interval_ms=1000,\n)\n\n# 2. \u542f\u7528\u6d41\u5f0f\u5199\u5165\u540e\u8fd0\u884c\u56de\u6d4b\nengine_config = BacktestEngineConfig(streaming=streaming)\nresults = node.run()\n\n# 3. \u5c06\u6d41\u5f0f\u6570\u636e\u8f6c\u6362\u4e3a\u6301\u4e45\u5316\u7684 catalog \u6570\u636e\ncatalog.convert_stream_to_data(\n    results[0].instance_id,\n    GreeksData,\n)\n\n# 4. \u67e5\u8be2\u5df2\u8f6c\u6362\u7684\u6570\u636e\ngreeks_data = catalog.query(\n    data_cls=GreeksData,\n    start="2024-01-01",\n    end="2024-01-31",\n    where="delta > 0.5",\n)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"catalog-\u6458\u8981",children:"Catalog \u6458\u8981"}),"\n",(0,l.jsx)(n.p,{children:"NautilusTrader \u7684\u6570\u636e catalog \u63d0\u4f9b\u4e86\u5168\u9762\u7684\u5e02\u573a\u6570\u636e\u7ba1\u7406\u80fd\u529b\uff1a"}),"\n",(0,l.jsx)(n.p,{children:"\u6838\u5fc3\u7279\u6027\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u53cc\u540e\u7aef\uff08Dual Backend\uff09\uff1aRust \u6027\u80fd + Python \u7684\u7075\u6d3b\u6027\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u591a\u534f\u8bae\u652f\u6301\uff08Multi-Protocol\uff09\uff1a\u672c\u5730\u3001S3\u3001GCS\u3001Azure \u7b49\u5b58\u50a8\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u6d41\u5f0f\u5904\u7406\uff08Streaming\uff09\uff1aFeather \u2192 Parquet \u7684\u8f6c\u6362\u7ba1\u9053\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8fd0\u7ef4\u64cd\u4f5c\uff1a\u91cd\u7f6e\u6587\u4ef6\u540d\u3001\u5408\u5e76\u6570\u636e\u3001\u6309\u5468\u671f\u7ec4\u7ec7\u6587\u4ef6\u7b49\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e3b\u8981\u4f7f\u7528\u573a\u666f\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u56de\u6d4b\uff08Backtesting\uff09\uff1a\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"BacktestDataConfig"})," \u9884\u914d\u7f6e\u6570\u636e\u52a0\u8f7d\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5b9e\u76d8\uff08Live Trading\uff09\uff1a\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"DataCatalogConfig"})," \u6309\u9700\u8bbf\u95ee\u5386\u53f2\u6570\u636e\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u7ef4\u62a4\uff08Maintenance\uff09\uff1a\u6587\u4ef6\u5408\u5e76\u4e0e\u7ec4\u7ec7\u64cd\u4f5c\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u7814\u7a76\uff08Research\uff09\uff1a\u4ea4\u4e92\u5f0f\u67e5\u8be2\u4e0e\u5206\u6790\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6570\u636e\u8fc1\u79fbdata-migrations",children:"\u6570\u636e\u8fc1\u79fb\uff08Data migrations\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["NautilusTrader \u5b9a\u4e49\u4e86\u4e00\u4e2a\u5185\u90e8\u6570\u636e\u683c\u5f0f\uff0c\u4f4d\u4e8e ",(0,l.jsx)(n.code,{children:"nautilus_model"})," crate \u4e2d\u3002\n\u8fd9\u4e9b\u6a21\u578b\u4f1a\u5e8f\u5217\u5316\u4e3a Arrow record batch\uff0c\u5e76\u5199\u5165 Parquet \u6587\u4ef6\u3002\n\u4f7f\u7528 Nautilus \u683c\u5f0f\u7684 Parquet \u6587\u4ef6\u80fd\u8ba9 Nautilus \u7684\u56de\u6d4b\u8fbe\u5230\u6700\u4f73\u6548\u7387\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u4e0d\u8fc7\uff0c\u5728\u4e0d\u540c\u7684\u7cbe\u5ea6\u6a21\u5f0f\uff08precision modes\uff09\u6216\u67b6\u6784\uff08schema\uff09\u53d8\u66f4\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u6a21\u578b\u53ef\u80fd\u5177\u6709\u4e00\u5b9a\u6311\u6218\u6027\u3002\n\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u6211\u4eec\u7684\u5de5\u5177\u6765\u5904\u7406\u6570\u636e\u8fc1\u79fb\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u8fc1\u79fb\u5de5\u5177",children:"\u8fc1\u79fb\u5de5\u5177"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"nautilus_persistence"})," crate \u63d0\u4f9b\u4e24\u4e2a\u5173\u952e\u7684\u5b9e\u7528\u5de5\u5177\uff1a"]}),"\n",(0,l.jsx)(n.h4,{id:"to_json",children:(0,l.jsx)(n.code,{children:"to_json"})}),"\n",(0,l.jsx)(n.p,{children:"\u5c06 Parquet \u6587\u4ef6\u8f6c\u6362\u4e3a JSON\uff0c\u540c\u65f6\u4fdd\u7559\u5143\u6570\u636e\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4f1a\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<input>.json"}),"\uff1a\u5305\u542b\u53cd\u5e8f\u5217\u5316\u540e\u7684\u6570\u636e"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<input>.metadata.json"}),"\uff1a\u5305\u542b schema \u5143\u6570\u636e\u548c row group \u914d\u7f6e"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u6839\u636e\u6587\u4ef6\u540d\u81ea\u52a8\u68c0\u6d4b\u6570\u636e\u7c7b\u578b\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OrderBookDelta"}),'\uff08\u6587\u4ef6\u540d\u5305\u542b "deltas" \u6216 "order_book_delta"\uff09']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"QuoteTick"}),'\uff08\u6587\u4ef6\u540d\u5305\u542b "quotes" \u6216 "quote_tick"\uff09']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"TradeTick"}),'\uff08\u6587\u4ef6\u540d\u5305\u542b "trades" \u6216 "trade_tick"\uff09']}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Bar"}),'\uff08\u6587\u4ef6\u540d\u5305\u542b "bars"\uff09']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"to_parquet",children:(0,l.jsx)(n.code,{children:"to_parquet"})}),"\n",(0,l.jsx)(n.p,{children:"\u5c06 JSON \u8f6c\u6362\u56de Parquet\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u540c\u65f6\u8bfb\u53d6\u6570\u636e JSON \u4e0e\u5143\u6570\u636e JSON \u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4fdd\u7559\u539f\u59cb\u5143\u6570\u636e\u4e2d\u7684 row group \u5927\u5c0f\u914d\u7f6e\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528 ZSTD \u538b\u7f29\u3002"}),"\n",(0,l.jsxs)(n.li,{children:["\u751f\u6210 ",(0,l.jsx)(n.code,{children:"<input>.parquet"})," \u6587\u4ef6\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u8fc1\u79fb\u6d41\u7a0b",children:"\u8fc1\u79fb\u6d41\u7a0b"}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u8fc1\u79fb\u793a\u4f8b\u4f7f\u7528 trade \u6570\u636e\uff08\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u7684\u8fc1\u79fb\u65b9\u6cd5\u7c7b\u4f3c\uff09\u3002\n\u6240\u6709\u547d\u4ee4\u5e94\u5728 ",(0,l.jsx)(n.code,{children:"persistence"})," crate \u6839\u76ee\u5f55\u4e0b\u8fd0\u884c\u3002"]}),"\n",(0,l.jsx)(n.h4,{id:"\u4ece\u6807\u51c6\u7cbe\u5ea664-bit\u8fc1\u79fb\u5230\u9ad8\u7cbe\u5ea6128-bit",children:"\u4ece\u6807\u51c6\u7cbe\u5ea6\uff0864-bit\uff09\u8fc1\u79fb\u5230\u9ad8\u7cbe\u5ea6\uff08128-bit\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u8be5\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u5c06\u6807\u51c6\u7cbe\u5ea6 schema \u7684 Parquet \u8f6c\u6362\u4e3a\u9ad8\u7cbe\u5ea6 schema \u7684\u8fc7\u7a0b\u3002"}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["\u5982\u679c\u4f60\u8981\u8fc1\u79fb\u7684 catalog \u4f7f\u7528\u4e86 Arrow \u7684 ",(0,l.jsx)(n.code,{children:"Int64"})," \u4e0e ",(0,l.jsx)(n.code,{children:"UInt64"})," \u7c7b\u578b\u6765\u8868\u793a\u4ef7\u683c\u548c\u6570\u91cf\uff0c\u8bf7\u5728\u7f16\u8bd1\u751f\u6210\u521d\u59cb JSON \u4e4b\u524d\uff0c\u53c2\u8003\u63d0\u4ea4\u8bb0\u5f55 ",(0,l.jsx)(n.a,{href:"https://github.com/nautechsystems/nautilus_trader/commit/e284162cf27a3222115aeb5d10d599c8cf09cf50",children:"e284162"}),"\u3002"]})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. \u5c06\u6807\u51c6\u7cbe\u5ea6 Parquet \u8f6c\u4e3a JSON\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cargo run --bin to_json trades.parquet\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u6b64\u64cd\u4f5c\u4f1a\u751f\u6210 ",(0,l.jsx)(n.code,{children:"trades.json"})," \u4e0e ",(0,l.jsx)(n.code,{children:"trades.metadata.json"})," \u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. \u5c06 JSON \u8f6c\u56de\u9ad8\u7cbe\u5ea6 Parquet\uff1a"})}),"\n",(0,l.jsxs)(n.p,{children:["\u6dfb\u52a0 ",(0,l.jsx)(n.code,{children:"--features high-precision"})," \u6807\u5fd7\u4ee5\u5199\u5165\u9ad8\u7cbe\u5ea6\uff08128-bit\uff09schema \u7684 Parquet\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cargo run --features high-precision --bin to_parquet trades.json\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u8be5\u547d\u4ee4\u4f1a\u751f\u6210\u4f7f\u7528\u9ad8\u7cbe\u5ea6 schema \u7684 ",(0,l.jsx)(n.code,{children:"trades.parquet"})," \u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.h4,{id:"\u8fc1\u79fb-schema-\u7248\u672c",children:"\u8fc1\u79fb schema \u7248\u672c"}),"\n",(0,l.jsx)(n.p,{children:"\u8be5\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5c06\u6570\u636e\u4ece\u4e00\u4e2a schema \u7248\u672c\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u7248\u672c\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. \u5c06\u65e7 schema \u7684 Parquet \u8f6c\u4e3a JSON\uff1a"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679c\u6e90\u6570\u636e\u4f7f\u7528\u4e86\u9ad8\u7cbe\u5ea6 schema\uff08128-bit\uff09\uff0c\u8bf7\u6dfb\u52a0 ",(0,l.jsx)(n.code,{children:"--features high-precision"})," \u6807\u5fd7\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cargo run --bin to_json trades.parquet\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u6b64\u64cd\u4f5c\u4f1a\u751f\u6210 ",(0,l.jsx)(n.code,{children:"trades.json"})," \u4e0e ",(0,l.jsx)(n.code,{children:"trades.metadata.json"})," \u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. \u5207\u6362\u5230\u65b0\u7684 schema \u7248\u672c\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git checkout <new-version>\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3. \u5c06 JSON \u8f6c\u56de\u65b0 schema \u7684 Parquet\uff1a"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cargo run --features high-precision --bin to_parquet trades.json\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u6b64\u547d\u4ee4\u4f1a\u751f\u6210\u4f7f\u7528\u65b0 schema \u7684 ",(0,l.jsx)(n.code,{children:"trades.parquet"})," \u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5148\u7528\u5c0f\u6570\u636e\u96c6\u6d4b\u8bd5\u8fc1\u79fb\u6d41\u7a0b\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u4fdd\u7559\u539f\u59cb\u6587\u4ef6\u7684\u5907\u4efd\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8fc1\u79fb\u540e\u9a8c\u8bc1\u6570\u636e\u5b8c\u6574\u6027\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5728\u5c06\u53d8\u66f4\u5e94\u7528\u5230\u751f\u4ea7\u6570\u636e\u4e4b\u524d\uff0c\u5148\u5728\u9884\u53d1\u5e03\uff08staging\uff09\u73af\u5883\u4e2d\u6f14\u7ec3\u8fc1\u79fb\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u6570\u636ecustom-data",children:"\u81ea\u5b9a\u4e49\u6570\u636e\uff08Custom data\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u7531\u4e8e Nautilus \u8bbe\u8ba1\u7684\u6a21\u5757\u5316\u7279\u6027\uff0c\u7cfb\u7edf\u53ef\u4ee5\u642d\u5efa\u975e\u5e38\u7075\u6d3b\u7684\u6570\u636e\u6d41\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u7684\u7528\u6237\u6570\u636e\u7c7b\u578b\u3002\u672c\u8282\u8ba8\u8bba\u51e0\u79cd\u5e38\u89c1\u7528\u4f8b\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u8981\u5728 Nautilus \u4e2d\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff0c\u9996\u5148\u9700\u8981\u7ee7\u627f\u81ea\u57fa\u7c7b ",(0,l.jsx)(n.code,{children:"Data"}),"\u3002"]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["\u7531\u4e8e ",(0,l.jsx)(n.code,{children:"Data"})," \u672c\u8eab\u4e0d\u4fdd\u5b58\u72b6\u6001\uff0c\u56e0\u6b64\u5e76\u975e\u4e25\u683c\u8981\u6c42\u5728\u5b50\u7c7b\u4e2d\u8c03\u7528 ",(0,l.jsx)(n.code,{children:"super().__init__()"}),"\u3002"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.core import Data\n\n\nclass MyDataPoint(Data):\n    """\n    \u8fd9\u662f\u4e00\u4e2a\u793a\u4f8b\u7684\u7528\u6237\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\uff0c\u7ee7\u627f\u81ea\u57fa\u7c7b `Data`\u3002\n\n    \u7c7b\u4e2d\u5b57\u6bb5 `label`, `x`, `y`, `z` \u53ea\u662f\u793a\u4f8b\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4efb\u610f\u6269\u5c55\u3002\n    """\n\n    def __init__(\n        self,\n        label: str,\n        x: int,\n        y: int,\n        z: int,\n        ts_event: int,\n        ts_init: int,\n    ) -> None:\n        self.label = label\n        self.x = x\n        self.y = y\n        self.z = z\n        self._ts_event = ts_event\n        self._ts_init = ts_init\n\n    @property\n    def ts_event(self) -> int:\n        """\n        \u4e8b\u4ef6\u53d1\u751f\u65f6\u7684 UNIX \u65f6\u95f4\u6233\uff08\u7eb3\u79d2\uff09\u3002\n\n        \u8fd4\u56de\u503c\u7c7b\u578b\uff1aint\n        """\n        return self._ts_event\n\n    @property\n    def ts_init(self) -> int:\n        """\n        \u5bf9\u8c61\u521d\u59cb\u5316\u65f6\u7684 UNIX \u65f6\u95f4\u6233\uff08\u7eb3\u79d2\uff09\u3002\n\n        \u8fd4\u56de\u503c\u7c7b\u578b\uff1aint\n        """\n        return self._ts_init\n\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Data"})," \u62bd\u8c61\u57fa\u7c7b\u5728\u7cfb\u7edf\u5185\u90e8\u4f5c\u4e3a\u5951\u7ea6\uff08contract\uff09\uff0c\u8981\u6c42\u6240\u6709\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4e24\u4e2a\u5c5e\u6027\uff1a",(0,l.jsx)(n.code,{children:"ts_event"})," \u4e0e ",(0,l.jsx)(n.code,{children:"ts_init"}),"\uff0c\u5206\u522b\u8868\u793a\u4e8b\u4ef6\u53d1\u751f\u65f6\u95f4\u548c\u5bf9\u8c61\u521d\u59cb\u5316\u65f6\u95f4\uff0c\u5747\u4e3a UNIX \u7eb3\u79d2\u65f6\u95f4\u6233\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u63a8\u8350\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u5c06 ",(0,l.jsx)(n.code,{children:"ts_event"})," \u4e0e ",(0,l.jsx)(n.code,{children:"ts_init"})," \u5b58\u50a8\u5230\u79c1\u6709\u5b57\u6bb5\uff0c\u518d\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"@property"})," \u66b4\u9732\uff08\u5982\u4e0a\u793a\u4f8b\uff0c\u90e8\u5206 docstring \u4ece ",(0,l.jsx)(n.code,{children:"Data"})," \u57fa\u7c7b\u4e2d\u6458\u6284\uff09\u3002"]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["\u8fd9\u4e9b\u65f6\u95f4\u6233\u80fd\u786e\u4fdd Nautilus \u5728\u56de\u6d4b\u4e2d\u5bf9\u6570\u636e\u6d41\u6309\u5355\u8c03\u9012\u589e\u7684 ",(0,l.jsx)(n.code,{children:"ts_init"}),"\uff08UNIX \u7eb3\u79d2\uff09\u6b63\u786e\u6392\u5e8f\u3002"]})}),"\n",(0,l.jsxs)(n.p,{children:["\u6709\u4e86\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u540e\uff0c\u4f60\u53ef\u4ee5\u5728\u56de\u6d4b\u6216\u5b9e\u76d8\u4e2d\u4f7f\u7528\u5b83\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a adapter \u5c06\u5916\u90e8\u6570\u636e\u89e3\u6790\u4e3a\u8be5\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5e76\u53d1\u9001\u56de ",(0,l.jsx)(n.code,{children:"DataEngine"})," \u4f9b\u8ba2\u9605\u8005\u6d88\u8d39\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u5728 actor/strategy \u4e2d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 message bus \u53d1\u5e03\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'self.publish_data(\n    DataType(MyDataPoint, metadata={"some_optional_category": 1}),\n    MyDataPoint(...),\n)\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"metadata"})," \u5b57\u5178\u662f\u53ef\u9009\u7684\uff0c\u7528\u4e8e\u5728 topic \u540d\u79f0\u4e2d\u6dfb\u52a0\u66f4\u7ec6\u7c92\u5ea6\u7684\u4fe1\u606f\u4ee5\u533a\u5206\u6570\u636e\u6d41\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u4f60\u4e5f\u53ef\u4ee5\u5c06\u989d\u5916\u7684 metadata \u4fe1\u606f\u4f20\u5165 ",(0,l.jsx)(n.code,{children:"BacktestDataConfig"}),"\uff0c\u4ee5\u4fbf\u5728\u56de\u6d4b\u914d\u7f6e\u4e2d\u63cf\u8ff0\u81ea\u5b9a\u4e49\u6570\u636e\u5bf9\u8c61\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.config import BacktestDataConfig\n\ndata_config = BacktestDataConfig(\n    catalog_path=str(catalog.path),\n    data_cls=MyDataPoint,\n    metadata={"some_optional_category": 1},\n)\n'})}),"\n",(0,l.jsx)(n.p,{children:"\u5728 actor/strategy \u4e2d\u8ba2\u9605\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u65b9\u5f0f\u793a\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'self.subscribe_data(\n    data_type=DataType(MyDataPoint,\n    metadata={"some_optional_category": 1}),\n    client_id=ClientId("MY_ADAPTER"),\n)\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"client_id"})," \u7528\u4e8e\u5c06\u6570\u636e\u8ba2\u9605\u8def\u7531\u5230\u7279\u5b9a\u5ba2\u6237\u7aef\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u8ba2\u9605\u540e\uff0cactor/strategy \u4f1a\u5c06\u63a5\u6536\u5230\u7684 ",(0,l.jsx)(n.code,{children:"MyDataPoint"})," \u5bf9\u8c61\u4f20\u5165 ",(0,l.jsx)(n.code,{children:"on_data"})," \u65b9\u6cd5\uff0c\u4f60\u9700\u8981\u5728\u65b9\u6cd5\u4e2d\u505a\u7c7b\u578b\u5224\u65ad\u5e76\u5904\u7406\u5bf9\u5e94\u6570\u636e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"def on_data(self, data: Data) -> None:\n    # \u5148\u5224\u65ad\u6570\u636e\u7c7b\u578b\n    if isinstance(data, MyDataPoint):\n        # \u5bf9\u6570\u636e\u6267\u884c\u5904\u7406\u903b\u8f91\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u53d1\u5e03\u4e0e\u63a5\u6536\u4fe1\u53f7\u6570\u636esignals",children:"\u53d1\u5e03\u4e0e\u63a5\u6536\u4fe1\u53f7\u6570\u636e\uff08signals\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0b\u9762\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5728 actor \u6216 strategy \u4e2d\u901a\u8fc7 ",(0,l.jsx)(n.code,{children:"MessageBus"})," \u53d1\u5e03\u4e0e\u63a5\u6536\u4fe1\u53f7\u6570\u636e\uff08signal\uff09\u3002\n\u4fe1\u53f7\u662f\u4e00\u79cd\u81ea\u52a8\u751f\u6210\u7684\u81ea\u5b9a\u4e49\u6570\u636e\uff0c\u5176\u540d\u79f0\u5bf9\u5e94\u5355\u4e00\u7684\u57fa\u7840\u7c7b\u578b\u503c\uff08str\u3001float\u3001int\u3001bool \u6216 bytes\uff09\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'self.publish_signal("signal_name", value, ts_event)\nself.subscribe_signal("signal_name")\n\ndef on_signal(self, signal):\n    print("Signal", data)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u671f\u6743-greeks-\u793a\u4f8b",children:"\u671f\u6743 Greeks \u793a\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["\u672c\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u4e3a\u671f\u6743 Greeks\uff08\u4f8b\u5982 delta\uff09\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u3002\u6309\u7167\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u3001\u8ba2\u9605\u3001\u53d1\u5e03\u5e76\u5c06\u5176\u5b58\u5165 ",(0,l.jsx)(n.code,{children:"Cache"})," \u6216 ",(0,l.jsx)(n.code,{children:"ParquetDataCatalog"})," \u4ee5\u4fbf\u9ad8\u6548\u68c0\u7d22\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import msgspec\nfrom nautilus_trader.core import Data\nfrom nautilus_trader.core.datetime import unix_nanos_to_iso8601\nfrom nautilus_trader.model import DataType\nfrom nautilus_trader.serialization.base import register_serializable_type\nfrom nautilus_trader.serialization.arrow.serializer import register_arrow\nimport pyarrow as pa\n\nfrom nautilus_trader.model import InstrumentId\nfrom nautilus_trader.core.datetime import dt_to_unix_nanos, unix_nanos_to_dt, format_iso8601\n\n\nclass GreeksData(Data):\n    def __init__(\n        self, instrument_id: InstrumentId = InstrumentId.from_str("ES.GLBX"),\n        ts_event: int = 0,\n        ts_init: int = 0,\n        delta: float = 0.0,\n    ) -> None:\n        self.instrument_id = instrument_id\n        self._ts_event = ts_event\n        self._ts_init = ts_init\n        self.delta = delta\n\n    def __repr__(self):\n        return (f"GreeksData(ts_init={unix_nanos_to_iso8601(self._ts_init)}, instrument_id={self.instrument_id}, delta={self.delta:.2f})")\n\n    @property\n    def ts_event(self):\n        return self._ts_event\n\n    @property\n    def ts_init(self):\n        return self._ts_init\n\n    def to_dict(self):\n        return {\n            "instrument_id": self.instrument_id.value,\n            "ts_event": self._ts_event,\n            "ts_init": self._ts_init,\n            "delta": self.delta,\n        }\n\n    @classmethod\n    def from_dict(cls, data: dict):\n        return GreeksData(InstrumentId.from_str(data["instrument_id"]), data["ts_event"], data["ts_init"], data["delta"])\n\n    def to_bytes(self):\n        return msgspec.msgpack.encode(self.to_dict())\n\n    @classmethod\n    def from_bytes(cls, data: bytes):\n        return cls.from_dict(msgspec.msgpack.decode(data))\n\n    def to_catalog(self):\n        return pa.RecordBatch.from_pylist([self.to_dict()], schema=GreeksData.schema())\n\n    @classmethod\n    def from_catalog(cls, table: pa.Table):\n        return [GreeksData.from_dict(d) for d in table.to_pylist()]\n\n    @classmethod\n    def schema(cls):\n        return pa.schema(\n            {\n                "instrument_id": pa.string(),\n                "ts_event": pa.int64(),\n                "ts_init": pa.int64(),\n                "delta": pa.float64(),\n            }\n        )\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u53d1\u5e03\u4e0e\u63a5\u6536\u6570\u636e\u793a\u4f8b",children:"\u53d1\u5e03\u4e0e\u63a5\u6536\u6570\u636e\u793a\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0b\u9762\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u5728 actor \u6216 strategy \u4e2d\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"MessageBus"})," \u53d1\u5e03\u4e0e\u63a5\u6536\u6570\u636e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'register_serializable_type(GreeksData, GreeksData.to_dict, GreeksData.from_dict)\n\ndef publish_greeks(self, greeks_data: GreeksData):\n    self.publish_data(DataType(GreeksData), greeks_data)\n\ndef subscribe_to_greeks(self):\n    self.subscribe_data(DataType(GreeksData))\n\ndef on_data(self, data):\n    if isinstance(GreeksData):\n        print("Data", data)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u4f7f\u7528-cache-\u5199\u5165\u4e0e\u8bfb\u53d6\u6570\u636e",children:"\u4f7f\u7528 Cache \u5199\u5165\u4e0e\u8bfb\u53d6\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:["\u4e0b\u9762\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u5728 actor \u6216 strategy \u4e2d\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"Cache"})," \u5199\u5165\u548c\u8bfb\u53d6\u6570\u636e\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def greeks_key(instrument_id: InstrumentId):\n    return f"{instrument_id}_GREEKS"\n\ndef cache_greeks(self, greeks_data: GreeksData):\n    self.cache.add(greeks_key(greeks_data.instrument_id), greeks_data.to_bytes())\n\ndef greeks_from_cache(self, instrument_id: InstrumentId):\n    return GreeksData.from_bytes(self.cache.get(greeks_key(instrument_id)))\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u4f7f\u7528-catalog-\u5199\u5165\u4e0e\u8bfb\u53d6\u81ea\u5b9a\u4e49\u6570\u636e",children:"\u4f7f\u7528 catalog \u5199\u5165\u4e0e\u8bfb\u53d6\u81ea\u5b9a\u4e49\u6570\u636e"}),"\n",(0,l.jsxs)(n.p,{children:["\u5c06\u81ea\u5b9a\u4e49\u6570\u636e\u6d41\u5f0f\u5199\u5165 feather\uff0c\u6216\u5199\u4e3a catalog \u4e2d\u7684 parquet \u6587\u4ef6\uff08\u9700\u5148\u8c03\u7528 ",(0,l.jsx)(n.code,{children:"register_arrow"}),"\uff09\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"register_arrow(GreeksData, GreeksData.schema(), GreeksData.to_catalog, GreeksData.from_catalog)\n\nfrom nautilus_trader.persistence.catalog import ParquetDataCatalog\ncatalog = ParquetDataCatalog('.')\n\ncatalog.write_data([GreeksData()])\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u81ea\u52a8\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b",children:"\u81ea\u52a8\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"@customdataclass"})," \u88c5\u9970\u5668\u53ef\u7528\u4e8e\u81ea\u52a8\u751f\u6210\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\uff0c\u5e76\u4e3a\u4e0a\u9762\u63d0\u5230\u7684\u529f\u80fd\u63d0\u4f9b\u9ed8\u8ba4\u5b9e\u73b0\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u65b9\u6cd5\u5747\u53ef\u6309\u9700\u91cd\u5199\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528\u793a\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.model.custom import customdataclass\n\n\n@customdataclass\nclass GreeksTestData(Data):\n    instrument_id: InstrumentId = InstrumentId.from_str("ES.GLBX")\n    delta: float = 0.0\n\n\nGreeksTestData(\n    instrument_id=InstrumentId.from_str("CL.GLBX"),\n    delta=1000.0,\n    ts_event=1,\n    ts_init=2,\n)\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u7c7b\u578b\u5b58\u6839stub",children:"\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u7c7b\u578b\u5b58\u6839\uff08stub\uff09"}),"\n",(0,l.jsxs)(n.p,{children:["\u4e3a\u63d0\u9ad8\u5f00\u53d1\u4fbf\u6377\u6027\u5e76\u6539\u5584 IDE \u7684\u4ee3\u7801\u63d0\u793a\uff0c\u53ef\u4ee5\u4e3a\u52a8\u6001\u751f\u6210\u6784\u9020\u51fd\u6570\u7684\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u521b\u5efa\u4e00\u4e2a ",(0,l.jsx)(n.code,{children:".pyi"})," \u7c7b\u578b\u5b58\u6839\u6587\u4ef6\uff0c\u63d0\u4f9b\u6b63\u786e\u7684\u6784\u9020\u5668\u7b7e\u540d\u548c\u5c5e\u6027\u7c7b\u578b\u63d0\u793a\u3002\n\u8fd9\u6837\u53ef\u4ee5\u8ba9 IDE \u8bc6\u522b\u5e76\u4e3a\u7c7b\u7684\u65b9\u6cd5\u548c\u5c5e\u6027\u63d0\u4f9b\u8865\u5168\u5efa\u8bae\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u4f8b\u5982\uff0c\u82e5\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u5b9a\u4e49\u5728 ",(0,l.jsx)(n.code,{children:"greeks.py"})," \u4e2d\uff0c\u53ef\u521b\u5efa\u5bf9\u5e94\u7684 ",(0,l.jsx)(n.code,{children:"greeks.pyi"})," \u6587\u4ef6\uff0c\u5305\u542b\u5982\u4e0b\u6784\u9020\u51fd\u6570\u7b7e\u540d\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from nautilus_trader.core import Data\nfrom nautilus_trader.model import InstrumentId\n\n\nclass GreeksData(Data):\n    instrument_id: InstrumentId\n    delta: float\n\n    def __init__(\n        self,\n        ts_event: int = 0,\n        ts_init: int = 0,\n        instrument_id: InstrumentId = InstrumentId.from_str("ES.GLBX"),\n        delta: float = 0.0,\n  ) -> GreeksData: ...\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},9087:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var r=s(6363);const l={},t=r.createContext(l);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);
<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/live" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Live Trading | NautilusTrader 文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nautilus.aloen.to/concepts/live"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Live Trading | NautilusTrader 文档"><meta data-rh="true" name="description" content="Live trading in NautilusTrader enables traders to deploy their backtested strategies in a real-time"><meta data-rh="true" property="og:description" content="Live trading in NautilusTrader enables traders to deploy their backtested strategies in a real-time"><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://nautilus.aloen.to/concepts/live"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/concepts/live" hreflang="zh"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/concepts/live" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Concepts","item":"https://nautilus.aloen.to/concepts/"},{"@type":"ListItem","position":2,"name":"Live Trading","item":"https://nautilus.aloen.to/concepts/live"}]}</script><link rel="stylesheet" href="/assets/css/styles.33db920f.css">
<script src="/assets/js/runtime~main.f907132b.js" defer="defer"></script>
<script src="/assets/js/main.3352860b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent__uWo" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--light_cjoX"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--dark_jZId"></div><b class="navbar__title text--truncate">NautilusTrader</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/api_reference/">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Aloento/NautilusTraderDoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_RWFU colorModeToggle_sA1q"><button class="clean-btn toggleButton_qjfc toggleButtonDisabled_cpNp" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX lightToggleIcon_UYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX darkToggleIcon_i1s2"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX systemToggleIcon_yIQx"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_PsjF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_jk42"><div class="docsWrapper_KWBO"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_XpKL" type="button"></button><div class="docRoot_joIP"><aside class="theme-doc-sidebar-container docSidebarContainer_DOen"><div class="sidebarViewport_j7YP"><div class="sidebar_nPgc"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_MTDt"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/api_reference/"><span title="Python API" class="categoryLinkLabel_XKxb">Python API</span></a><button aria-label="展开侧边栏分类 &#x27;Python API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist menu__link--active" href="/concepts/"><span title="Concepts" class="categoryLinkLabel_XKxb">Concepts</span></a><button aria-label="折叠侧边栏分类 &#x27;Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/actors"><span title="Actors" class="linkLabel_CNtA">Actors</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/adapters"><span title="Adapters" class="linkLabel_CNtA">Adapters</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/architecture"><span title="Architecture" class="linkLabel_CNtA">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/backtesting"><span title="Backtesting" class="linkLabel_CNtA">Backtesting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/cache"><span title="Cache" class="linkLabel_CNtA">Cache</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/data"><span title="Data" class="linkLabel_CNtA">Data</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/execution"><span title="Execution" class="linkLabel_CNtA">Execution</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/instruments"><span title="Instruments" class="linkLabel_CNtA">Instruments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/concepts/live"><span title="Live Trading" class="linkLabel_CNtA">Live Trading</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/logging"><span title="Logging" class="linkLabel_CNtA">Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/message_bus"><span title="Message Bus" class="linkLabel_CNtA">Message Bus</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/orders"><span title="Orders" class="linkLabel_CNtA">Orders</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/overview"><span title="Overview" class="linkLabel_CNtA">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/portfolio"><span title="Portfolio" class="linkLabel_CNtA">Portfolio</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/positions"><span title="Positions" class="linkLabel_CNtA">Positions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/reports"><span title="Reports" class="linkLabel_CNtA">Reports</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/strategies"><span title="Strategies" class="linkLabel_CNtA">Strategies</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/developer_guide/"><span title="Developer Guide" class="categoryLinkLabel_XKxb">Developer Guide</span></a><button aria-label="展开侧边栏分类 &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/getting_started/"><span title="入门" class="categoryLinkLabel_XKxb">入门</span></a><button aria-label="展开侧边栏分类 &#x27;入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/integrations/"><span title="集成" class="categoryLinkLabel_XKxb">集成</span></a><button aria-label="展开侧边栏分类 &#x27;集成&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/tutorials/"><span title="教程" class="categoryLinkLabel_XKxb">教程</span></a><button aria-label="展开侧边栏分类 &#x27;教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_bw1l"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PIhC"><div class="docItemContainer_pFw3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HRKZ" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sX5c"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/concepts/"><span>Concepts</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Live Trading</span></li></ul></nav><div class="tocCollapsible_DhUt theme-doc-toc-mobile tocMobile_Izjv"><button type="button" class="clean-btn tocCollapsibleButton_eYR5">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Live Trading</h1></header>
<p>Live trading in NautilusTrader enables traders to deploy their backtested strategies in a real-time
trading environment with no code changes. This seamless transition from backtesting to live trading
is a core feature of the platform, ensuring consistency and reliability. However, there are
key differences to be aware of between backtesting and live trading.</p>
<p>This guide provides an overview of the key aspects of live trading.</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Platform differences</div><div class="admonitionContent_Vfkp"><p>Windows signal handling differs from Unix-like systems. If you are running on Windows, please read
the note on <a href="#windows-signal-handling">Windows signal handling</a> for guidance on graceful shutdown
behavior and Ctrl+C (SIGINT) support.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Configuration的直接链接" title="Configuration的直接链接" translate="no">​</a></h2>
<p>When operating a live trading system, configuring your execution engine and strategies properly is
essential for ensuring reliability, accuracy, and performance. The following is an overview of the
key concepts and settings involved for live configuration.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="tradingnodeconfig"><code>TradingNodeConfig</code><a href="#tradingnodeconfig" class="hash-link" aria-label="tradingnodeconfig的直接链接" title="tradingnodeconfig的直接链接" translate="no">​</a></h3>
<p>The main configuration class for live trading systems is <code>TradingNodeConfig</code>,
which inherits from <code>NautilusKernelConfig</code> and provides live-specific config options:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TradingNodeConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNodeConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trader_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;MyTrader-001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Component configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CacheConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message_bus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MessageBusConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_engine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">LiveDataEngineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    risk_engine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">LiveRiskEngineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec_engine</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">LiveExecEngineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    portfolio</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">PortfolioConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Client configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceDataClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceExecClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="core-configuration-parameters">Core configuration parameters<a href="#core-configuration-parameters" class="hash-link" aria-label="Core configuration parameters的直接链接" title="Core configuration parameters的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>trader_id</code></td><td>&quot;TRADER-001&quot;</td><td>Unique trader identifier (name-tag format).</td></tr><tr><td><code>instance_id</code></td><td><code>None</code></td><td>Optional unique instance identifier.</td></tr><tr><td><code>timeout_connection</code></td><td>30.0</td><td>Connection timeout in seconds.</td></tr><tr><td><code>timeout_reconciliation</code></td><td>10.0</td><td>Reconciliation timeout in seconds.</td></tr><tr><td><code>timeout_portfolio</code></td><td>10.0</td><td>Portfolio initialization timeout.</td></tr><tr><td><code>timeout_disconnection</code></td><td>10.0</td><td>Disconnection timeout.</td></tr><tr><td><code>timeout_post_stop</code></td><td>5.0</td><td>Post-stop cleanup timeout.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="cache-database-configuration">Cache database configuration<a href="#cache-database-configuration" class="hash-link" aria-label="Cache database configuration的直接链接" title="Cache database configuration的直接链接" translate="no">​</a></h4>
<p>Configure data persistence with a backing database:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> CacheConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabaseConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cache_config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CacheConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DatabaseConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">6379</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;nautilus&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;pass&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    encoding</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;msgpack&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># or &quot;json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamps_as_iso8601</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    buffer_interval_ms</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flush_on_start</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="messagebus-configuration">MessageBus configuration<a href="#messagebus-configuration" class="hash-link" aria-label="MessageBus configuration的直接链接" title="MessageBus configuration的直接链接" translate="no">​</a></h4>
<p>Configure message routing and external streaming:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MessageBusConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DatabaseConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message_bus_config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> MessageBusConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    database</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">DatabaseConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timestamps_as_iso8601</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_instance_id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    types_filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">QuoteTick</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TradeTick</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Filter specific message types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stream_per_topic</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autotrim_mins</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Automatic message trimming</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    heartbeat_interval_secs</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="multi-venue-configuration">Multi-venue configuration<a href="#multi-venue-configuration" class="hash-link" aria-label="Multi-venue configuration的直接链接" title="Multi-venue configuration的直接链接" translate="no">​</a></h3>
<p>Live trading systems often connect to multiple venues. Here&#x27;s an example of configuring both spot and futures markets for Binance:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TradingNodeConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trader_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;MultiVenue-001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Multiple data clients for different market types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE_SPOT&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceDataClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            account_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BinanceAccountType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SPOT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            testnet</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE_FUTURES&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceDataClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            account_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BinanceAccountType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">USDT_FUTURES</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            testnet</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Corresponding execution clients</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exec_clients</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE_SPOT&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceExecClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            account_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BinanceAccountType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SPOT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            testnet</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;BINANCE_FUTURES&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BinanceExecClientConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            account_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BinanceAccountType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">USDT_FUTURES</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            testnet</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="executionengine-configuration">ExecutionEngine configuration<a href="#executionengine-configuration" class="hash-link" aria-label="ExecutionEngine configuration的直接链接" title="ExecutionEngine configuration的直接链接" translate="no">​</a></h3>
<p>The <code>LiveExecEngineConfig</code> sets up the live execution engine, managing order processing, execution events, and reconciliation with trading venues.
The following outlines the main configuration options.</p>
<p>By configuring these parameters thoughtfully, you can ensure that your trading system operates efficiently,
handles orders correctly, and remains resilient in the face of potential issues, such as lost events or conflicting data/information.</p>
<p>For full details see the <code>LiveExecEngineConfig</code> <a href="/api_reference/config#class-liveexecengineconfig">API Reference</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="reconciliation">Reconciliation<a href="#reconciliation" class="hash-link" aria-label="Reconciliation的直接链接" title="Reconciliation的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Ensures that the system state remains consistent with the trading venue by recovering any missed events, such as order and position status updates.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>reconciliation</code></td><td>True</td><td>Activates reconciliation at startup, aligning the system&#x27;s internal state with the venue&#x27;s state.</td></tr><tr><td><code>reconciliation_lookback_mins</code></td><td>None</td><td>Specifies how far back (in minutes) the system requests past events to reconcile uncached state.</td></tr><tr><td><code>reconciliation_instrument_ids</code></td><td>None</td><td>An include list of specific instrument IDs to consider for reconciliation.</td></tr><tr><td><code>filtered_client_order_ids</code></td><td>None</td><td>A list of client order IDs to filter from reconciliation (useful when the venue holds duplicates).</td></tr></tbody></table>
<p>See <a href="/concepts/execution#execution-reconciliation">Execution reconciliation</a> for additional background.</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="order-filtering">Order filtering<a href="#order-filtering" class="hash-link" aria-label="Order filtering的直接链接" title="Order filtering的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Manages which order events and reports should be processed by the system to avoid conflicts with other trading nodes and unnecessary data handling.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>filter_unclaimed_external_orders</code></td><td>False</td><td>Filters out unclaimed external orders to prevent irrelevant orders from impacting the strategy.</td></tr><tr><td><code>filter_position_reports</code></td><td>False</td><td>Filters out position status reports, useful when multiple nodes trade the same account to avoid conflicts.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="continuous-reconciliation">Continuous reconciliation<a href="#continuous-reconciliation" class="hash-link" aria-label="Continuous reconciliation的直接链接" title="Continuous reconciliation的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Maintains accurate execution state through a continuous reconciliation loop that runs <em>after</em> startup reconciliation completes, this loop:</p>
<ul>
<li>(1) Monitors in-flight orders for delays exceeding a configured threshold.</li>
<li>(2) Reconciles open orders with the venue at configurable intervals.</li>
<li>(3) Audits internal <em>own</em> order books against the venue&#x27;s public books.</li>
</ul>
<p><strong>Startup sequence</strong>: The continuous reconciliation loop waits for startup reconciliation to complete before beginning periodic checks. This prevents race conditions where continuous checks might interfere with the initial state reconciliation. The <code>reconciliation_startup_delay_secs</code> parameter applies an additional delay <em>after</em> startup reconciliation completes.</p>
<p>If an order&#x27;s status cannot be reconciled after exhausting all retries, the engine resolves the order as follows:</p>
<p><strong>In-flight order timeout resolution</strong> (when venue doesn&#x27;t respond after max retries):</p>
<table><thead><tr><th>Current status</th><th>Resolved to</th><th>Rationale</th></tr></thead><tbody><tr><td><code>SUBMITTED</code></td><td><code>REJECTED</code></td><td>No confirmation received from venue.</td></tr><tr><td><code>PENDING_UPDATE</code></td><td><code>CANCELED</code></td><td>Modification remains unacknowledged.</td></tr><tr><td><code>PENDING_CANCEL</code></td><td><code>CANCELED</code></td><td>Venue never confirmed the cancellation.</td></tr></tbody></table>
<p><strong>Order consistency checks</strong> (when cache state differs from venue state):</p>
<table><thead><tr><th>Cache status</th><th>Venue status</th><th>Resolution</th><th>Rationale</th></tr></thead><tbody><tr><td><code>ACCEPTED</code></td><td>Not found</td><td><code>REJECTED</code></td><td>Order doesn&#x27;t exist at venue, likely was never successfully placed.</td></tr><tr><td><code>ACCEPTED</code></td><td><code>CANCELED</code></td><td><code>CANCELED</code></td><td>Venue canceled the order (user action or venue-initiated).</td></tr><tr><td><code>ACCEPTED</code></td><td><code>EXPIRED</code></td><td><code>EXPIRED</code></td><td>Order reached GTD expiration at venue.</td></tr><tr><td><code>ACCEPTED</code></td><td><code>REJECTED</code></td><td><code>REJECTED</code></td><td>Venue rejected after initial acceptance (rare but possible).</td></tr><tr><td><code>PARTIALLY_FILLED</code></td><td><code>CANCELED</code></td><td><code>CANCELED</code></td><td>Order canceled at venue with fills preserved.</td></tr><tr><td><code>PARTIALLY_FILLED</code></td><td>Not found</td><td><code>CANCELED</code></td><td>Order doesn&#x27;t exist but had fills (reconciles fill history).</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p><strong>Important reconciliation caveats:</strong></p><ul>
<li><strong>&quot;Not found&quot; resolutions</strong>: These are only performed in full-history mode (<code>open_check_open_only=False</code>). In open-only mode (<code>open_check_open_only=True</code>, the default), these checks are intentionally skipped. This is because open-only mode uses venue-specific &quot;open orders&quot; endpoints which exclude closed orders by design, making it impossible to distinguish between genuinely missing orders and recently closed ones.</li>
<li><strong>Recent order protection</strong>: The engine skips reconciliation actions for orders with last event timestamp within the <code>open_check_threshold_ms</code> window (default 5 seconds). This prevents false positives from race conditions where orders may still be processing at the venue.</li>
<li><strong>Targeted query safeguard</strong>: Before marking orders as <code>REJECTED</code> or <code>CANCELED</code> when &quot;not found&quot;, the engine attempts a targeted single-order query to the venue. This helps prevent false negatives due to bulk query limitations or timing delays.</li>
<li><strong><code>FILLED</code> orders</strong>: When a <code>FILLED</code> order is &quot;not found&quot; at the venue, this is considered normal behavior (venues often don&#x27;t track completed orders) and is ignored without generating warnings.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="retry-coordination-and-lookback-behavior">Retry coordination and lookback behavior<a href="#retry-coordination-and-lookback-behavior" class="hash-link" aria-label="Retry coordination and lookback behavior的直接链接" title="Retry coordination and lookback behavior的直接链接" translate="no">​</a></h4>
<p>The execution engine reuses a single retry counter (<code>_recon_check_retries</code>) for both the inflight loop (bounded by <code>inflight_check_retries</code>) and the open-order loop (bounded by <code>open_check_missing_retries</code>). This shared budget ensures the stricter limit wins and prevents duplicate venue queries for the same order state.</p>
<p>When the open-order loop exhausts its retries, the engine issues one targeted <code>GenerateOrderStatusReport</code> probe before applying a terminal state. If the venue returns the order, reconciliation proceeds and the retry counter resets automatically.</p>
<p><strong>Single-order query protection</strong>: To prevent rate limit exhaustion when many orders need individual queries, the engine limits single-order queries per reconciliation cycle via <code>max_single_order_queries_per_cycle</code> (default: 10). When this limit is reached, remaining orders are deferred to the next cycle. Additionally, the engine adds a configurable delay (<code>single_order_query_delay_ms</code>, default: 100ms) between single-order queries to further prevent rate limiting. This ensures the system can handle scenarios where bulk queries fail for hundreds of orders without overwhelming the venue API.</p>
<p>Orders that age beyond <code>open_check_lookback_mins</code> rely on this targeted probe. Keep the lookback generous for venues with short history windows, and consider increasing <code>open_check_threshold_ms</code> if venue timestamps lag the local clock so recently updated orders are not marked missing prematurely.</p>
<p>This ensures the trading node maintains a consistent execution state even under unreliable conditions.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>inflight_check_interval_ms</code></td><td>2,000 ms</td><td>Determines how frequently the system checks in-flight order status. Set to 0 to disable.</td></tr><tr><td><code>inflight_check_threshold_ms</code></td><td>5,000 ms</td><td>Sets the time threshold after which an in-flight order triggers a venue status check. Adjust if colocated to avoid race conditions.</td></tr><tr><td><code>inflight_check_retries</code></td><td>5 retries</td><td>Specifies the number of retry attempts the engine will make to verify the status of an in-flight order with the venue, should the initial attempt fail.</td></tr><tr><td><code>open_check_interval_secs</code></td><td>None</td><td>Determines how frequently (in seconds) open orders are checked at the venue. Set to None or 0.0 to disable. Recommended: 5-10 seconds, considering API rate limits.</td></tr><tr><td><code>open_check_open_only</code></td><td>True</td><td>When enabled, only open orders are requested during checks; if disabled, full order history is fetched (resource-intensive).</td></tr><tr><td><code>open_check_lookback_mins</code></td><td>60 min</td><td>Lookback window (minutes) for order status polling during continuous reconciliation. Only orders modified within this window are considered.</td></tr><tr><td><code>open_check_threshold_ms</code></td><td>5,000 ms</td><td>Minimum time since the order&#x27;s last cached event before open-order checks act on venue discrepancies (missing, mismatched status, etc.).</td></tr><tr><td><code>open_check_missing_retries</code></td><td>5 retries</td><td>Maximum retries before resolving an order that is open in cache but not found at venue. Prevents false positives from race conditions.</td></tr><tr><td><code>max_single_order_queries_per_cycle</code></td><td>10</td><td>Maximum number of single-order queries per reconciliation cycle. Prevents rate limit exhaustion when many orders fail bulk query checks.</td></tr><tr><td><code>single_order_query_delay_ms</code></td><td>100 ms</td><td>Delay (milliseconds) between single-order queries to prevent rate limit exhaustion.</td></tr><tr><td><code>reconciliation_startup_delay_secs</code></td><td>10.0 s</td><td>Additional delay (seconds) applied <em>after</em> startup reconciliation completes before starting continuous reconciliation loop. Provides time for additional system stabilization.</td></tr><tr><td><code>own_books_audit_interval_secs</code></td><td>None</td><td>Sets the interval (in seconds) between audits of own order books against public ones. Verifies synchronization and logs errors for inconsistencies.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p><strong>Important configuration guidelines:</strong></p><ul>
<li><strong><code>open_check_lookback_mins</code></strong>: Do not reduce below 60 minutes. This lookback window must be sufficiently generous for your venue&#x27;s order history retention. Setting it too short can trigger false &quot;missing order&quot; resolutions even with built-in safeguards, as orders may appear missing when they&#x27;re simply outside the query window.</li>
<li><strong><code>reconciliation_startup_delay_secs</code></strong>: Do not reduce below 10 seconds for production systems. This delay is applied <em>after</em> startup reconciliation completes, allowing additional time for system stabilization before continuous reconciliation checks begin. This prevents continuous checks from starting immediately after startup reconciliation finishes.</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="additional-options">Additional options<a href="#additional-options" class="hash-link" aria-label="Additional options的直接链接" title="Additional options的直接链接" translate="no">​</a></h4>
<p>The following additional options provide further control over execution behavior:</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>generate_missing_orders</code></td><td>True</td><td>If <code>LIMIT</code> order events will be generated during reconciliation to align position discrepancies. These orders use the strategy ID <code>INTERNAL-DIFF</code> and calculate precise prices to achieve target average positions.</td></tr><tr><td><code>snapshot_orders</code></td><td>False</td><td>If order snapshots should be taken on order events.</td></tr><tr><td><code>snapshot_positions</code></td><td>False</td><td>If position snapshots should be taken on position events.</td></tr><tr><td><code>snapshot_positions_interval_secs</code></td><td>None</td><td>The interval (seconds) between position snapshots when enabled.</td></tr><tr><td><code>debug</code></td><td>False</td><td>Enable debug mode for additional execution logging.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="memory-management">Memory management<a href="#memory-management" class="hash-link" aria-label="Memory management的直接链接" title="Memory management的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Periodically purges closed orders, closed positions, and account events from the in-memory cache to optimize resource usage and performance during extended / HFT operations.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>purge_closed_orders_interval_mins</code></td><td>None</td><td>Sets how frequently (in minutes) closed orders are purged from memory. Recommended: 10-15 minutes. Does not affect database records.</td></tr><tr><td><code>purge_closed_orders_buffer_mins</code></td><td>None</td><td>Specifies how long (in minutes) an order must have been closed before purging. Recommended: 60 minutes to ensure processes complete.</td></tr><tr><td><code>purge_closed_positions_interval_mins</code></td><td>None</td><td>Sets how frequently (in minutes) closed positions are purged from memory. Recommended: 10-15 minutes. Does not affect database records.</td></tr><tr><td><code>purge_closed_positions_buffer_mins</code></td><td>None</td><td>Specifies how long (in minutes) a position must have been closed before purging. Recommended: 60 minutes to ensure processes complete.</td></tr><tr><td><code>purge_account_events_interval_mins</code></td><td>None</td><td>Sets how frequently (in minutes) account events are purged from memory. Recommended: 10-15 minutes. Does not affect database records.</td></tr><tr><td><code>purge_account_events_lookback_mins</code></td><td>None</td><td>Specifies how long (in minutes) an account event must have occurred before purging. Recommended: 60 minutes.</td></tr><tr><td><code>purge_from_database</code></td><td>False</td><td>If enabled, purge operations will also delete data from the backing database (Redis/PostgreSQL), not just memory. <strong>Use with caution</strong>.</td></tr></tbody></table>
<p>By configuring these memory management settings appropriately, you can prevent memory usage from growing
indefinitely during long-running / HFT sessions while ensuring that recently closed orders, closed positions, and account events
remain available in memory for any ongoing operations that might require them.</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="queue-management">Queue management<a href="#queue-management" class="hash-link" aria-label="Queue management的直接链接" title="Queue management的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Handles the internal buffering of order events to ensure smooth processing and to prevent system resource overloads.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>qsize</code></td><td>100,000</td><td>Sets the size of internal queue buffers, managing the flow of data within the engine.</td></tr><tr><td><code>graceful_shutdown_on_exception</code></td><td>False</td><td>If the system should perform a graceful shutdown when an unexpected exception occurs during message queue processing (does not include user actor/strategy exceptions).</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="strategy-configuration">Strategy configuration<a href="#strategy-configuration" class="hash-link" aria-label="Strategy configuration的直接链接" title="Strategy configuration的直接链接" translate="no">​</a></h3>
<p>The <code>StrategyConfig</code> class outlines the configuration for trading strategies, ensuring that each strategy operates with the correct parameters and manages orders effectively.
For a complete parameter list see the <code>StrategyConfig</code> <a href="/api_reference/config#class-strategyconfig">API Reference</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="identification">Identification<a href="#identification" class="hash-link" aria-label="Identification的直接链接" title="Identification的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Provides unique identifiers for each strategy to prevent conflicts and ensure proper tracking of orders.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>strategy_id</code></td><td>None</td><td>A unique ID for the strategy, ensuring it can be distinctly identified.</td></tr><tr><td><code>order_id_tag</code></td><td>None</td><td>A unique tag for the strategy&#x27;s orders, differentiating them from multiple strategies.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="order-management">Order management<a href="#order-management" class="hash-link" aria-label="Order management的直接链接" title="Order management的直接链接" translate="no">​</a></h4>
<p><strong>Purpose</strong>: Controls strategy-level order handling including position-ID processing, claiming relevant external orders, automating contingent order logic (OUO/OCO), and tracking GTD expirations.</p>
<table><thead><tr><th>Setting</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>oms_type</code></td><td>None</td><td>Specifies the <a href="/concepts/execution#oms-configuration">OMS type</a>, for position ID handling and order processing flow.</td></tr><tr><td><code>use_uuid_client_order_ids</code></td><td>False</td><td>If UUID4&#x27;s should be used for client order ID values (required for some venues such as Coinbase Intx).</td></tr><tr><td><code>external_order_claims</code></td><td>None</td><td>Lists instrument IDs for external orders the strategy should claim, aiding accurate order management.</td></tr><tr><td><code>manage_contingent_orders</code></td><td>False</td><td>If enabled, the strategy automatically manages contingent orders, reducing manual intervention.</td></tr><tr><td><code>manage_gtd_expiry</code></td><td>False</td><td>If enabled, the strategy manages GTD expirations, ensuring orders remain active as intended.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="windows-signal-handling">Windows signal handling<a href="#windows-signal-handling" class="hash-link" aria-label="Windows signal handling的直接链接" title="Windows signal handling的直接链接" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>Windows: asyncio event loops do not implement <code>loop.add_signal_handler</code>. As a result, the legacy
<code>TradingNode</code> does not receive OS signals via asyncio on Windows. Use Ctrl+C (SIGINT) handling or
programmatic shutdown; SIGTERM parity is not expected on Windows.</p></div></div>
<p>On Windows, asyncio event loops do not implement <code>loop.add_signal_handler</code>, so Unix-style signal
integration is unavailable. As a result, <code>TradingNode</code> does not receive OS signals via asyncio on
Windows and will not gracefully stop unless you intervene.</p>
<p>Recommended approaches on Windows:</p>
<ul>
<li>Wrap <code>run</code> with a <code>try/except KeyboardInterrupt</code> and call <code>node.stop()</code> then <code>node.dispose()</code>.
Ctrl+C on Windows raises <code>KeyboardInterrupt</code> in the main thread, providing a clean teardown path.</li>
<li>Alternatively, publish a <code>ShutdownSystem</code> command programmatically (or call <code>shutdown_system(...)</code>
from an actor/component) to trigger the same shutdown path.</li>
</ul>
<p>The “inflight check loop task still pending” message is consistent with the lack of asyncio signal
handling on Windows, i.e., the normal graceful shutdown path isn’t being triggered.</p>
<p>This is tracked as an enhancement request to support Ctrl+C (SIGINT) for Windows in the legacy path.
<a href="https://github.com/nautechsystems/nautilus_trader/issues/2785" target="_blank" rel="noopener noreferrer">https://github.com/nautechsystems/nautilus_trader/issues/2785</a>.</p>
<p>For the new v2 system, <code>LiveNode</code> already supports Ctrl+C cleanly via <code>tokio::signal::ctrl_c()</code> and a
Python SIGINT bridge, so the runner stops and tasks are shut down cleanly.</p>
<p>Example pattern for Windows:</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> KeyboardInterrupt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="execution-reconciliation">Execution reconciliation<a href="#execution-reconciliation" class="hash-link" aria-label="Execution reconciliation的直接链接" title="Execution reconciliation的直接链接" translate="no">​</a></h2>
<p>Execution reconciliation is the process of aligning the external state of reality for orders and positions
(both closed and open) with the systems internal state built from events.
This process is primarily applicable to live trading, which is why only the <code>LiveExecutionEngine</code> has reconciliation capability.</p>
<p>There are two main scenarios for reconciliation:</p>
<ul>
<li><strong>Previous cached execution state</strong>: Where cached execution state exists, information from reports is used to generate missing events to align the state.</li>
<li><strong>No previous cached execution state</strong>: Where there is no cached state, all orders and positions that exist externally are generated from scratch.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p><strong>Best practice</strong>: Persist all execution events to the cache database to minimize reliance on venue history, ensuring full recovery even with short lookback windows.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="reconciliation-configuration">Reconciliation configuration<a href="#reconciliation-configuration" class="hash-link" aria-label="Reconciliation configuration的直接链接" title="Reconciliation configuration的直接链接" translate="no">​</a></h3>
<p>Unless reconciliation is disabled by setting the <code>reconciliation</code> configuration parameter to false,
the execution engine will perform the execution reconciliation procedure for each venue.
Additionally, you can specify the lookback window for reconciliation by setting the <code>reconciliation_lookback_mins</code> configuration parameter.</p>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p>We recommend not setting a specific <code>reconciliation_lookback_mins</code>. This allows the requests made
to the venues to utilize the maximum execution history available for reconciliation.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>If executions have occurred prior to the lookback window, any necessary events will be generated to align
internal and external states. This may result in some information loss that could have been avoided with a longer lookback window.</p><p>Additionally, some venues may filter or drop execution information under certain conditions, resulting
in further information loss. This would not occur if all events were persisted in the cache database.</p></div></div>
<p>Each strategy can also be configured to claim any external orders for an instrument ID generated during
reconciliation using the <code>external_order_claims</code> configuration parameter.
This is useful in situations where, at system start, there is no cached state or it is desirable for
a strategy to resume its operations and continue managing existing open orders for a specific instrument.</p>
<p>Orders generated with strategy ID <code>INTERNAL-DIFF</code> during position reconciliation are internal to the engine and cannot be claimed via <code>external_order_claims</code>.
They exist solely to align position discrepancies and should not be managed by user strategies.</p>
<p>For a full list of live trading options see the <code>LiveExecEngineConfig</code> <a href="/api_reference/config#class-liveexecengineconfig">API Reference</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="reconciliation-procedure">Reconciliation procedure<a href="#reconciliation-procedure" class="hash-link" aria-label="Reconciliation procedure的直接链接" title="Reconciliation procedure的直接链接" translate="no">​</a></h3>
<p>The reconciliation procedure is standardized for all adapter execution clients and uses the following
methods to produce an execution mass status:</p>
<ul>
<li><code>generate_order_status_reports</code></li>
<li><code>generate_fill_reports</code></li>
<li><code>generate_position_status_reports</code></li>
</ul>
<p>The system state is then reconciled with the reports, which represent external &quot;reality&quot;:</p>
<ul>
<li><strong>Duplicate Check</strong>:<!-- -->
<ul>
<li>Check for duplicate client order IDs and trade IDs.</li>
<li>Duplicate client order IDs cause reconciliation failure to prevent state corruption.</li>
</ul>
</li>
<li><strong>Order Reconciliation</strong>:<!-- -->
<ul>
<li>Generate and apply events necessary to update orders from any cached state to the current state.</li>
<li>If any trade reports are missing, inferred <code>OrderFilled</code> events are generated.</li>
<li>If any client order ID is not recognized or an order report lacks a client order ID, external order events are generated.</li>
<li>Fill report data consistency is verified using tolerance-based comparisons for price and commission differences.</li>
</ul>
</li>
<li><strong>Position Reconciliation</strong>:<!-- -->
<ul>
<li>Ensure the net position per instrument matches the position reports returned from the venue using instrument precision handling.</li>
<li>If the position state resulting from order reconciliation does not match the external state, external order events will be generated to resolve discrepancies.</li>
<li>When <code>generate_missing_orders</code> is enabled (default: True), orders are generated with strategy ID <code>INTERNAL-DIFF</code> to align position discrepancies discovered during reconciliation.</li>
<li>A hierarchical price determination strategy ensures reconciliation can proceed even with limited data:<!-- -->
<ol>
<li><strong>Calculated reconciliation price</strong> (preferred): Uses the reconciliation price function to achieve target average positions</li>
<li><strong>Market mid-price</strong>: Falls back to current bid-ask midpoint if reconciliation price cannot be calculated</li>
<li><strong>Current position average</strong>: Uses existing position average price if no market data is available</li>
<li><strong>MARKET order</strong> (last resort): When no price information exists (no positions, no market data), a MARKET order is generated</li>
</ol>
</li>
<li>LIMIT orders are used when a price can be determined (cases 1-3), ensuring accurate PnL calculations</li>
<li>MARKET orders are only used as a last resort when starting fresh with no available pricing data</li>
<li>Zero quantity differences after precision rounding are handled gracefully.</li>
</ul>
</li>
<li><strong>Exception Handling</strong>:<!-- -->
<ul>
<li>Individual adapter failures do not abort the entire reconciliation process.</li>
<li>Missing order status reports are handled gracefully when fill reports arrive first.</li>
</ul>
</li>
</ul>
<p>If reconciliation fails, the system will not continue to start, and an error will be logged.</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="common-reconciliation-scenarios">Common reconciliation scenarios<a href="#common-reconciliation-scenarios" class="hash-link" aria-label="Common reconciliation scenarios的直接链接" title="Common reconciliation scenarios的直接链接" translate="no">​</a></h3>
<p>The scenarios below are split between startup reconciliation (mass status) and runtime/continuous checks (in-flight order checks, open-order polls, and own-books audits).</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="startup-reconciliation">Startup reconciliation<a href="#startup-reconciliation" class="hash-link" aria-label="Startup reconciliation的直接链接" title="Startup reconciliation的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Scenario</th><th>Description</th><th>System behavior</th></tr></thead><tbody><tr><td><strong>Order state discrepancy</strong></td><td>Local order state differs from venue (e.g., local shows <code>SUBMITTED</code>, venue shows <code>REJECTED</code>).</td><td>Updates local order to match venue state and emits missing events.</td></tr><tr><td><strong>Missed fills</strong></td><td>Venue fills an order but the engine misses the fill event.</td><td>Generates missing <code>OrderFilled</code> events.</td></tr><tr><td><strong>Multiple fills</strong></td><td>Order has multiple partial fills, some missed by the engine.</td><td>Reconstructs complete fill history from venue reports.</td></tr><tr><td><strong>External orders</strong></td><td>Orders exist on venue but not in local cache (placed externally or from another system).</td><td>Creates orders from venue reports; tags them <code>EXTERNAL</code>.</td></tr><tr><td><strong>Partially filled then canceled</strong></td><td>Order partially filled then canceled by venue.</td><td>Updates order state to <code>CANCELED</code> while preserving fill history.</td></tr><tr><td><strong>Different fill data</strong></td><td>Venue reports different fill price/commission than cached.</td><td>Preserves cached fill data; logs discrepancies from reports.</td></tr><tr><td><strong>Filtered orders</strong></td><td>Orders marked for filtering via configuration.</td><td>Skips reconciliation based on <code>filtered_client_order_ids</code> or instrument filters.</td></tr><tr><td><strong>Duplicate client order IDs</strong></td><td>Multiple orders with same client order ID in venue reports.</td><td>Reconciliation fails to prevent state corruption.</td></tr><tr><td><strong>Position quantity mismatch (long)</strong></td><td>Internal long position differs from external (e.g., internal: 100, external: 150).</td><td>Generates BUY LIMIT order with calculated price when <code>generate_missing_orders=True</code>.</td></tr><tr><td><strong>Position quantity mismatch (short)</strong></td><td>Internal short position differs from external (e.g., internal: -100, external: -150).</td><td>Generates SELL LIMIT order with calculated price when <code>generate_missing_orders=True</code>.</td></tr><tr><td><strong>Position reduction</strong></td><td>External position smaller than internal (e.g., internal: 150 long, external: 100 long).</td><td>Generates opposite side LIMIT order with calculated price to reduce position.</td></tr><tr><td><strong>Position side flip</strong></td><td>Internal position opposite of external (e.g., internal: 100 long, external: 50 short).</td><td>Generates LIMIT order with calculated price to close internal and open external position.</td></tr><tr><td><strong>INTERNAL-DIFF orders</strong></td><td>Position reconciliation orders with strategy ID &quot;INTERNAL-DIFF&quot;.</td><td>Never filtered, regardless of <code>filter_unclaimed_external_orders</code>.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="runtimecontinuous-checks">Runtime/continuous checks<a href="#runtimecontinuous-checks" class="hash-link" aria-label="Runtime/continuous checks的直接链接" title="Runtime/continuous checks的直接链接" translate="no">​</a></h4>
<table><thead><tr><th>Scenario</th><th>Description</th><th>System behavior</th></tr></thead><tbody><tr><td><strong>In-flight order timeout</strong></td><td>In-flight order remains unconfirmed beyond threshold.</td><td>After <code>inflight_check_retries</code>, resolves to <code>REJECTED</code> to maintain consistent state.</td></tr><tr><td><strong>Open orders check discrepancy</strong></td><td>Periodic open-orders poll detects a state change at the venue.</td><td>At <code>open_check_interval_secs</code>, confirms status (respecting <code>open_check_open_only</code>) and applies transitions if changed.</td></tr><tr><td><strong>Own books audit mismatch</strong></td><td>Own order books diverge from venue public books.</td><td>At <code>own_books_audit_interval_secs</code>, audits and logs inconsistencies for investigation.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="common-reconciliation-issues">Common reconciliation issues<a href="#common-reconciliation-issues" class="hash-link" aria-label="Common reconciliation issues的直接链接" title="Common reconciliation issues的直接链接" translate="no">​</a></h3>
<ul>
<li><strong>Missing trade reports</strong>: Some venues filter out older trades, causing incomplete reconciliation. Increase <code>reconciliation_lookback_mins</code> or ensure all events are cached locally.</li>
<li><strong>Position mismatches</strong>: If external orders predate the lookback window, positions may not align. Flatten the account before restarting the system to reset state.</li>
<li><strong>Duplicate order IDs</strong>: Duplicate client order IDs in mass status reports will cause reconciliation failure. Ensure venue data integrity or contact support.</li>
<li><strong>Precision differences</strong>: Small decimal differences in position quantities are handled automatically using instrument precision, but large discrepancies may indicate missing orders.</li>
<li><strong>Out-of-order reports</strong>: Fill reports arriving before order status reports are deferred until order state is available.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_lEzE alert alert--success"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_Vfkp"><p>For persistent reconciliation issues, consider dropping cached state or flattening accounts before system restart.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/concepts/live.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_F7ru" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_GNoA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/concepts/instruments"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Instruments</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/concepts/logging"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Logging</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pg_n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#tradingnodeconfig" class="table-of-contents__link toc-highlight"><code>TradingNodeConfig</code></a></li><li><a href="#multi-venue-configuration" class="table-of-contents__link toc-highlight">Multi-venue configuration</a></li><li><a href="#executionengine-configuration" class="table-of-contents__link toc-highlight">ExecutionEngine configuration</a></li><li><a href="#strategy-configuration" class="table-of-contents__link toc-highlight">Strategy configuration</a></li><li><a href="#windows-signal-handling" class="table-of-contents__link toc-highlight">Windows signal handling</a></li></ul></li><li><a href="#execution-reconciliation" class="table-of-contents__link toc-highlight">Execution reconciliation</a><ul><li><a href="#reconciliation-configuration" class="table-of-contents__link toc-highlight">Reconciliation configuration</a></li><li><a href="#reconciliation-procedure" class="table-of-contents__link toc-highlight">Reconciliation procedure</a></li><li><a href="#common-reconciliation-scenarios" class="table-of-contents__link toc-highlight">Common reconciliation scenarios</a></li><li><a href="#common-reconciliation-issues" class="table-of-contents__link toc-highlight">Common reconciliation issues</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 NautilusTrader Documentation.</div></div></div></footer></div>
</body>
</html>
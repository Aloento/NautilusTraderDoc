<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/orders" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">订单 | NautilusTrader 文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nautilus.aloen.to/concepts/orders"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="订单 | NautilusTrader 文档"><meta data-rh="true" name="description" content="本指南详细说明了平台支持的订单类型及每种类型可用的执行指令（execution instructions）。"><meta data-rh="true" property="og:description" content="本指南详细说明了平台支持的订单类型及每种类型可用的执行指令（execution instructions）。"><link data-rh="true" rel="icon" href="/logo.png"><link data-rh="true" rel="canonical" href="https://nautilus.aloen.to/concepts/orders"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/concepts/orders" hreflang="zh"><link data-rh="true" rel="alternate" href="https://nautilus.aloen.to/concepts/orders" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"概念","item":"https://nautilus.aloen.to/concepts/"},{"@type":"ListItem","position":2,"name":"订单","item":"https://nautilus.aloen.to/concepts/orders"}]}</script><link rel="stylesheet" href="/assets/css/styles.33db920f.css">
<script src="/assets/js/runtime~main.52992965.js" defer="defer"></script>
<script src="/assets/js/main.991b6fd5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent__uWo" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--light_cjoX"><img src="/logo.png" alt="NautilusTrader Logo" class="themedComponent_WkLn themedComponent--dark_jZId"></div><b class="navbar__title text--truncate">NautilusTrader</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/api_reference/">文档</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Aloento/NautilusTraderDoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_RWFU colorModeToggle_sA1q"><button class="clean-btn toggleButton_qjfc toggleButtonDisabled_cpNp" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX lightToggleIcon_UYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX darkToggleIcon_i1s2"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CetX systemToggleIcon_yIQx"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_PsjF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_jk42"><div class="docsWrapper_KWBO"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_XpKL" type="button"></button><div class="docRoot_joIP"><aside class="theme-doc-sidebar-container docSidebarContainer_DOen"><div class="sidebarViewport_j7YP"><div class="sidebar_nPgc"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_MTDt"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/api_reference/"><span title="Python API" class="categoryLinkLabel_XKxb">Python API</span></a><button aria-label="展开侧边栏分类 &#x27;Python API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist menu__link--active" href="/concepts/"><span title="概念" class="categoryLinkLabel_XKxb">概念</span></a><button aria-label="折叠侧边栏分类 &#x27;概念&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/actors"><span title="Actors" class="linkLabel_CNtA">Actors</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/adapters"><span title="适配器" class="linkLabel_CNtA">适配器</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/architecture"><span title="架构" class="linkLabel_CNtA">架构</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/backtesting"><span title="回测" class="linkLabel_CNtA">回测</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/cache"><span title="Cache" class="linkLabel_CNtA">Cache</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/data"><span title="数据" class="linkLabel_CNtA">数据</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/execution"><span title="执行" class="linkLabel_CNtA">执行</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/instruments"><span title="合约与交易品种" class="linkLabel_CNtA">合约与交易品种</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/live"><span title="Live 交易" class="linkLabel_CNtA">Live 交易</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/logging"><span title="日志" class="linkLabel_CNtA">日志</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/message_bus"><span title="消息总线" class="linkLabel_CNtA">消息总线</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/concepts/orders"><span title="订单" class="linkLabel_CNtA">订单</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/overview"><span title="概览" class="linkLabel_CNtA">概览</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/portfolio"><span title="投资组合" class="linkLabel_CNtA">投资组合</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/positions"><span title="持仓" class="linkLabel_CNtA">持仓</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/reports"><span title="报告" class="linkLabel_CNtA">报告</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/strategies"><span title="策略" class="linkLabel_CNtA">策略</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/developer_guide/"><span title="开发者指南" class="categoryLinkLabel_XKxb">开发者指南</span></a><button aria-label="展开侧边栏分类 &#x27;开发者指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/getting_started/"><span title="入门" class="categoryLinkLabel_XKxb">入门</span></a><button aria-label="展开侧边栏分类 &#x27;入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/integrations/"><span title="集成" class="categoryLinkLabel_XKxb">集成</span></a><button aria-label="展开侧边栏分类 &#x27;集成&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_GgI9 menu__link menu__link--sublist" href="/tutorials/"><span title="教程" class="categoryLinkLabel_XKxb">教程</span></a><button aria-label="展开侧边栏分类 &#x27;教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_bw1l"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_PIhC"><div class="docItemContainer_pFw3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HRKZ" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sX5c"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/concepts/"><span>概念</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">订单</span></li></ul></nav><div class="tocCollapsible_DhUt theme-doc-toc-mobile tocMobile_Izjv"><button type="button" class="clean-btn tocCollapsibleButton_eYR5">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>订单</h1></header>
<p>本指南详细说明了平台支持的订单类型及每种类型可用的执行指令（execution instructions）。</p>
<p>订单是任何算法交易策略的基础构件之一。NautilusTrader 支持从标准到高级的一整套订单类型与执行指令，尽可能暴露交易场所（venue）的功能，以便交易者可以定义精细的执行指令和应急措施，从而实现几乎任意的交易策略。</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="概述">概述<a href="#概述" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接" translate="no">​</a></h2>
<p>所有订单类型都源自两个基本类型：Market（市价）与 Limit（限价）订单。从流动性角度来看，它们互为对立：
Market 订单通过以最优可得价格立即成交来消耗流动性；而 Limit 订单则在指定价格挂单，提供流动性，直到被撮合。</p>
<p>平台支持的订单类型如下（使用相应的枚举值表示）：</p>
<ul>
<li><code>MARKET</code></li>
<li><code>LIMIT</code></li>
<li><code>STOP_MARKET</code></li>
<li><code>STOP_LIMIT</code></li>
<li><code>MARKET_TO_LIMIT</code></li>
<li><code>MARKET_IF_TOUCHED</code></li>
<li><code>LIMIT_IF_TOUCHED</code></li>
<li><code>TRAILING_STOP_MARKET</code></li>
<li><code>TRAILING_STOP_LIMIT</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>NautilusTrader 为多种订单类型和执行指令提供统一的 API，但并非所有交易场所都支持所有选项。
如果某个订单包含目标场所不支持的指令或选项，系统不会提交该不受支持的部分，而会记录清晰的错误日志（不再提交该指令）。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="术语">术语<a href="#术语" class="hash-link" aria-label="术语的直接链接" title="术语的直接链接" translate="no">​</a></h3>
<ul>
<li>如果订单类型为 <code>MARKET</code> 或以可被视为市价（marketable）的方式执行，则称该订单为 <strong>aggressive（主动）</strong>（即吃单）。</li>
<li>如果订单不可被立刻撮合（即提供流动性），则称为 <strong>passive（被动）</strong>。</li>
<li>如果订单在本地系统边界内处于以下三种非终态之一，则称为 <strong>active local（本地活跃）</strong>：<!-- -->
<ul>
<li><code>INITIALIZED</code></li>
<li><code>EMULATED</code></li>
<li><code>RELEASED</code></li>
</ul>
</li>
<li>当订单处于下列状态之一时，称为 <strong>in-flight（在途）</strong>：<!-- -->
<ul>
<li><code>SUBMITTED</code></li>
<li><code>PENDING_UPDATE</code></li>
<li><code>PENDING_CANCEL</code></li>
</ul>
</li>
<li>当订单处于下列（非终态）状态之一时，称为 <strong>open（未结）</strong>：<!-- -->
<ul>
<li><code>ACCEPTED</code></li>
<li><code>TRIGGERED</code></li>
<li><code>PENDING_UPDATE</code></li>
<li><code>PENDING_CANCEL</code></li>
<li><code>PARTIALLY_FILLED</code></li>
</ul>
</li>
<li>当订单处于下列（终态）状态之一时，称为 <strong>closed（已结）</strong>：<!-- -->
<ul>
<li><code>DENIED</code></li>
<li><code>REJECTED</code></li>
<li><code>CANCELED</code></li>
<li><code>EXPIRED</code></li>
<li><code>FILLED</code></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="执行指令execution-instructions">执行指令（Execution instructions）<a href="#执行指令execution-instructions" class="hash-link" aria-label="执行指令（Execution instructions）的直接链接" title="执行指令（Execution instructions）的直接链接" translate="no">​</a></h2>
<p>某些交易场所允许交易者在订单中指定处理与执行方式的条件或限制。下面简要汇总了常见的执行指令。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="有效期time-in-force">有效期（Time in force）<a href="#有效期time-in-force" class="hash-link" aria-label="有效期（Time in force）的直接链接" title="有效期（Time in force）的直接链接" translate="no">​</a></h3>
<p>订单的 time in force 指定了订单在多长时间内保持活跃，超出该时间未成交的剩余数量将被取消。</p>
<ul>
<li><code>GTC</code>（Good Till Cancel）：订单一直有效，直到被交易者或场所取消。</li>
<li><code>IOC</code>（Immediate or Cancel / Fill and Kill）：订单立即撮合，未成交部分被取消。</li>
<li><code>FOK</code>（Fill or Kill）：订单要么立即全部成交，要么全部撤销。</li>
<li><code>GTD</code>（Good Till Date）：订单在指定到期日期前保持有效。</li>
<li><code>DAY</code>（Good for session/day）：订单在当前交易日/交易时段结束前有效。</li>
<li><code>AT_THE_OPEN</code>（OPG）：订单仅在交易时段开盘时段有效。</li>
<li><code>AT_THE_CLOSE</code>：订单仅在收盘时段有效。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="到期时间expire-time">到期时间（Expire time）<a href="#到期时间expire-time" class="hash-link" aria-label="到期时间（Expire time）的直接链接" title="到期时间（Expire time）的直接链接" translate="no">​</a></h3>
<p>该指令通常与 <code>GTD</code> 一起使用，用于指定订单到期并从场所的订单簿（或订单管理系统）中移除的确切时间。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="仅挂单post-only">仅挂单（Post-only）<a href="#仅挂单post-only" class="hash-link" aria-label="仅挂单（Post-only）的直接链接" title="仅挂单（Post-only）的直接链接" translate="no">​</a></h3>
<p>标记为 <code>post_only</code> 的订单仅作为流动性提供者出现在限价簿中，不会成为吃单（aggressor）而主动成交。这对于做市商或希望维持 maker 费率档位的交易者尤为重要。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="仅减仓reduce-only">仅减仓（Reduce-only）<a href="#仅减仓reduce-only" class="hash-link" aria-label="仅减仓（Reduce-only）的直接链接" title="仅减仓（Reduce-only）的直接链接" translate="no">​</a></h3>
<p>设置为 <code>reduce_only</code> 的订单只会用于减少某合约的持仓，且在目前为平仓状态时不会开仓。不同场所对此指令的具体表现可能有所不同。</p>
<p>在 Nautilus 的 <code>SimulatedExchange</code>（模拟交易所）中，表现与真实场所类似：</p>
<ul>
<li>若关联持仓已被平仓（变为 flat），相关订单会被取消；</li>
<li>随着关联持仓规模减少，订单数量也会相应减少。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="可见数量display-quantity">可见数量（Display quantity）<a href="#可见数量display-quantity" class="hash-link" aria-label="可见数量（Display quantity）的直接链接" title="可见数量（Display quantity）的直接链接" translate="no">​</a></h3>
<p><code>display_qty</code> 指定在限价簿上可见的限价订单数量（也称 iceberg 订单）。可见数量为 0 等同于将订单标记为 <code>hidden</code>（完全隐藏）。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="触发类型trigger-type">触发类型（Trigger type）<a href="#触发类型trigger-type" class="hash-link" aria-label="触发类型（Trigger type）的直接链接" title="触发类型（Trigger type）的直接链接" translate="no">​</a></h3>
<p>又称为触发方法（trigger method），适用于条件触发订单，用来指定止损/触发价格的判定依据。参考 Interactive Brokers 的说明也能帮助理解触发方式的差异。</p>
<ul>
<li><code>DEFAULT</code>：场所默认的触发类型（通常为 <code>LAST</code> 或 <code>BID_ASK</code>）。</li>
<li><code>LAST</code>：以最近成交价（last price）作为触发基准。</li>
<li><code>BID_ASK</code>：以买单（BID）价格触发买入指令，以卖单（ASK）价格触发卖出指令。</li>
<li><code>DOUBLE_LAST</code>：基于最近两次连续的 <code>LAST</code> 价格确认触发。</li>
<li><code>DOUBLE_BID_ASK</code>：基于最近两次连续的 <code>BID</code>/<code>ASK</code> 价格确认触发。</li>
<li><code>LAST_OR_BID_ASK</code>：以 <code>LAST</code> 或 <code>BID</code>/<code>ASK</code> 中任一满足条件者触发。</li>
<li><code>MID_POINT</code>：以 <code>BID</code> 与 <code>ASK</code> 的中点作为触发价。</li>
<li><code>MARK</code>：以场所的标记价（mark price）作为触发价（常见于衍生品）。</li>
<li><code>INDEX</code>：以场所提供的指数价（index price）作为触发价。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="触发偏移类型trigger-offset-type">触发偏移类型（Trigger offset type）<a href="#触发偏移类型trigger-offset-type" class="hash-link" aria-label="触发偏移类型（Trigger offset type）的直接链接" title="触发偏移类型（Trigger offset type）的直接链接" translate="no">​</a></h3>
<p>适用于带追踪（trailing）功能的触发订单，指定如何根据市场价格偏移来调整止损价格。</p>
<ul>
<li><code>DEFAULT</code>：场所的默认偏移类型（通常为 <code>PRICE</code>）。</li>
<li><code>PRICE</code>：按价格差值计算偏移。</li>
<li><code>BASIS_POINTS</code>：按基点（basis points）计算百分比偏移（100bp = 1%）。</li>
<li><code>TICKS</code>：按价格跳动点数（ticks）计算偏移。</li>
<li><code>PRICE_TIER</code>：基于交易场所特定的价格分级（price tier）。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="条件联动订单contingent-orders">条件/联动订单（Contingent orders）<a href="#条件联动订单contingent-orders" class="hash-link" aria-label="条件/联动订单（Contingent orders）的直接链接" title="条件/联动订单（Contingent orders）的直接链接" translate="no">​</a></h3>
<p>可以指定更复杂的订单间关系，例如子订单仅在父订单激活或成交后触发，或一个订单被触发时取消/减少另一个订单的数量。详见后文的“高级订单（Advanced orders）”部分。</p>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="订单工厂order-factory">订单工厂（Order factory）<a href="#订单工厂order-factory" class="hash-link" aria-label="订单工厂（Order factory）的直接链接" title="订单工厂（Order factory）的直接链接" translate="no">​</a></h2>
<p>最简单的创建订单方式是使用内置的 <code>OrderFactory</code>，它会自动附加到每个 <code>Strategy</code> 类中。该工厂负责处理底层细节——例如确保正确的 trader ID 与 strategy ID、生成必要的初始化 ID 与时间戳，并对不适用于某些订单类型或仅用于高级执行指令的参数进行抽象封装。</p>
<p>因此，工厂提供了更简洁的订单创建方法，示例中均在 <code>Strategy</code> 上下文中使用 <code>OrderFactory</code>。</p>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>OrderFactory</code> 的 <a href="/api_reference/common#class-orderfactory">API 参考</a>。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="订单类型">订单类型<a href="#订单类型" class="hash-link" aria-label="订单类型的直接链接" title="订单类型的直接链接" translate="no">​</a></h2>
<p>下面分别描述平台支持的订单类型并给出示例代码。任何可选参数都会在注释中标注默认值。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="市价订单market">市价订单（Market）<a href="#市价订单market" class="hash-link" aria-label="市价订单（Market）的直接链接" title="市价订单（Market）的直接链接" translate="no">​</a></h3>
<p>Market（市价）订单是交易者按当前最优价格立即成交指定数量的指令。可以同时指定若干 time in force 选项，并可以指示该订单是否仅用于减仓（reduce-only）。</p>
<p>下面示例在 Interactive Brokers 的 IdealPro 外汇 ECN 上创建一个以 USD 购买 100,000 AUD 的市价买单：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MarketOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MarketOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">market</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AUD/USD.IDEALPRO&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BUY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IOC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ENTRY&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>MarketOrder</code> 的 <a href="/api_reference/model/orders#class-marketorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="限价订单limit">限价订单（Limit）<a href="#限价订单limit" class="hash-link" aria-label="限价订单（Limit）的直接链接" title="限价订单（Limit）的直接链接" translate="no">​</a></h3>
<p>Limit（限价）订单在指定价格挂单，只有在该价格或更优价格下才会成交。</p>
<p>下面示例在 Binance Futures（合约）上作为做市商以 5000 USDT 的限价卖出 20 份 ETHUSDT-PERP 永续合约：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LimitOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LimitOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ETHUSDT-PERP.BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SELL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;5_000.00&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    post_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display_qty</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None which indicates full display)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>LimitOrder</code> 的 <a href="/api_reference/model/orders#class-limitorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="止损市价stop-market">止损市价（Stop-Market）<a href="#止损市价stop-market" class="hash-link" aria-label="止损市价（Stop-Market）的直接链接" title="止损市价（Stop-Market）的直接链接" translate="no">​</a></h3>
<p>Stop-Market（止损市价）是条件订单：一旦触发，就会立即提交一个 Market 订单。常用于止损（stop-loss），对多头仓位为卖出止损，对空头仓位为买入止损。</p>
<p>下面示例在 Binance 现货/保证金上创建一个触发价为 100,000 USDT 的卖出止损市价单：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> StopMarketOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> StopMarketOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop_market</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BTCUSDT.BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SELL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LAST_PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>StopMarketOrder</code> 的 <a href="/api_reference/model/orders#class-stopmarketorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="止损限价stop-limit">止损限价（Stop-Limit）<a href="#止损限价stop-limit" class="hash-link" aria-label="止损限价（Stop-Limit）的直接链接" title="止损限价（Stop-Limit）的直接链接" translate="no">​</a></h3>
<p>Stop-Limit（止损限价）是一种条件订单：触发后立即提交一个指定价格的 Limit 订单。</p>
<p>下面示例在 Currenex FX ECN 上创建一个在触发价 1.30010 USD 时以限价 1.30000 USD 买入 50,000 GBP 的订单，有效期至 2022-06-06 UTC 中午：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> StopLimitOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> StopLimitOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop_limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GBP/USD.CURRENEX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BUY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;1.30000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;1.30010&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BID_ASK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Timestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;2022-06-06T12:00&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    post_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>StopLimitOrder</code> 的 <a href="/api_reference/model/orders#class-stoplimitorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="市价转限价market-to-limit">市价转限价（Market-To-Limit）<a href="#市价转限价market-to-limit" class="hash-link" aria-label="市价转限价（Market-To-Limit）的直接链接" title="市价转限价（Market-To-Limit）的直接链接" translate="no">​</a></h3>
<p>Market-To-Limit 订单最初作为市价单提交并以当前最佳价撮合；如果部分成交，系统会取消剩余部分并将其以已成交价格重新提交为 Limit 订单。</p>
<p>下面示例在 Interactive Brokers IdealPro 外汇 ECN 上创建一个以 JPY 买入 200,000 USD 的 Market-To-Limit 订单：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MarketToLimitOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MarketToLimitOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">market_to_limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;USD/JPY.IDEALPRO&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BUY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    display_qty</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None which indicates full display)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>MarketToLimitOrder</code> 的 <a href="/api_reference/model/orders#class-markettolimitorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="市价触及market-if-touched">市价触及（Market-If-Touched）<a href="#市价触及market-if-touched" class="hash-link" aria-label="市价触及（Market-If-Touched）的直接链接" title="市价触及（Market-If-Touched）的直接链接" translate="no">​</a></h3>
<p>Market-If-Touched（简称 MIT）是一种条件订单：触发时立即提交 Market 订单。常用于在触及某价格时开仓或为已有仓位止盈。</p>
<p>下面示例在 Binance Futures 上创建一个触发价为 10,000 USDT 的卖出 MIT 订单，数量为 10 张 ETHUSDT-PERP：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MarketIfTouchedOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MarketIfTouchedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">market_if_touched</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ETHUSDT-PERP.BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SELL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;10_000.00&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LAST_PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ENTRY&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>MarketIfTouchedOrder</code> 的 <a href="/api_reference/model/orders#class-marketiftouchedorder">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="限价触及limit-if-touched">限价触及（Limit-If-Touched）<a href="#限价触及limit-if-touched" class="hash-link" aria-label="限价触及（Limit-If-Touched）的直接链接" title="限价触及（Limit-If-Touched）的直接链接" translate="no">​</a></h3>
<p>Limit-If-Touched（LIT）是条件订单：触发后立即提交指定价格的 Limit 订单。</p>
<p>下面示例在 Binance Futures 上创建一个触发价 30,150 USDT 时以限价 30,100 USDT 买入 5 张 BTCUSDT-PERP 的订单，有效期至 2022-06-06 UTC 中午：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LimitIfTouchedOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LimitIfTouchedOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">limit_if_touched</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;BTCUSDT-PERP.BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BUY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;30_100&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;30_150&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LAST_PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Timestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;2022-06-06T12:00&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    post_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;TAKE_PROFIT&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>LimitIfTouched</code> 的 <a href="/api_reference/model/orders#class-limitiftouchedorder-1">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="追踪止损trailing-stop-market">追踪止损（Trailing-Stop-Market）<a href="#追踪止损trailing-stop-market" class="hash-link" aria-label="追踪止损（Trailing-Stop-Market）的直接链接" title="追踪止损（Trailing-Stop-Market）的直接链接" translate="no">​</a></h3>
<p>Trailing-Stop-Market 是一种条件订单，它会将止损触发价按与市场价格的固定偏移量进行追踪。触发后提交 Market 订单。</p>
<p>下面示例在 Binance Futures 上创建一个在激活价 5,000 USD 时生效、并以相对于最近成交价追踪 1%（以基点表示）的卖出追踪止损：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> decimal </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TrailingOffsetType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TrailingStopMarketOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TrailingStopMarketOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">trailing_stop_market</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ETHUSD-PERP.BINANCE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SELL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    activation_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;5_000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">LAST_PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trailing_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Decimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trailing_offset_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TrailingOffsetType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BASIS_POINTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;TRAILING_STOP-1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>TrailingStopMarketOrder</code> 的 <a href="/api_reference/model/orders#class-trailingstopmarketorder-1">API 参考</a>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="追踪止损限价trailing-stop-limit">追踪止损限价（Trailing-Stop-Limit）<a href="#追踪止损限价trailing-stop-limit" class="hash-link" aria-label="追踪止损限价（Trailing-Stop-Limit）的直接链接" title="追踪止损限价（Trailing-Stop-Limit）的直接链接" translate="no">​</a></h3>
<p>Trailing-Stop-Limit 在被触发时会提交一个限价单，随着市场移动该限价也会随同更新直至触发。</p>
<p>下面示例在 Currenex FX ECN 上创建一个以 0.71000 USD 为限价、激活价为 0.72000 USD、并以 0.00100 USD 的止损偏移追踪当前卖方价的买入追踪止损限价单：</p>
<div class="language-python codeBlockContainer_euGm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_zF3K"><pre tabindex="0" class="prism-code language-python codeBlock_G1mO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_QZRj"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pandas </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> pd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> decimal </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> OrderSide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TimeInForce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TriggerType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enums </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TrailingOffsetType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InstrumentId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> nautilus_trader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">orders </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TrailingStopLimitOrder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TrailingStopLimitOrder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">order_factory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">trailing_stop_limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    instrument_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">InstrumentId</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;AUD/USD.CURRENEX&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_side</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OrderSide</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BUY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Quantity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1_250_000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0.71000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    activation_price</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Price</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0.72000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trigger_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TriggerType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BID_ASK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default DEFAULT)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limit_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Decimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0.00050&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trailing_offset</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Decimal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0.00100&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    trailing_offset_type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TrailingOffsetType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PRICE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time_in_force</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TimeInForce</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GTC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default GTC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce_only</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default False)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;TRAILING_STOP&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- optional (default None)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>更多细节请参阅 <code>TrailingStopLimitOrder</code> 的 <a href="/api_reference/model/orders#class-trailingstoplimitorder-1">API 参考</a>。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="高级订单advanced-orders">高级订单（Advanced orders）<a href="#高级订单advanced-orders" class="hash-link" aria-label="高级订单（Advanced orders）的直接链接" title="高级订单（Advanced orders）的直接链接" translate="no">​</a></h2>
<p>以下内容应结合具体经纪商或交易场所关于这些订单类型、列表/分组和执行指令的文档一起阅读（例如 Interactive Brokers 的文档）。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="订单列表order-lists">订单列表（Order lists）<a href="#订单列表order-lists" class="hash-link" aria-label="订单列表（Order lists）的直接链接" title="订单列表（Order lists）的直接链接" translate="no">​</a></h3>
<p>一组有联动关系的订单或较大的订单集合可以被分配到同一个 <code>order_list_id</code> 下。这些订单之间是否存在从属/联动关系取决于订单本身的构造方式以及它们所要路由的具体交易场所。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="联动类型contingency-types">联动类型（Contingency types）<a href="#联动类型contingency-types" class="hash-link" aria-label="联动类型（Contingency types）的直接链接" title="联动类型（Contingency types）的直接链接" translate="no">​</a></h3>
<ul>
<li>
<p><strong>OTO（One-Triggers-Other）</strong>：父订单在执行后会自动提交一个或多个子订单。</p>
<ul>
<li>完全触发（Full-trigger）：子订单仅在父订单完全成交后释放。这在多数零售股票/期权经纪商（如 Schwab、Fidelity、TD Ameritrade）以及许多现货加密场所（Binance、Coinbase）中常见。</li>
<li>部分触发（Partial-trigger）：子订单按每次父订单部分成交按比例释放。见诸于专业级平台（如 Interactive Brokers、大多数期货/外汇 OMS 与 Kraken Pro）。</li>
</ul>
</li>
<li>
<p><strong>OCO（One-Cancels-Other）</strong>：两个或多个联动的在途订单，其中任一订单成交（部分或全部）会触发对其它订单的取消尝试。</p>
</li>
<li>
<p><strong>OUO（One-Updates-Other）</strong>：两个或多个联动的在途订单，其中任一订单成交会触发对其他订单未成交数量的减少更新。</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>这些联动类型对应 FIX 标签 ContingencyType <a href="https://www.onixs.biz/fix-dictionary/5.0.sp2/tagnum_1385.html" target="_blank" rel="noopener noreferrer">1385</a>。</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="one-triggers-other-oto">One-Triggers-Other (OTO)<a href="#one-triggers-other-oto" class="hash-link" aria-label="One-Triggers-Other (OTO)的直接链接" title="One-Triggers-Other (OTO)的直接链接" translate="no">​</a></h4>
<p>一个 OTO 订单包含两部分：</p>
<ol>
<li><strong>Parent order（父订单）</strong>——立即提交至撮合引擎；</li>
<li><strong>Child order(s)（子订单）</strong>——在触发条件满足前保持为离簿（off-book）状态。</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_RpWm" id="触发模型">触发模型<a href="#触发模型" class="hash-link" aria-label="触发模型的直接链接" title="触发模型的直接链接" translate="no">​</a></h5>
<table><thead><tr><th>触发模型</th><th>子订单何时释放？</th></tr></thead><tbody><tr><td><strong>Full trigger</strong></td><td>当父订单累积成交量等于原始下单量（即父订单被完全成交）时释放。</td></tr><tr><td><strong>Partial trigger</strong></td><td>每次父订单部分成交时立即按成交量释放子订单，且子订单数量随后续成交增加而增加。</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>NautilusTrader 的默认回测场所采用 OTO 的部分触发（partial-trigger）模型。未来会提供配置项以选择使用完全触发（full-trigger）模型。</p></div></div>
<blockquote>
<p><strong>为什么这个区别重要？</strong> 完全触发会留下风险窗口：在父订单未被完全成交之前，部分已成交的头寸可能没有其保护性退出单；部分触发则可减轻该风险，因为每一笔成交都会即时关联相应的止损/止盈，但代价是产生更多订单流量和更新。</p>
</blockquote>
<p>OTO 可应用于任何场所支持的资产类型（例如股票入场附带期权对冲、期货入场并构造 OCO 组合、现货加密入场并附带 TP/SL 等）。</p>
<table><thead><tr><th>场所 / 适配器 ID</th><th>支持资产类别</th><th>子订单触发规则</th><th>实务说明</th></tr></thead><tbody><tr><td>Binance / Binance Futures (<code>BINANCE</code>)</td><td>现货、永续合约</td><td><strong>Partial or full</strong> – 在首次成交时触发</td><td>OTOCO/TP-SL 子单会即时出现；注意监控保证金占用。</td></tr><tr><td>Bybit Spot (<code>BYBIT</code>)</td><td>现货</td><td><strong>Full</strong> – 完成后放置子单</td><td>仅在限价单完全成交后激活 TP-SL。</td></tr><tr><td>Bybit Perps (<code>BYBIT</code>)</td><td>永续合约</td><td><strong>Partial and full</strong> – 可配置</td><td>“Partial-position” 模式按成交到达调整 TP-SL。</td></tr><tr><td>Kraken Futures (<code>KRAKEN</code>)</td><td>期货 &amp; 永续</td><td><strong>Partial and full</strong> – 自动</td><td>子订单数量会随每次部分成交而匹配。</td></tr><tr><td>OKX (<code>OKX</code>)</td><td>现货、期货、期权</td><td><strong>Full</strong> – 附加止损需等待成交</td><td>可单独添加仓位级别的 TP-SL。</td></tr><tr><td>Interactive Brokers (<code>INTERACTIVE_BROKERS</code>)</td><td>股票、期权、外汇、期货</td><td><strong>Configurable</strong> – OCA 可按比例减少</td><td><code>OcaType 2/3</code> 支持减少剩余子单数量。</td></tr><tr><td>Coinbase International (<code>COINBASE_INTX</code>)</td><td>现货 &amp; 永续</td><td><strong>Full</strong> – 成交后添加档位</td><td>入场与 bracket（挂单组合）并非同时提交；入场后再添加。</td></tr><tr><td>dYdX v4 (<code>DYDX</code>)</td><td>永续（DEX）</td><td>链上条件（size exact）</td><td>TP-SL 由 oracle 价格触发；部分成交不适用。</td></tr><tr><td>Polymarket (<code>POLYMARKET</code>)</td><td>预测市场（DEX）</td><td>N/A</td><td>高级联动由策略层负责处理。</td></tr><tr><td>Betfair (<code>BETFAIR</code>)</td><td>体育博彩</td><td>N/A</td><td>高级联动由策略层负责处理。</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="one-cancels-other-oco">One-Cancels-Other (OCO)<a href="#one-cancels-other-oco" class="hash-link" aria-label="One-Cancels-Other (OCO)的直接链接" title="One-Cancels-Other (OCO)的直接链接" translate="no">​</a></h4>
<p>OCO 是一组联动订单，其中任意一个订单（无论部分或全部成交）都会触发对其它订单的尽力取消。两个订单同时处于激活状态；一旦其中一个开始成交，场所会尝试取消剩余未成交部分。</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="one-updates-other-ouo">One-Updates-Other (OUO)<a href="#one-updates-other-ouo" class="hash-link" aria-label="One-Updates-Other (OUO)的直接链接" title="One-Updates-Other (OUO)的直接链接" translate="no">​</a></h4>
<p>OUO 是一组联动订单，其中一笔成交会立即按比例减少另一笔（或多笔）订单的未成交数量。双方订单并行存在，每次部分成交都会以尽力而为的方式更新其对手订单的剩余量。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="组合单bracket-orders">组合单（Bracket orders）<a href="#组合单bracket-orders" class="hash-link" aria-label="组合单（Bracket orders）的直接链接" title="组合单（Bracket orders）的直接链接" translate="no">​</a></h3>
<p>Bracket（组合）订单是一种高级用法，允许交易者同时为仓位设置止盈（take-profit）和止损（stop-loss）。这通常包括一个父订单（入场）以及两个子订单：一个 LIMIT 型止盈单和一个 STOP_MARKET 型止损单。当父订单成交后，系统会提交这两个子单；若行情朝有利方向移动，止盈会平仓；若行情反向，则止损限制亏损。</p>
<p>可以通过 <a href="/api_reference/common#class-orderfactory">OrderFactory</a> 简便地创建 bracket 订单，该工厂支持多种订单类型、参数及指令。</p>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>注意保证金要求：对仓位进行 bracket 操作会占用更多的委托保证金。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_RpWm" id="本地模拟订单emulated-orders">本地模拟订单（Emulated orders）<a href="#本地模拟订单emulated-orders" class="hash-link" aria-label="本地模拟订单（Emulated orders）的直接链接" title="本地模拟订单（Emulated orders）的直接链接" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="简介">简介<a href="#简介" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接" translate="no">​</a></h3>
<p>在深入实现细节前，需理解 emulated orders 在 NautilusTrader 中的核心目的：当交易场所本身不支持某些订单类型时，平台可以在本地对这些订单行为进行模拟，使交易者仍可使用这些高级订单类型。</p>
<p>实现方式为：Nautilus 在本地模拟这些订单（例如 <code>STOP_LIMIT</code> 或 <code>TRAILING_STOP</code>），而对外仅向场所提交基础的 <code>MARKET</code> 或 <code>LIMIT</code> 订单来执行。</p>
<p>当创建 emulated order 时，Nautilus 会持续跟踪一种特定的市场价格类型（由 <code>emulation_trigger</code> 参数指定），并根据订单类型与设置的条件，在触发条件满足时自动提交相应的基础订单（<code>MARKET</code> / <code>LIMIT</code>）。</p>
<p>例如，创建一个 emulated 的 <code>STOP_LIMIT</code> 订单时，Nautilus 会监测市场价格，当达到你设置的止损价后自动向场所提交一个 <code>LIMIT</code> 订单。</p>
<p>为了执行模拟，Nautilus 需要知道监测哪种“市场价格”类型。默认情况下使用 bid/ask（买卖挂单价），因此示例中常见 <code>emulation_trigger=TriggerType.DEFAULT</code>（等同于 <code>TriggerType.BID_ASK</code>）。当然，Nautilus 也支持多种其他价格类型以指导模拟流程。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="提交用于模拟的订单">提交用于模拟的订单<a href="#提交用于模拟的订单" class="hash-link" aria-label="提交用于模拟的订单的直接链接" title="提交用于模拟的订单的直接链接" translate="no">​</a></h3>
<p>要启用订单模拟，只需在订单构造器或 <code>OrderFactory</code> 的创建方法中为 <code>emulation_trigger</code> 参数传递一个 <code>TriggerType</code>。当前支持的 emulation trigger 类型如下：</p>
<ul>
<li><code>NO_TRIGGER</code>：完全禁用本地模拟，订单直接提交到场所。</li>
<li><code>DEFAULT</code>：等同于 <code>BID_ASK</code>。</li>
<li><code>BID_ASK</code>：使用买卖盘（quotes）作为触发依据。</li>
<li><code>LAST</code>：使用成交价（trades）作为触发依据。</li>
</ul>
<p>触发类型的选择会影响模拟行为：</p>
<ul>
<li>对于 <code>STOP</code> 订单，触发价将与所选触发类型进行比较；</li>
<li>对于 <code>TRAILING_STOP</code>，追踪偏移将根据所选触发类型进行更新；</li>
<li>对于 <code>LIMIT</code>，限价将与所选触发类型进行比较。</li>
</ul>
<p>下面表格列出可用于 <code>emulation_trigger</code> 的值及其说明：</p>
<table><thead><tr><th style="text-align:left">Trigger Type</th><th style="text-align:left">说明</th><th style="text-align:left">常见使用场景</th></tr></thead><tbody><tr><td style="text-align:left"><code>NO_TRIGGER</code></td><td style="text-align:left">完全禁用模拟，订单直接发送到场所，无本地处理。</td><td style="text-align:left">想使用场所的原生订单处理，或仅为不需要模拟的简单订单类型时使用。</td></tr><tr><td style="text-align:left"><code>DEFAULT</code></td><td style="text-align:left">等同于 <code>BID_ASK</code>，是大多数模拟订单的默认选择。</td><td style="text-align:left">通用模拟场景，使用“默认”市场价格类型。</td></tr><tr><td style="text-align:left"><code>BID_ASK</code></td><td style="text-align:left">使用最优买/卖价（quotes）作为模拟触发依据。</td><td style="text-align:left">适用于应对买卖价差的止损、追踪止损等场景。</td></tr><tr><td style="text-align:left"><code>LAST_PRICE</code></td><td style="text-align:left">使用最近成交价（last）作为模拟触发依据。</td><td style="text-align:left">更适合基于实际成交触发的订单。</td></tr><tr><td style="text-align:left"><code>DOUBLE_LAST</code></td><td style="text-align:left">使用两次连续的成交价确认触发条件。</td><td style="text-align:left">需要更多价格确认以避免噪声触发。</td></tr><tr><td style="text-align:left"><code>DOUBLE_BID_ASK</code></td><td style="text-align:left">使用两次连续的买/卖价更新确认触发条件。</td><td style="text-align:left">需要在报价波动中额外确认触发时使用。</td></tr><tr><td style="text-align:left"><code>LAST_OR_BID_ASK</code></td><td style="text-align:left">以成交价或买卖价的任一满足条件者触发。</td><td style="text-align:left">希望对任意类型价格变动都更敏感时使用。</td></tr><tr><td style="text-align:left"><code>MID_POINT</code></td><td style="text-align:left">以买卖价中点作为触发依据。</td><td style="text-align:left">基于理论公平价触发的订单类型。</td></tr><tr><td style="text-align:left"><code>MARK_PRICE</code></td><td style="text-align:left">使用标记价（mark price，常见于衍生品）触发。</td><td style="text-align:left">对期货与永续合约等衍生品尤为有用。</td></tr><tr><td style="text-align:left"><code>INDEX_PRICE</code></td><td style="text-align:left">使用某个指数价作为触发依据。</td><td style="text-align:left">交易与指数挂钩的衍生品时使用。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="技术实现">技术实现<a href="#技术实现" class="hash-link" aria-label="技术实现的直接链接" title="技术实现的直接链接" translate="no">​</a></h3>
<p>平台允许在本地模拟大多数订单类型，无论目标场所是否原生支持。订单模拟的逻辑路径在所有环境上下文（<a href="/concepts/architecture#environment-contexts">environment contexts</a>）中是一致的，并由公用的 <code>OrderEmulator</code> 组件负责。</p>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>单个运行实例中可存在的 emulated orders 数量没有限制。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="生命周期">生命周期<a href="#生命周期" class="hash-link" aria-label="生命周期的直接链接" title="生命周期的直接链接" translate="no">​</a></h3>
<p>一个 emulated order 的生命周期如下：</p>
<ol>
<li>由 <code>Strategy</code> 通过 <code>submit_order</code> 提交；</li>
<li>发往 <code>RiskEngine</code> 做事前风险检查（可能在此被拒绝）；</li>
<li>传入 <code>OrderEmulator</code>，在本地被“持有/模拟”；</li>
<li>一旦触发，本地 emulated order 会被转换为 <code>MARKET</code> 或 <code>LIMIT</code> 并释放（提交至场所）；</li>
<li>释放后的订单在提交场所前会再次经过最终风险检查。</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>Emulated orders 与普通订单遵循相同的风控约束，且可以像常规订单一样被策略修改或取消；在执行“取消所有订单”操作时也包含在内。</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_lEzE alert alert--info"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_Vfkp"><p>一个 emulated order 在整个生命周期中会保留其原始的 client order ID，便于通过缓存（cache）查询。</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="被持有的-emulated-orders">被持有的 emulated orders<a href="#被持有的-emulated-orders" class="hash-link" aria-label="被持有的 emulated orders的直接链接" title="被持有的 emulated orders的直接链接" translate="no">​</a></h4>
<p>当 emulated order 被 <code>OrderEmulator</code> 持有时，会发生以下处理：</p>
<ul>
<li>原始的 <code>SubmitOrder</code> 命令将被缓存；</li>
<li>emulated order 会在本地的 <code>MatchingCore</code> 中进行处理；</li>
<li><code>OrderEmulator</code> 会订阅所需的市场数据（如果尚未订阅）以更新匹配模块；</li>
<li>emulated order 在被释放或取消之前可以被交易者修改，且会随市场更新而变更。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="已释放的-emulated-orders">已释放的 emulated orders<a href="#已释放的-emulated-orders" class="hash-link" aria-label="已释放的 emulated orders的直接链接" title="已释放的 emulated orders的直接链接" translate="no">​</a></h4>
<p>一旦有数据到达触发或本地匹配到 emulated order，会发生以下“释放”操作：</p>
<ul>
<li>订单将通过附加的 <code>OrderInitialized</code> 事件被转换为 <code>MARKET</code> 或 <code>LIMIT</code>；</li>
<li>该订单的 <code>emulation_trigger</code> 会被设置为 <code>NONE</code>（不再被视为 emulated order）；</li>
<li>原始 <code>SubmitOrder</code> 命令中附带的订单会被重新发送至 <code>RiskEngine</code> 进行因修改而产生的额外检查；</li>
<li>若未被拒绝，命令将继续进入 <code>ExecutionEngine</code>，并通过 <code>ExecutionClient</code> 发往交易场所。</li>
</ul>
<p>下表列出哪些订单类型可以被模拟，以及在释放时会转换成何种订单类型并提交至交易场所。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="可模拟的订单类型">可模拟的订单类型<a href="#可模拟的订单类型" class="hash-link" aria-label="可模拟的订单类型的直接链接" title="可模拟的订单类型的直接链接" translate="no">​</a></h3>
<p>下表列出了可模拟的订单类型以及它们在释放后将转换成的订单类型：</p>
<table><thead><tr><th style="text-align:left">Order type for emulation</th><th style="text-align:left">Can emulate</th><th style="text-align:left">Released type</th></tr></thead><tbody><tr><td style="text-align:left"><code>MARKET</code></td><td style="text-align:left"></td><td style="text-align:left">n/a</td></tr><tr><td style="text-align:left"><code>MARKET_TO_LIMIT</code></td><td style="text-align:left"></td><td style="text-align:left">n/a</td></tr><tr><td style="text-align:left"><code>LIMIT</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>MARKET</code></td></tr><tr><td style="text-align:left"><code>STOP_MARKET</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>MARKET</code></td></tr><tr><td style="text-align:left"><code>STOP_LIMIT</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>LIMIT</code></td></tr><tr><td style="text-align:left"><code>MARKET_IF_TOUCHED</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>MARKET</code></td></tr><tr><td style="text-align:left"><code>LIMIT_IF_TOUCHED</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>LIMIT</code></td></tr><tr><td style="text-align:left"><code>TRAILING_STOP_MARKET</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>MARKET</code></td></tr><tr><td style="text-align:left"><code>TRAILING_STOP_LIMIT</code></td><td style="text-align:left">✓</td><td style="text-align:left"><code>LIMIT</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="查询querying">查询（Querying）<a href="#查询querying" class="hash-link" aria-label="查询（Querying）的直接链接" title="查询（Querying）的直接链接" translate="no">​</a></h3>
<p>在编写策略时，可能需要获知系统中 emulated orders 的状态，以下为几种查询方式：</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="通过-cache">通过 Cache<a href="#通过-cache" class="hash-link" aria-label="通过 Cache的直接链接" title="通过 Cache的直接链接" translate="no">​</a></h4>
<p><code>Cache</code> 提供的相关方法包括：</p>
<ul>
<li><code>self.cache.orders_emulated(...)</code>：返回当前所有被模拟的订单；</li>
<li><code>self.cache.is_order_emulated(...)</code>：检查某个特定订单是否为模拟订单；</li>
<li><code>self.cache.orders_emulated_count(...)</code>：返回被模拟订单的数量。</li>
</ul>
<p>更多细节请参阅完整的 <a href="/api_reference/cache">API 参考</a>。</p>
<h4 class="anchor anchorWithStickyNavbar_RpWm" id="直接查询订单对象">直接查询订单对象<a href="#直接查询订单对象" class="hash-link" aria-label="直接查询订单对象的直接链接" title="直接查询订单对象的直接链接" translate="no">​</a></h4>
<p>也可以直接在订单对象上查询：</p>
<ul>
<li><code>order.is_emulated</code></li>
</ul>
<p>若上述任一查询返回 <code>False</code>，则说明该订单已从 <code>OrderEmulator</code> 中释放，或从未为 emulated order。</p>
<div class="theme-admonition theme-admonition-warning admonition_lEzE alert alert--warning"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_Vfkp"><p>不建议持有对 emulated order 的本地对象引用，因为该对象在释放时会被转换。应依赖用于查询与跟踪的 <code>Cache</code>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="持久化与恢复">持久化与恢复<a href="#持久化与恢复" class="hash-link" aria-label="持久化与恢复的直接链接" title="持久化与恢复的直接链接" translate="no">​</a></h3>
<p>如果运行中的系统在存在活跃 emulated orders 时崩溃或关闭，这些订单将在重启后从配置的缓存数据库中被重新加载到 <code>OrderEmulator</code>，确保持久化与恢复。</p>
<h3 class="anchor anchorWithStickyNavbar_RpWm" id="最佳实践">最佳实践<a href="#最佳实践" class="hash-link" aria-label="最佳实践的直接链接" title="最佳实践的直接链接" translate="no">​</a></h3>
<p>使用 emulated orders 时建议遵循以下最佳实践：</p>
<ol>
<li>始终使用 <code>Cache</code> 查询或跟踪 emulated orders，而非持有本地引用；</li>
<li>了解 emulated orders 在释放时会转换为不同的订单类型；</li>
<li>记住 emulated orders 在提交与释放时都会经过风控检查。</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_lEzE alert alert--secondary"><div class="admonitionHeading_aAf0"><span class="admonitionIcon_xtBN"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_Vfkp"><p>订单模拟使你即便在目标场所不支持高级订单类型时，也能使用这些工具，从而提高策略在不同场所之间的可移植性。</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Aloento/NautilusTraderDoc/tree/main/docs/concepts/orders.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_F7ru" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_GNoA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/concepts/message_bus"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">消息总线</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/concepts/overview"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">概览</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pg_n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a><ul><li><a href="#术语" class="table-of-contents__link toc-highlight">术语</a></li></ul></li><li><a href="#执行指令execution-instructions" class="table-of-contents__link toc-highlight">执行指令（Execution instructions）</a><ul><li><a href="#有效期time-in-force" class="table-of-contents__link toc-highlight">有效期（Time in force）</a></li><li><a href="#到期时间expire-time" class="table-of-contents__link toc-highlight">到期时间（Expire time）</a></li><li><a href="#仅挂单post-only" class="table-of-contents__link toc-highlight">仅挂单（Post-only）</a></li><li><a href="#仅减仓reduce-only" class="table-of-contents__link toc-highlight">仅减仓（Reduce-only）</a></li><li><a href="#可见数量display-quantity" class="table-of-contents__link toc-highlight">可见数量（Display quantity）</a></li><li><a href="#触发类型trigger-type" class="table-of-contents__link toc-highlight">触发类型（Trigger type）</a></li><li><a href="#触发偏移类型trigger-offset-type" class="table-of-contents__link toc-highlight">触发偏移类型（Trigger offset type）</a></li><li><a href="#条件联动订单contingent-orders" class="table-of-contents__link toc-highlight">条件/联动订单（Contingent orders）</a></li></ul></li><li><a href="#订单工厂order-factory" class="table-of-contents__link toc-highlight">订单工厂（Order factory）</a></li><li><a href="#订单类型" class="table-of-contents__link toc-highlight">订单类型</a><ul><li><a href="#市价订单market" class="table-of-contents__link toc-highlight">市价订单（Market）</a></li><li><a href="#限价订单limit" class="table-of-contents__link toc-highlight">限价订单（Limit）</a></li><li><a href="#止损市价stop-market" class="table-of-contents__link toc-highlight">止损市价（Stop-Market）</a></li><li><a href="#止损限价stop-limit" class="table-of-contents__link toc-highlight">止损限价（Stop-Limit）</a></li><li><a href="#市价转限价market-to-limit" class="table-of-contents__link toc-highlight">市价转限价（Market-To-Limit）</a></li><li><a href="#市价触及market-if-touched" class="table-of-contents__link toc-highlight">市价触及（Market-If-Touched）</a></li><li><a href="#限价触及limit-if-touched" class="table-of-contents__link toc-highlight">限价触及（Limit-If-Touched）</a></li><li><a href="#追踪止损trailing-stop-market" class="table-of-contents__link toc-highlight">追踪止损（Trailing-Stop-Market）</a></li><li><a href="#追踪止损限价trailing-stop-limit" class="table-of-contents__link toc-highlight">追踪止损限价（Trailing-Stop-Limit）</a></li></ul></li><li><a href="#高级订单advanced-orders" class="table-of-contents__link toc-highlight">高级订单（Advanced orders）</a><ul><li><a href="#订单列表order-lists" class="table-of-contents__link toc-highlight">订单列表（Order lists）</a></li><li><a href="#联动类型contingency-types" class="table-of-contents__link toc-highlight">联动类型（Contingency types）</a></li><li><a href="#组合单bracket-orders" class="table-of-contents__link toc-highlight">组合单（Bracket orders）</a></li></ul></li><li><a href="#本地模拟订单emulated-orders" class="table-of-contents__link toc-highlight">本地模拟订单（Emulated orders）</a><ul><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a></li><li><a href="#提交用于模拟的订单" class="table-of-contents__link toc-highlight">提交用于模拟的订单</a></li><li><a href="#技术实现" class="table-of-contents__link toc-highlight">技术实现</a></li><li><a href="#生命周期" class="table-of-contents__link toc-highlight">生命周期</a></li><li><a href="#可模拟的订单类型" class="table-of-contents__link toc-highlight">可模拟的订单类型</a></li><li><a href="#查询querying" class="table-of-contents__link toc-highlight">查询（Querying）</a></li><li><a href="#持久化与恢复" class="table-of-contents__link toc-highlight">持久化与恢复</a></li><li><a href="#最佳实践" class="table-of-contents__link toc-highlight">最佳实践</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nautechsystems/nautilus_trader" target="_blank" rel="noopener noreferrer" class="footer__link-item">Official GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://nautilustrader.io/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Official Documentation<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_KfBJ"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Nautech Systems Pty Ltd. All rights reserved.</div></div></div></footer></div>
</body>
</html>